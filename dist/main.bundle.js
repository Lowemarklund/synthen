/******/ (function (modules) { // webpackBootstrap
  /******/ 	function hotDisposeChunk (chunkId) {
    /******/ 		delete installedChunks[chunkId]
  /******/ 	}
  /******/ 	var parentHotUpdateCallback = this['webpackHotUpdate']
  /******/ 	this['webpackHotUpdate'] =
/******/ 	function webpackHotUpdateCallback (chunkId, moreModules) { // eslint-disable-line no-unused-vars
  /******/ 		hotAddUpdateChunk(chunkId, moreModules)
  /******/ 		if (parentHotUpdateCallback) parentHotUpdateCallback(chunkId, moreModules)
/******/ 	}
/******/
  /******/ 	function hotDownloadUpdateChunk (chunkId) { // eslint-disable-line no-unused-vars
    /******/ 		var head = document.getElementsByTagName('head')[0]
    /******/ 		var script = document.createElement('script')
    /******/ 		script.type = 'text/javascript'
    /******/ 		script.charset = 'utf-8'
    /******/ 		script.src = __webpack_require__.p + '' + chunkId + '.' + hotCurrentHash + '.hot-update.js'
    /******/ 		head.appendChild(script)
  /******/ 	}
/******/
  /******/ 	function hotDownloadManifest () { // eslint-disable-line no-unused-vars
    /******/ 		return new Promise(function (resolve, reject) {
      /******/ 			if (typeof XMLHttpRequest === 'undefined')
  /******/ 				{ return reject(new Error('No browser support')) }
      /******/ 			try {
        /******/ 				var request = new XMLHttpRequest()
        /******/ 				var requestPath = __webpack_require__.p + '' + hotCurrentHash + '.hot-update.json'
        /******/ 				request.open('GET', requestPath, true)
        /******/ 				request.timeout = 10000
        /******/ 				request.send(null)
      /******/ 			} catch (err) {
        /******/ 				return reject(err)
      /******/ 			}
      /******/ 			request.onreadystatechange = function () {
        /******/ 				if (request.readyState !== 4) return
        /******/ 				if (request.status === 0) {
/******/ 					// timeout
          /******/ 					reject(new Error('Manifest request to ' + requestPath + ' timed out.'))
        /******/ 				} else if (request.status === 404) {
/******/ 					// no update available
          /******/ 					resolve()
        /******/ 				} else if (request.status !== 200 && request.status !== 304) {
/******/ 					// other failure
          /******/ 					reject(new Error('Manifest request to ' + requestPath + ' failed.'))
        /******/ 				} else {
/******/ 					// success
          /******/ 					try {
            /******/ 						var update = JSON.parse(request.responseText)
          /******/ 					} catch (e) {
            /******/ 						reject(e)
            /******/ 						return
          /******/ 					}
          /******/ 					resolve(update)
        /******/ 				}
      /******/ 			}
    /******/ 		})
  /******/ 	}
/******/
/******/
/******/
  /******/ 	var hotApplyOnUpdate = true
  /******/ 	var hotCurrentHash = '09dc4ab7d42779c45a8b' // eslint-disable-line no-unused-vars
  /******/ 	var hotCurrentModuleData = {}
  /******/ 	var hotCurrentChildModule // eslint-disable-line no-unused-vars
  /******/ 	var hotCurrentParents = [] // eslint-disable-line no-unused-vars
  /******/ 	var hotCurrentParentsTemp = [] // eslint-disable-line no-unused-vars
/******/
  /******/ 	function hotCreateRequire (moduleId) { // eslint-disable-line no-unused-vars
    /******/ 		var me = installedModules[moduleId]
    /******/ 		if (!me) return __webpack_require__
    /******/ 		var fn = function (request) {
      /******/ 			if (me.hot.active) {
        /******/ 				if (installedModules[request]) {
          /******/ 					if (installedModules[request].parents.indexOf(moduleId) < 0)
  /******/ 						{ installedModules[request].parents.push(moduleId) }
        /******/ 				} else {
          /******/ 					hotCurrentParents = [moduleId]
          /******/ 					hotCurrentChildModule = request
        /******/ 				}
        /******/ 				if (me.children.indexOf(request) < 0)
  /******/ 					{ me.children.push(request) }
      /******/ 			} else {
        /******/ 				console.warn('[HMR] unexpected require(' + request + ') from disposed module ' + moduleId)
        /******/ 				hotCurrentParents = []
      /******/ 			}
      /******/ 			return __webpack_require__(request)
    /******/ 		}
    /******/ 		var ObjectFactory = function ObjectFactory (name) {
      /******/ 			return {
        /******/ 				configurable: true,
        /******/ 				enumerable: true,
        /******/ 				get: function () {
          /******/ 					return __webpack_require__[name]
        /******/ 				},
        /******/ 				set: function (value) {
          /******/ 					__webpack_require__[name] = value
        /******/ 				}
      /******/ 			}
    /******/ 		}
    /******/ 		for (var name in __webpack_require__) {
      /******/ 			if (Object.prototype.hasOwnProperty.call(__webpack_require__, name) && name !== 'e') {
        /******/ 				Object.defineProperty(fn, name, ObjectFactory(name))
      /******/ 			}
    /******/ 		}
    /******/ 		fn.e = function (chunkId) {
      /******/ 			if (hotStatus === 'ready')
  /******/ 				{ hotSetStatus('prepare') }
      /******/ 			hotChunksLoading++
      /******/ 			return __webpack_require__.e(chunkId).then(finishChunkLoading, function (err) {
        /******/ 				finishChunkLoading()
        /******/ 				throw err
      /******/ 			})
/******/
      /******/ 			function finishChunkLoading () {
        /******/ 				hotChunksLoading--
        /******/ 				if (hotStatus === 'prepare') {
          /******/ 					if (!hotWaitingFilesMap[chunkId]) {
            /******/ 						hotEnsureUpdateChunk(chunkId)
          /******/ 					}
          /******/ 					if (hotChunksLoading === 0 && hotWaitingFiles === 0) {
            /******/ 						hotUpdateDownloaded()
          /******/ 					}
        /******/ 				}
      /******/ 			}
    /******/ 		}
    /******/ 		return fn
  /******/ 	}
/******/
  /******/ 	function hotCreateModule (moduleId) { // eslint-disable-line no-unused-vars
    /******/ 		var hot = {
/******/ 			// private stuff
      /******/ 			_acceptedDependencies: {},
      /******/ 			_declinedDependencies: {},
      /******/ 			_selfAccepted: false,
      /******/ 			_selfDeclined: false,
      /******/ 			_disposeHandlers: [],
      /******/ 			_main: hotCurrentChildModule !== moduleId,
/******/
/******/ 			// Module API
      /******/ 			active: true,
      /******/ 			accept: function (dep, callback) {
        /******/ 				if (typeof dep === 'undefined')
  /******/ 					{ hot._selfAccepted = true }
        /******/ 				else if (typeof dep === 'function')
  /******/ 					{ hot._selfAccepted = dep }
        /******/ 				else if (typeof dep === 'object')
  /******/ 					{
          for (var i = 0; i < dep.length; i++)
    /******/ 						{ hot._acceptedDependencies[dep[i]] = callback || function () {} }
        }
        /******/ 				else
/******/ 					{ hot._acceptedDependencies[dep] = callback || function () {} }
      /******/ 			},
      /******/ 			decline: function (dep) {
        /******/ 				if (typeof dep === 'undefined')
  /******/ 					{ hot._selfDeclined = true }
        /******/ 				else if (typeof dep === 'object')
  /******/ 					{
          for (var i = 0; i < dep.length; i++)
    /******/ 						{ hot._declinedDependencies[dep[i]] = true }
        }
        /******/ 				else
/******/ 					{ hot._declinedDependencies[dep] = true }
      /******/ 			},
      /******/ 			dispose: function (callback) {
        /******/ 				hot._disposeHandlers.push(callback)
      /******/ 			},
      /******/ 			addDisposeHandler: function (callback) {
        /******/ 				hot._disposeHandlers.push(callback)
      /******/ 			},
      /******/ 			removeDisposeHandler: function (callback) {
        /******/ 				var idx = hot._disposeHandlers.indexOf(callback)
        /******/ 				if (idx >= 0) hot._disposeHandlers.splice(idx, 1)
      /******/ 			},
/******/
/******/ 			// Management API
      /******/ 			check: hotCheck,
      /******/ 			apply: hotApply,
      /******/ 			status: function (l) {
        /******/ 				if (!l) return hotStatus
        /******/ 				hotStatusHandlers.push(l)
      /******/ 			},
      /******/ 			addStatusHandler: function (l) {
        /******/ 				hotStatusHandlers.push(l)
      /******/ 			},
      /******/ 			removeStatusHandler: function (l) {
        /******/ 				var idx = hotStatusHandlers.indexOf(l)
        /******/ 				if (idx >= 0) hotStatusHandlers.splice(idx, 1)
      /******/ 			},
/******/
/******/ 			// inherit from previous dispose call
      /******/ 			data: hotCurrentModuleData[moduleId]
    /******/ 		}
    /******/ 		hotCurrentChildModule = undefined
    /******/ 		return hot
  /******/ 	}
/******/
  /******/ 	var hotStatusHandlers = []
  /******/ 	var hotStatus = 'idle'
/******/
  /******/ 	function hotSetStatus (newStatus) {
    /******/ 		hotStatus = newStatus
    /******/ 		for (var i = 0; i < hotStatusHandlers.length; i++)
  /******/ 			{ hotStatusHandlers[i].call(null, newStatus) }
  /******/ 	}
/******/
/******/ 	// while downloading
  /******/ 	var hotWaitingFiles = 0
  /******/ 	var hotChunksLoading = 0
  /******/ 	var hotWaitingFilesMap = {}
  /******/ 	var hotRequestedFilesMap = {}
  /******/ 	var hotAvailableFilesMap = {}
  /******/ 	var hotDeferred
/******/
/******/ 	// The update info
  /******/ 	var hotUpdate, hotUpdateNewHash
/******/
  /******/ 	function toModuleId (id) {
    /******/ 		var isNumber = (+id) + '' === id
    /******/ 		return isNumber ? +id : id
  /******/ 	}
/******/
  /******/ 	function hotCheck (apply) {
    /******/ 		if (hotStatus !== 'idle') throw new Error('check() is only allowed in idle status')
    /******/ 		hotApplyOnUpdate = apply
    /******/ 		hotSetStatus('check')
    /******/ 		return hotDownloadManifest().then(function (update) {
      /******/ 			if (!update) {
        /******/ 				hotSetStatus('idle')
        /******/ 				return null
      /******/ 			}
      /******/ 			hotRequestedFilesMap = {}
      /******/ 			hotWaitingFilesMap = {}
      /******/ 			hotAvailableFilesMap = update.c
      /******/ 			hotUpdateNewHash = update.h
/******/
      /******/ 			hotSetStatus('prepare')
      /******/ 			var promise = new Promise(function (resolve, reject) {
        /******/ 				hotDeferred = {
          /******/ 					resolve: resolve,
          /******/ 					reject: reject
        /******/ 				}
      /******/ 			})
      /******/ 			hotUpdate = {}
      /******/ 			var chunkId = 0
      /******/ 			{ // eslint-disable-line no-lone-blocks
/******/ 				/* globals chunkId */
        /******/ 				hotEnsureUpdateChunk(chunkId)
      /******/ 			}
      /******/ 			if (hotStatus === 'prepare' && hotChunksLoading === 0 && hotWaitingFiles === 0) {
        /******/ 				hotUpdateDownloaded()
      /******/ 			}
      /******/ 			return promise
    /******/ 		})
  /******/ 	}
/******/
  /******/ 	function hotAddUpdateChunk (chunkId, moreModules) { // eslint-disable-line no-unused-vars
    /******/ 		if (!hotAvailableFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])
  /******/ 			{ return }
    /******/ 		hotRequestedFilesMap[chunkId] = false
    /******/ 		for (var moduleId in moreModules) {
      /******/ 			if (Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
        /******/ 				hotUpdate[moduleId] = moreModules[moduleId]
      /******/ 			}
    /******/ 		}
    /******/ 		if (--hotWaitingFiles === 0 && hotChunksLoading === 0) {
      /******/ 			hotUpdateDownloaded()
    /******/ 		}
  /******/ 	}
/******/
  /******/ 	function hotEnsureUpdateChunk (chunkId) {
    /******/ 		if (!hotAvailableFilesMap[chunkId]) {
      /******/ 			hotWaitingFilesMap[chunkId] = true
    /******/ 		} else {
      /******/ 			hotRequestedFilesMap[chunkId] = true
      /******/ 			hotWaitingFiles++
      /******/ 			hotDownloadUpdateChunk(chunkId)
    /******/ 		}
  /******/ 	}
/******/
  /******/ 	function hotUpdateDownloaded () {
    /******/ 		hotSetStatus('ready')
    /******/ 		var deferred = hotDeferred
    /******/ 		hotDeferred = null
    /******/ 		if (!deferred) return
    /******/ 		if (hotApplyOnUpdate) {
      /******/ 			hotApply(hotApplyOnUpdate).then(function (result) {
        /******/ 				deferred.resolve(result)
      /******/ 			}, function (err) {
        /******/ 				deferred.reject(err)
      /******/ 			})
    /******/ 		} else {
      /******/ 			var outdatedModules = []
      /******/ 			for (var id in hotUpdate) {
        /******/ 				if (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {
          /******/ 					outdatedModules.push(toModuleId(id))
        /******/ 				}
      /******/ 			}
      /******/ 			deferred.resolve(outdatedModules)
    /******/ 		}
  /******/ 	}
/******/
  /******/ 	function hotApply (options) {
    /******/ 		if (hotStatus !== 'ready') throw new Error('apply() is only allowed in ready status')
    /******/ 		options = options || {}
/******/
    /******/ 		var cb
    /******/ 		var i
    /******/ 		var j
    /******/ 		var module
    /******/ 		var moduleId
/******/
    /******/ 		function getAffectedStuff (updateModuleId) {
      /******/ 			var outdatedModules = [updateModuleId]
      /******/ 			var outdatedDependencies = {}
/******/
      /******/ 			var queue = outdatedModules.slice().map(function (id) {
        /******/ 				return {
          /******/ 					chain: [id],
          /******/ 					id: id
        /******/ 				}
      /******/ 			})
      /******/ 			while (queue.length > 0) {
        /******/ 				var queueItem = queue.pop()
        /******/ 				var moduleId = queueItem.id
        /******/ 				var chain = queueItem.chain
        /******/ 				module = installedModules[moduleId]
        /******/ 				if (!module || module.hot._selfAccepted)
  /******/ 					{ continue }
        /******/ 				if (module.hot._selfDeclined) {
          /******/ 					return {
            /******/ 						type: 'self-declined',
            /******/ 						chain: chain,
            /******/ 						moduleId: moduleId
          /******/ 					}
        /******/ 				}
        /******/ 				if (module.hot._main) {
          /******/ 					return {
            /******/ 						type: 'unaccepted',
            /******/ 						chain: chain,
            /******/ 						moduleId: moduleId
          /******/ 					}
        /******/ 				}
        /******/ 				for (var i = 0; i < module.parents.length; i++) {
          /******/ 					var parentId = module.parents[i]
          /******/ 					var parent = installedModules[parentId]
          /******/ 					if (!parent) continue
          /******/ 					if (parent.hot._declinedDependencies[moduleId]) {
            /******/ 						return {
              /******/ 							type: 'declined',
              /******/ 							chain: chain.concat([parentId]),
              /******/ 							moduleId: moduleId,
              /******/ 							parentId: parentId
            /******/ 						}
          /******/ 					}
          /******/ 					if (outdatedModules.indexOf(parentId) >= 0) continue
          /******/ 					if (parent.hot._acceptedDependencies[moduleId]) {
            /******/ 						if (!outdatedDependencies[parentId])
  /******/ 							{ outdatedDependencies[parentId] = [] }
            /******/ 						addAllToSet(outdatedDependencies[parentId], [moduleId])
            /******/ 						continue
          /******/ 					}
          /******/ 					delete outdatedDependencies[parentId]
          /******/ 					outdatedModules.push(parentId)
          /******/ 					queue.push({
            /******/ 						chain: chain.concat([parentId]),
            /******/ 						id: parentId
          /******/ 					})
        /******/ 				}
      /******/ 			}
/******/
      /******/ 			return {
        /******/ 				type: 'accepted',
        /******/ 				moduleId: updateModuleId,
        /******/ 				outdatedModules: outdatedModules,
        /******/ 				outdatedDependencies: outdatedDependencies
      /******/ 			}
    /******/ 		}
/******/
    /******/ 		function addAllToSet (a, b) {
      /******/ 			for (var i = 0; i < b.length; i++) {
        /******/ 				var item = b[i]
        /******/ 				if (a.indexOf(item) < 0)
  /******/ 					{ a.push(item) }
      /******/ 			}
    /******/ 		}
/******/
/******/ 		// at begin all updates modules are outdated
/******/ 		// the "outdated" status can propagate to parents if they don't accept the children
    /******/ 		var outdatedDependencies = {}
    /******/ 		var outdatedModules = []
    /******/ 		var appliedUpdate = {}
/******/
    /******/ 		var warnUnexpectedRequire = function warnUnexpectedRequire () {
      /******/ 			console.warn('[HMR] unexpected require(' + result.moduleId + ') to disposed module')
    /******/ 		}
/******/
    /******/ 		for (var id in hotUpdate) {
      /******/ 			if (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {
        /******/ 				moduleId = toModuleId(id)
        /******/ 				var result
        /******/ 				if (hotUpdate[id]) {
          /******/ 					result = getAffectedStuff(moduleId)
        /******/ 				} else {
          /******/ 					result = {
            /******/ 						type: 'disposed',
            /******/ 						moduleId: id
          /******/ 					}
        /******/ 				}
        /******/ 				var abortError = false
        /******/ 				var doApply = false
        /******/ 				var doDispose = false
        /******/ 				var chainInfo = ''
        /******/ 				if (result.chain) {
          /******/ 					chainInfo = '\nUpdate propagation: ' + result.chain.join(' -> ')
        /******/ 				}
        /******/ 				switch (result.type) {
          /******/ 					case 'self-declined':
            /******/ 						if (options.onDeclined)
  /******/ 							{ options.onDeclined(result) }
            /******/ 						if (!options.ignoreDeclined)
  /******/ 							{ abortError = new Error('Aborted because of self decline: ' + result.moduleId + chainInfo) }
            /******/ 						break
          /******/ 					case 'declined':
            /******/ 						if (options.onDeclined)
  /******/ 							{ options.onDeclined(result) }
            /******/ 						if (!options.ignoreDeclined)
  /******/ 							{ abortError = new Error('Aborted because of declined dependency: ' + result.moduleId + ' in ' + result.parentId + chainInfo) }
            /******/ 						break
          /******/ 					case 'unaccepted':
            /******/ 						if (options.onUnaccepted)
  /******/ 							{ options.onUnaccepted(result) }
            /******/ 						if (!options.ignoreUnaccepted)
  /******/ 							{ abortError = new Error('Aborted because ' + moduleId + ' is not accepted' + chainInfo) }
            /******/ 						break
          /******/ 					case 'accepted':
            /******/ 						if (options.onAccepted)
  /******/ 							{ options.onAccepted(result) }
            /******/ 						doApply = true
            /******/ 						break
          /******/ 					case 'disposed':
            /******/ 						if (options.onDisposed)
  /******/ 							{ options.onDisposed(result) }
            /******/ 						doDispose = true
            /******/ 						break
          /******/ 					default:
            /******/ 						throw new Error('Unexception type ' + result.type)
        /******/ 				}
        /******/ 				if (abortError) {
          /******/ 					hotSetStatus('abort')
          /******/ 					return Promise.reject(abortError)
        /******/ 				}
        /******/ 				if (doApply) {
          /******/ 					appliedUpdate[moduleId] = hotUpdate[moduleId]
          /******/ 					addAllToSet(outdatedModules, result.outdatedModules)
          /******/ 					for (moduleId in result.outdatedDependencies) {
            /******/ 						if (Object.prototype.hasOwnProperty.call(result.outdatedDependencies, moduleId)) {
              /******/ 							if (!outdatedDependencies[moduleId])
  /******/ 								{ outdatedDependencies[moduleId] = [] }
              /******/ 							addAllToSet(outdatedDependencies[moduleId], result.outdatedDependencies[moduleId])
            /******/ 						}
          /******/ 					}
        /******/ 				}
        /******/ 				if (doDispose) {
          /******/ 					addAllToSet(outdatedModules, [result.moduleId])
          /******/ 					appliedUpdate[moduleId] = warnUnexpectedRequire
        /******/ 				}
      /******/ 			}
    /******/ 		}
/******/
/******/ 		// Store self accepted outdated modules to require them later by the module system
    /******/ 		var outdatedSelfAcceptedModules = []
    /******/ 		for (i = 0; i < outdatedModules.length; i++) {
      /******/ 			moduleId = outdatedModules[i]
      /******/ 			if (installedModules[moduleId] && installedModules[moduleId].hot._selfAccepted)
  /******/ 				{
        outdatedSelfAcceptedModules.push({
          /******/ 					module: moduleId,
          /******/ 					errorHandler: installedModules[moduleId].hot._selfAccepted
        /******/ 				})
      }
    /******/ 		}
/******/
/******/ 		// Now in "dispose" phase
    /******/ 		hotSetStatus('dispose')
    /******/ 		Object.keys(hotAvailableFilesMap).forEach(function (chunkId) {
      /******/ 			if (hotAvailableFilesMap[chunkId] === false) {
        /******/ 				hotDisposeChunk(chunkId)
      /******/ 			}
    /******/ 		})
/******/
    /******/ 		var idx
    /******/ 		var queue = outdatedModules.slice()
    /******/ 		while (queue.length > 0) {
      /******/ 			moduleId = queue.pop()
      /******/ 			module = installedModules[moduleId]
      /******/ 			if (!module) continue
/******/
      /******/ 			var data = {}
/******/
/******/ 			// Call dispose handlers
      /******/ 			var disposeHandlers = module.hot._disposeHandlers
      /******/ 			for (j = 0; j < disposeHandlers.length; j++) {
        /******/ 				cb = disposeHandlers[j]
        /******/ 				cb(data)
      /******/ 			}
      /******/ 			hotCurrentModuleData[moduleId] = data
/******/
/******/ 			// disable module (this disables requires from this module)
      /******/ 			module.hot.active = false
/******/
/******/ 			// remove module from cache
      /******/ 			delete installedModules[moduleId]
/******/
/******/ 			// remove "parents" references from all children
      /******/ 			for (j = 0; j < module.children.length; j++) {
        /******/ 				var child = installedModules[module.children[j]]
        /******/ 				if (!child) continue
        /******/ 				idx = child.parents.indexOf(moduleId)
        /******/ 				if (idx >= 0) {
          /******/ 					child.parents.splice(idx, 1)
        /******/ 				}
      /******/ 			}
    /******/ 		}
/******/
/******/ 		// remove outdated dependency from module children
    /******/ 		var dependency
    /******/ 		var moduleOutdatedDependencies
    /******/ 		for (moduleId in outdatedDependencies) {
      /******/ 			if (Object.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)) {
        /******/ 				module = installedModules[moduleId]
        /******/ 				if (module) {
          /******/ 					moduleOutdatedDependencies = outdatedDependencies[moduleId]
          /******/ 					for (j = 0; j < moduleOutdatedDependencies.length; j++) {
            /******/ 						dependency = moduleOutdatedDependencies[j]
            /******/ 						idx = module.children.indexOf(dependency)
            /******/ 						if (idx >= 0) module.children.splice(idx, 1)
          /******/ 					}
        /******/ 				}
      /******/ 			}
    /******/ 		}
/******/
/******/ 		// Not in "apply" phase
    /******/ 		hotSetStatus('apply')
/******/
    /******/ 		hotCurrentHash = hotUpdateNewHash
/******/
/******/ 		// insert new code
    /******/ 		for (moduleId in appliedUpdate) {
      /******/ 			if (Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {
        /******/ 				modules[moduleId] = appliedUpdate[moduleId]
      /******/ 			}
    /******/ 		}
/******/
/******/ 		// call accept handlers
    /******/ 		var error = null
    /******/ 		for (moduleId in outdatedDependencies) {
      /******/ 			if (Object.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)) {
        /******/ 				module = installedModules[moduleId]
        /******/ 				moduleOutdatedDependencies = outdatedDependencies[moduleId]
        /******/ 				var callbacks = []
        /******/ 				for (i = 0; i < moduleOutdatedDependencies.length; i++) {
          /******/ 					dependency = moduleOutdatedDependencies[i]
          /******/ 					cb = module.hot._acceptedDependencies[dependency]
          /******/ 					if (callbacks.indexOf(cb) >= 0) continue
          /******/ 					callbacks.push(cb)
        /******/ 				}
        /******/ 				for (i = 0; i < callbacks.length; i++) {
          /******/ 					cb = callbacks[i]
          /******/ 					try {
            /******/ 						cb(moduleOutdatedDependencies)
          /******/ 					} catch (err) {
            /******/ 						if (options.onErrored) {
              /******/ 							options.onErrored({
                /******/ 								type: 'accept-errored',
                /******/ 								moduleId: moduleId,
                /******/ 								dependencyId: moduleOutdatedDependencies[i],
                /******/ 								error: err
              /******/ 							})
            /******/ 						}
            /******/ 						if (!options.ignoreErrored) {
              /******/ 							if (!error)
  /******/ 								{ error = err }
            /******/ 						}
          /******/ 					}
        /******/ 				}
      /******/ 			}
    /******/ 		}
/******/
/******/ 		// Load self accepted modules
    /******/ 		for (i = 0; i < outdatedSelfAcceptedModules.length; i++) {
      /******/ 			var item = outdatedSelfAcceptedModules[i]
      /******/ 			moduleId = item.module
      /******/ 			hotCurrentParents = [moduleId]
      /******/ 			try {
        /******/ 				__webpack_require__(moduleId)
      /******/ 			} catch (err) {
        /******/ 				if (typeof item.errorHandler === 'function') {
          /******/ 					try {
            /******/ 						item.errorHandler(err)
          /******/ 					} catch (err2) {
            /******/ 						if (options.onErrored) {
              /******/ 							options.onErrored({
                /******/ 								type: 'self-accept-error-handler-errored',
                /******/ 								moduleId: moduleId,
                /******/ 								error: err2,
                /******/ 								orginalError: err
              /******/ 							})
            /******/ 						}
            /******/ 						if (!options.ignoreErrored) {
              /******/ 							if (!error)
  /******/ 								{ error = err2 }
            /******/ 						}
            /******/ 						if (!error)
  /******/ 							{ error = err }
          /******/ 					}
        /******/ 				} else {
          /******/ 					if (options.onErrored) {
            /******/ 						options.onErrored({
              /******/ 							type: 'self-accept-errored',
              /******/ 							moduleId: moduleId,
              /******/ 							error: err
            /******/ 						})
          /******/ 					}
          /******/ 					if (!options.ignoreErrored) {
            /******/ 						if (!error)
  /******/ 							{ error = err }
          /******/ 					}
        /******/ 				}
      /******/ 			}
    /******/ 		}
/******/
/******/ 		// handle errors in accept handlers and self accepted module load
    /******/ 		if (error) {
      /******/ 			hotSetStatus('fail')
      /******/ 			return Promise.reject(error)
    /******/ 		}
/******/
    /******/ 		hotSetStatus('idle')
    /******/ 		return new Promise(function (resolve) {
      /******/ 			resolve(outdatedModules)
    /******/ 		})
  /******/ 	}
/******/
/******/ 	// The module cache
  /******/ 	var installedModules = {}
/******/
/******/ 	// The require function
  /******/ 	function __webpack_require__ (moduleId) {
/******/
/******/ 		// Check if module is in cache
    /******/ 		if (installedModules[moduleId]) {
      /******/ 			return installedModules[moduleId].exports
    /******/ 		}
/******/ 		// Create a new module (and put it into the cache)
    /******/ 		var module = installedModules[moduleId] = {
      /******/ 			i: moduleId,
      /******/ 			l: false,
      /******/ 			exports: {},
      /******/ 			hot: hotCreateModule(moduleId),
      /******/ 			parents: (hotCurrentParentsTemp = hotCurrentParents, hotCurrentParents = [], hotCurrentParentsTemp),
      /******/ 			children: []
    /******/ 		}
/******/
/******/ 		// Execute the module function
    /******/ 		modules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId))
/******/
/******/ 		// Flag the module as loaded
    /******/ 		module.l = true
/******/
/******/ 		// Return the exports of the module
    /******/ 		return module.exports
  /******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
  /******/ 	__webpack_require__.m = modules
/******/
/******/ 	// expose the module cache
  /******/ 	__webpack_require__.c = installedModules
/******/
/******/ 	// identity function for calling harmony imports with the correct context
  /******/ 	__webpack_require__.i = function (value) { return value }
/******/
/******/ 	// define getter function for harmony exports
  /******/ 	__webpack_require__.d = function (exports, name, getter) {
    /******/ 		if (!__webpack_require__.o(exports, name)) {
      /******/ 			Object.defineProperty(exports, name, {
        /******/ 				configurable: false,
        /******/ 				enumerable: true,
        /******/ 				get: getter
      /******/ 			})
    /******/ 		}
  /******/ 	}
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
  /******/ 	__webpack_require__.n = function (module) {
    /******/ 		var getter = module && module.__esModule
/******/ 			? function getDefault () { return module['default'] }
/******/ 			: function getModuleExports () { return module }
    /******/ 		__webpack_require__.d(getter, 'a', getter)
    /******/ 		return getter
  /******/ 	}
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
  /******/ 	__webpack_require__.o = function (object, property) { return Object.prototype.hasOwnProperty.call(object, property) }
/******/
/******/ 	// __webpack_public_path__
  /******/ 	__webpack_require__.p = '/'
/******/
/******/ 	// __webpack_hash__
  /******/ 	__webpack_require__.h = function () { return hotCurrentHash }
/******/
/******/ 	// Load entry module and return exports
  /******/ 	return hotCreateRequire(8)(__webpack_require__.s = 8)
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
  /***/ function (module, exports, __webpack_require__) {
    eval("const Sequencer = __webpack_require__(2)\n\nlet newSequencer = new Sequencer()\n\nnewSequencer._synth._sequencer = newSequencer\n\ndocument.querySelector('body').insertBefore(newSequencer._synth, document.querySelector('body').children[0])\ndocument.querySelector('body').insertBefore(newSequencer, document.querySelector('body').children[0])\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc3JjL2pzL2FwcC5qcz9iODNmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBOztBQUVBOztBQUVBO0FBQ0EiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNlcXVlbmNlciA9IHJlcXVpcmUoJy4vc2VxdWVuY2VyJylcblxubGV0IG5ld1NlcXVlbmNlciA9IG5ldyBTZXF1ZW5jZXIoKVxuXG5uZXdTZXF1ZW5jZXIuX3N5bnRoLl9zZXF1ZW5jZXIgPSBuZXdTZXF1ZW5jZXJcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmluc2VydEJlZm9yZShuZXdTZXF1ZW5jZXIuX3N5bnRoLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuY2hpbGRyZW5bMF0pXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuaW5zZXJ0QmVmb3JlKG5ld1NlcXVlbmNlciwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNoaWxkcmVuWzBdKVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9hcHAvc3JjL2pzL2FwcC5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n")
  /***/ },
/* 1 */
  /***/ function (module, exports, __webpack_require__) {
    eval("/* WEBPACK VAR INJECTION */(function(global) {var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (root) {\n  'use strict'\n\n  var Pizzicato = {}\n  var Pz = Pizzicato\n  var commonJS = typeof module === 'object' && module.exports\n  var amd = \"function\" === 'function' && __webpack_require__(6)\n\n  if (commonJS) { module.exports = Pizzicato } else if (amd) { !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (Pizzicato),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)) } else\t\t{ root.Pizzicato = root.Pz = Pizzicato }\n\n  var AudioContext = root.AudioContext || root.webkitAudioContext\n\n  if (!AudioContext) {\n    console.error('No AudioContext found in this environment. Please ensure your window or global object contains a working AudioContext constructor function.')\n    return\n  }\n\n  Pizzicato.context = new AudioContext()\n\n  var masterGainNode = Pizzicato.context.createGain()\n  masterGainNode.connect(Pizzicato.context.destination)\n\n  Pizzicato.Util = {\n\n    isString: function (arg) {\n      return toString.call(arg) === '[object String]'\n    },\n\n    isObject: function (arg) {\n      return toString.call(arg) === '[object Object]'\n    },\n\n    isFunction: function (arg) {\n      return toString.call(arg) === '[object Function]'\n    },\n\n    isNumber: function (arg) {\n      return toString.call(arg) === '[object Number]' && arg === +arg\n    },\n\n    isArray: function (arg) {\n      return toString.call(arg) === '[object Array]'\n    },\n\n    isInRange: function (arg, min, max) {\n      if (!Pz.Util.isNumber(arg) || !Pz.Util.isNumber(min) || !Pz.Util.isNumber(max)) { return false }\n\n      return arg >= min && arg <= max\n    },\n\n    isBool: function (arg) {\n      return typeof (arg) === 'boolean'\n    },\n\n    isOscillator: function (audioNode) {\n      return (audioNode && audioNode.toString() === '[object OscillatorNode]')\n    },\n\n    isAudioBufferSourceNode: function (audioNode) {\n      return (audioNode && audioNode.toString() === '[object AudioBufferSourceNode]')\n    },\n\n    isSound: function (sound) {\n      return sound instanceof Pz.Sound\n    },\n\n    isEffect: function (effect) {\n      for (var key in Pizzicato.Effects) {\n        if (effect instanceof Pizzicato.Effects[key]) { return true }\n      }\n\n      return false\n    },\n\n\t\t// Takes a number from 0 to 1 and normalizes it to fit within range floor to ceiling\n    normalize: function (num, floor, ceil) {\n      if (!Pz.Util.isNumber(num) || !Pz.Util.isNumber(floor) || !Pz.Util.isNumber(ceil)) { return }\n\n      return ((ceil - floor) * num) / 1 + floor\n    },\n\n    getDryLevel: function (mix) {\n      if (!Pz.Util.isNumber(mix) || mix > 1 || mix < 0) { return 0 }\n\n      if (mix <= 0.5) { return 1 }\n\n      return 1 - ((mix - 0.5) * 2)\n    },\n\n    getWetLevel: function (mix) {\n      if (!Pz.Util.isNumber(mix) || mix > 1 || mix < 0) { return 0 }\n\n      if (mix >= 0.5) { return 1 }\n\n      return 1 - ((0.5 - mix) * 2)\n    }\n  }\n\t/* In order to allow an AudioNode to connect to a Pizzicato\n\tEffect object, we must shim its connect method */\n  var gainNode = Pizzicato.context.createGain()\n  var audioNode = Object.getPrototypeOf(Object.getPrototypeOf(gainNode))\n  var connect = audioNode.connect\n\n  audioNode.connect = function (node) {\n    var endpoint = Pz.Util.isEffect(node) ? node.inputNode : node\n    connect.call(this, endpoint)\n    return node\n  }\n\n  Object.defineProperty(Pizzicato, 'volume', {\n    enumerable: true,\n\n    get: function () {\n      return masterGainNode.gain.value\n    },\n\n    set: function (volume) {\n      if (Pz.Util.isInRange(volume, 0, 1) && masterGainNode) { masterGainNode.gain.value = volume }\n    }\n  })\n\n  Object.defineProperty(Pizzicato, 'masterGainNode', {\n    enumerable: false,\n\n    get: function () {\n      return masterGainNode\n    },\n\n    set: function (volume) {\n      console.error('Can\\'t set the master gain node')\n    }\n  })\n  Pizzicato.Events = {\n\n\t\t\t/**\n\t\t\t * Adds an event handler that will be treated upon\n\t\t\t * the triggering of that event.\n\t\t\t */\n    on: function (name, callback, context) {\n      if (!name || !callback) { return }\n\n      this._events = this._events || {}\n      var _event = this._events[name] || (this._events[name] = [])\n\n      _event.push({\n        callback: callback,\n        context: context || this,\n        handler: this\n      })\n    },\n\n\t\t\t/**\n\t\t\t * Triggers a particular event. If a handler\n\t\t\t * is linked to that event, the handler will be\n\t\t\t * executed.\n\t\t\t */\n    trigger: function (name) {\n      if (!name) { return }\n\n      var _event, length, args, i\n\n      this._events = this._events || {}\n      _event = this._events[name] || (this._events[name] = [])\n\n      if (!_event) { return }\n\n      length = Math.max(0, arguments.length - 1)\n      args = []\n\n      for (i = 0; i < length; i++) { args[i] = arguments[i + 1] }\n\n      for (i = 0; i < _event.length; i++) { _event[i].callback.apply(_event[i].context, args) }\n    },\n\n\t\t\t/**\n\t\t\t * Removes an event handler. If no name is provided,\n\t\t\t * all handlers for this object will be removed.\n\t\t\t */\n    off: function (name) {\n      if (name) { this._events[name] = undefined } else\t\t\t\t\t{ this._events = {} }\n    }\n\n  }\n  Pizzicato.Sound = function (description, callback) {\n    var self = this\n    var util = Pizzicato.Util\n    var descriptionError = getDescriptionError(description)\n    var hasOptions = util.isObject(description) && util.isObject(description.options)\n    var defaultAttack = 0.04\n    var defaultRelease = 0.04\n\n    if (descriptionError) {\n      console.error(descriptionError)\n      throw new Error('Error initializing Pizzicato Sound: ' + descriptionError)\n    }\n\n    this.detached = hasOptions && description.options.detached\n    this.masterVolume = Pizzicato.context.createGain()\n    this.fadeNode = Pizzicato.context.createGain()\n    this.fadeNode.gain.value = 0\n\n    if (!this.detached) { this.masterVolume.connect(Pizzicato.masterGainNode) }\n\n    this.lastTimePlayed = 0\n    this.effects = []\n    this.effectConnectors = []\n    this.playing = this.paused = false\n    this.loop = hasOptions && description.options.loop\n    this.attack = hasOptions && util.isNumber(description.options.attack) ? description.options.attack : defaultAttack\n    this.volume = hasOptions && util.isNumber(description.options.volume) ? description.options.volume : 1\n\n    if (hasOptions && util.isNumber(description.options.release)) {\n      this.release = description.options.release\n    } else if (hasOptions && util.isNumber(description.options.sustain)) {\n      console.warn('\\'sustain\\' is deprecated. Use \\'release\\' instead.')\n      this.release = description.options.sustain\n    } else {\n      this.release = defaultRelease\n    }\n\n    if (!description) { (initializeWithWave.bind(this))({}, callback) } else if (util.isString(description)) { (initializeWithUrl.bind(this))(description, callback) } else if (util.isFunction(description)) { (initializeWithFunction.bind(this))(description, callback) } else if (description.source === 'file') { (initializeWithUrl.bind(this))(description.options.path, callback) } else if (description.source === 'wave') { (initializeWithWave.bind(this))(description.options, callback) } else if (description.source === 'input') { (initializeWithInput.bind(this))(description, callback) } else if (description.source === 'script') { (initializeWithFunction.bind(this))(description.options, callback) } else if (description.source === 'sound') { (initializeWithSoundObject.bind(this))(description.options, callback) }\n\n    function getDescriptionError (description) {\n      var supportedSources = ['wave', 'file', 'input', 'script', 'sound']\n\n      if (description && (!util.isFunction(description) && !util.isString(description) && !util.isObject(description))) { return 'Description type not supported. Initialize a sound using an object, a function or a string.' }\n\n      if (util.isObject(description)) {\n        if (!util.isString(description.source) || supportedSources.indexOf(description.source) === -1) { return 'Specified source not supported. Sources can be wave, file, input or script' }\n\n        if (description.source === 'file' && (!description.options || !description.options.path)) { return 'A path is needed for sounds with a file source' }\n\n        if (description.source === 'script' && (!description.options || !description.options.audioFunction)) { return 'An audio function is needed for sounds with a script source' }\n      }\n    }\n\n    function initializeWithWave (waveOptions, callback) {\n      waveOptions = waveOptions || {}\n      this.getRawSourceNode = function () {\n        var frequency = this.sourceNode ? this.sourceNode.frequency.value : waveOptions.frequency\n        var node = Pizzicato.context.createOscillator()\n        node.type = waveOptions.type || 'sine'\n        node.frequency.value = (frequency || 440)\n\n        return node\n      }\n      this.sourceNode = this.getRawSourceNode()\n      this.sourceNode.gainSuccessor = Pz.context.createGain()\n      this.sourceNode.connect(this.sourceNode.gainSuccessor)\n\n      if (util.isFunction(callback)) { callback() }\n    }\n\n    function initializeWithUrl (paths, callback) {\n      paths = util.isArray(paths) ? paths : [paths]\n\n      var request = new XMLHttpRequest()\n      request.open('GET', paths[0], true)\n      request.responseType = 'arraybuffer'\n\n      request.onload = function (progressEvent) {\n        Pizzicato.context.decodeAudioData(progressEvent.target.response, function (buffer) {\n          self.getRawSourceNode = function () {\n            var node = Pizzicato.context.createBufferSource()\n            node.loop = this.loop\n            node.buffer = buffer\n            return node\n          }\n          if (util.isFunction(callback)) { callback() }\n        }, function (error) {\n          console.error('Error decoding audio file ' + paths[0])\n\n          if (paths.length > 1) {\n            paths.shift()\n            initializeWithUrl(paths, callback)\n            return\n          }\n\n          error = error || new Error('Error decoding audio file ' + paths[0])\n\n          if (util.isFunction(callback)) { callback(error) }\n        })\n      }\n      request.onreadystatechange = function (event) {\n        if (request.readyState === 4 && request.status !== 200) {\n          console.error('Error while fetching ' + paths[0] + '. ' + request.statusText)\n        }\n      }\n      request.send()\n    }\n\n    function initializeWithInput (options, callback) {\n      navigator.getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia)\n\n      if (!navigator.getUserMedia) {\n        console.error('Your browser does not support getUserMedia')\n        return\n      }\n\n      navigator.getUserMedia({\n        audio: true\n      }, function (stream) {\n        self.getRawSourceNode = function () {\n          return Pizzicato.context.createMediaStreamSource(stream)\n        }\n        if (util.isFunction(callback)) { callback() }\n      }, function (error) {\n        if (util.isFunction(callback)) { callback(error) }\n      })\n    }\n\n    function initializeWithFunction (options, callback) {\n      var audioFunction = util.isFunction(options) ? options : options.audioFunction\n      var bufferSize = util.isObject(options) && options.bufferSize ? options.bufferSize : null\n\n      if (!bufferSize) {\n        try { // Webkit does not automatically chose the buffer size\n          var test = Pizzicato.context.createScriptProcessor()\n        } catch (e) {\n          bufferSize = 2048\n        }\n      }\n\n      this.getRawSourceNode = function () {\n        var node = Pizzicato.context.createScriptProcessor(bufferSize, 1, 1)\n        node.onaudioprocess = audioFunction\n        return node\n      }\n    }\n\n    function initializeWithSoundObject (options, callback) {\n      this.getRawSourceNode = options.sound.getRawSourceNode\n\n      if (options.sound.sourceNode && Pz.Util.isOscillator(options.sound.sourceNode)) {\n        this.sourceNode = this.getRawSourceNode()\n        this.frequency = options.sound.frequency\n      }\n    }\n  }\n\n  Pizzicato.Sound.prototype = Object.create(Pizzicato.Events, {\n\n    play: {\n      enumerable: true,\n\n      value: function (when, offset) {\n        if (this.playing) { return }\n\n        if (!Pz.Util.isNumber(offset)) { offset = this.offsetTime || 0 }\n\n        if (!Pz.Util.isNumber(when)) { when = 0 }\n\n        this.playing = true\n        this.paused = false\n        this.sourceNode = this.getSourceNode()\n\n        this.applyAttack()\n\n        if (Pz.Util.isFunction(this.sourceNode.start)) {\n          this.lastTimePlayed = Pizzicato.context.currentTime - offset\n          this.sourceNode.start(Pz.context.currentTime + when, offset)\n        }\n\n        this.trigger('play')\n      }\n    },\n\n    stop: {\n      enumerable: true,\n\n      value: function () {\n        if (!this.paused && !this.playing) { return }\n\n        this.paused = this.playing = false\n        this.stopWithRelease()\n\n        this.offsetTime = 0\n        this.trigger('stop')\n      }\n    },\n\n    pause: {\n      enumerable: true,\n\n      value: function () {\n        if (this.paused || !this.playing) { return }\n\n        this.paused = true\n        this.playing = false\n\n        this.stopWithRelease()\n\n        var elapsedTime = Pz.context.currentTime - this.lastTimePlayed\n\n\t\t\t\t// If we are using a buffer node - potentially in loop mode - we need to\n\t\t\t\t// know where to re-start the sound independently of the loop it is in.\n        if (this.sourceNode.buffer) { this.offsetTime = elapsedTime % (this.sourceNode.buffer.length / Pz.context.sampleRate) } else\t\t\t\t\t{ this.offsetTime = elapsedTime }\n\n        this.trigger('pause')\n      }\n    },\n\n    clone: {\n      enumerable: true,\n\n      value: function () {\n        var clone = new Pizzicato.Sound({\n          source: 'sound',\n          options: {\n            loop: this.loop,\n            attack: this.attack,\n            release: this.release,\n            volume: this.volume,\n            sound: this\n          }\n        })\n\n        for (var i = 0; i < this.effects.length; i++) { clone.addEffect(this.effects[i]) }\n\n        return clone\n      }\n    },\n\n    onEnded: {\n      enumerable: true,\n\n      value: function (node) {\n        return function () {\n\t\t\t\t\t// This function may've been called from the release\n\t\t\t\t\t// end. If in that time the Sound has been played again,\n\t\t\t\t\t// no action should be taken.\n          if (!!this.sourceNode && this.sourceNode !== node) { return }\n\n          if (this.playing) { this.stop() }\n          if (!this.paused) { this.trigger('end') }\n        }\n      }\n    },\n\n\t\t/**\n\t\t * Adding effects will create a graph in which there will be a\n\t\t * gain node (effectConnector) in between every effect added. For example:\n\t\t * [fadeNode]--->[effect 1]->[connector 1]--->[effect 2]->[connector 2]--->[masterGain]\n\t\t *\n\t\t * Connectors are used to know what nodes to disconnect and not disrupt the\n\t\t * connections of another Pz.Sound object using the same effect.\n\t\t */\n    addEffect: {\n      enumerable: true,\n\n      value: function (effect) {\n        if (!Pz.Util.isEffect(effect)) {\n          console.error('The object provided is not a Pizzicato effect.')\n          return this\n        }\n\n        this.effects.push(effect)\n\n\t\t\t\t// Connects effect in the last position\n        var previousNode = this.effectConnectors.length > 0 ? this.effectConnectors[this.effectConnectors.length - 1] : this.fadeNode\n        previousNode.disconnect()\n        previousNode.connect(effect)\n\n\t\t\t\t// Creates connector for the newly added effect\n        var gain = Pz.context.createGain()\n        this.effectConnectors.push(gain)\n        effect.connect(gain)\n        gain.connect(this.masterVolume)\n\n        return this\n      }\n    },\n\n\t\t/**\n\t\t * When removing effects, the graph in which there will be a\n\t\t * gain node (effectConnector) in between every effect should be\n\t\t * conserved. For example:\n\t\t * [fadeNode]--->[effect 1]->[connector 1]--->[effect 2]->[connector 2]--->[masterGain]\n\t\t *\n\t\t * Connectors are used to know what nodes to disconnect and not disrupt the\n\t\t * connections of another Pz.Sound object using the same effect.\n\t\t */\n    removeEffect: {\n      enumerable: true,\n\n      value: function (effect) {\n        var index = this.effects.indexOf(effect)\n\n        if (index === -1) {\n          console.warn('Cannot remove effect that is not applied to this sound.')\n          return this\n        }\n\n        var shouldResumePlaying = this.playing\n\n        if (shouldResumePlaying) { this.pause() }\n\n        var previousNode = (index === 0) ? this.fadeNode : this.effectConnectors[index - 1]\n        previousNode.disconnect()\n\n\t\t\t\t// Disconnect connector and effect\n        var effectConnector = this.effectConnectors[index]\n        effectConnector.disconnect()\n        effect.disconnect(effectConnector)\n\n\t\t\t\t// Remove connector and effect from our arrays\n        this.effectConnectors.splice(index, 1)\n        this.effects.splice(index, 1)\n\n        var targetNode\n        if (index > this.effects.length - 1 || this.effects.length === 0) { targetNode = this.masterVolume } else\t\t\t\t\t{ targetNode = this.effects[index] }\n\n        previousNode.connect(targetNode)\n\n        if (shouldResumePlaying) { this.play() }\n\n        return this\n      }\n    },\n\n    connect: {\n      enumerable: true,\n\n      value: function (audioNode) {\n        this.masterVolume.connect(audioNode)\n        return this\n      }\n    },\n\n    disconnect: {\n      enumerable: true,\n\n      value: function (audioNode) {\n        this.masterVolume.disconnect(audioNode)\n        return this\n      }\n    },\n\n    connectEffects: {\n      enumerable: true,\n\n      value: function () {\n        var connectors = []\n\n        for (var i = 0; i < this.effects.length; i++) {\n          var isLastEffect = i === this.effects.length - 1\n          var destinationNode = isLastEffect ? this.masterVolume : this.effects[i + 1].inputNode\n\n          connectors[i] = Pz.context.createGain()\n\n          this.effects[i].outputNode.disconnect(this.effectConnectors[i])\n\n          this.effects[i].outputNode.connect(destinationNode)\n        }\n      }\n    },\n\n    volume: {\n      enumerable: true,\n\n      get: function () {\n        if (this.masterVolume) { return this.masterVolume.gain.value }\n      },\n\n      set: function (volume) {\n        if (Pz.Util.isInRange(volume, 0, 1) && this.masterVolume) { this.masterVolume.gain.value = volume }\n      }\n    },\n\n    frequency: {\n      enumerable: true,\n\n      get: function () {\n        if (this.sourceNode && Pz.Util.isOscillator(this.sourceNode)) {\n          return this.sourceNode.frequency.value\n        }\n\n        return null\n      },\n\n      set: function (frequency) {\n        if (this.sourceNode && Pz.Util.isOscillator(this.sourceNode)) {\n          this.sourceNode.frequency.value = frequency\n        }\n      }\n    },\n\n\t\t/**\n\t \t * @deprecated - Use \"release\"\n\t\t */\n    sustain: {\n      enumerable: true,\n\n      get: function () {\n        console.warn('\\'sustain\\' is deprecated. Use \\'release\\' instead.')\n        return this.release\n      },\n\n      set: function (sustain) {\n        console.warn('\\'sustain\\' is deprecated. Use \\'release\\' instead.')\n\n        if (Pz.Util.isInRange(sustain, 0, 10)) { this.release = sustain }\n      }\n    },\n\n\t\t/**\n\t\t * Returns the node that produces the sound. For example, an oscillator\n\t\t * if the Sound object was initialized with a wave option.\n\t\t */\n    getSourceNode: {\n      enumerable: true,\n\n      value: function () {\n        if (this.sourceNode) {\n\t\t\t\t\t// Directly disconnecting the previous source node causes a\n\t\t\t\t\t// 'click' noise, especially noticeable if the sound is played\n\t\t\t\t\t// while the release is ongoing. To address this, we fadeout the\n\t\t\t\t\t// old source node before disonnecting it.\n\n          var previousSourceNode = this.sourceNode\n          previousSourceNode.gainSuccessor.gain.setValueAtTime(previousSourceNode.gainSuccessor.gain.value, Pz.context.currentTime)\n          previousSourceNode.gainSuccessor.gain.linearRampToValueAtTime(0.0001, Pz.context.currentTime + 0.2)\n          setTimeout(function () {\n            previousSourceNode.disconnect()\n            previousSourceNode.gainSuccessor.disconnect()\n          }, 200)\n        }\n\n        var sourceNode = this.getRawSourceNode()\n\n\t\t\t\t// A gain node will be placed after the source node to avoid\n\t\t\t\t// clicking noises (by fading out the sound)\n        sourceNode.gainSuccessor = Pz.context.createGain()\n        sourceNode.connect(sourceNode.gainSuccessor)\n        sourceNode.gainSuccessor.connect(this.fadeNode)\n        this.fadeNode.connect(this.getInputNode())\n\n        if (Pz.Util.isAudioBufferSourceNode(sourceNode)) { sourceNode.onended = this.onEnded(sourceNode).bind(this) }\n\n        return sourceNode\n      }\n    },\n\n\t\t/**\n\t\t * Returns the first node in the graph. When there are effects,\n\t\t * the first node is the input node of the first effect.\n\t\t */\n    getInputNode: {\n      enumerable: true,\n\n      value: function () {\n        if (this.effects.length > 0) { return this.effects[0].inputNode }\n\n        return this.masterVolume\n      }\n    },\n\n\t\t/**\n\t\t * Will take the current source node and work up the volume\n\t\t * gradually in as much time as specified in the attack property\n\t\t * of the sound.\n\t\t */\n    applyAttack: {\n      enumerable: false,\n\n      value: function () {\n        var currentValue = this.fadeNode.gain.value\n        this.fadeNode.gain.cancelScheduledValues(Pz.context.currentTime)\n        this.fadeNode.gain.setValueAtTime(currentValue, Pz.context.currentTime)\n\n        if (!this.attack) {\n          this.fadeNode.gain.setValueAtTime(1.0, Pizzicato.context.currentTime)\n          return\n        }\n\n        var remainingAttackTime = (1 - this.fadeNode.gain.value) * this.attack\n        this.fadeNode.gain.setValueAtTime(this.fadeNode.gain.value, Pizzicato.context.currentTime)\n        this.fadeNode.gain.linearRampToValueAtTime(1, Pizzicato.context.currentTime + remainingAttackTime)\n      }\n    },\n\n\t\t/**\n\t\t * Will take the current source node and work down the volume\n\t\t * gradually in as much time as specified in the release property\n\t\t * of the sound before stopping the source node.\n\t\t */\n    stopWithRelease: {\n      enumerable: false,\n\n      value: function (callback) {\n        var node = this.sourceNode\n        var stopSound = function () {\n          return Pz.Util.isFunction(node.stop) ? node.stop(0) : node.disconnect()\n        }\n\n        var currentValue = this.fadeNode.gain.value\n        this.fadeNode.gain.cancelScheduledValues(Pz.context.currentTime)\n        this.fadeNode.gain.setValueAtTime(currentValue, Pz.context.currentTime)\n\n        if (!this.release) {\n          stopSound()\n          return\n        }\n\n        var remainingReleaseTime = this.fadeNode.gain.value * this.release\n        this.fadeNode.gain.setValueAtTime(this.fadeNode.gain.value, Pizzicato.context.currentTime)\n        this.fadeNode.gain.linearRampToValueAtTime(0.00001, Pizzicato.context.currentTime + remainingReleaseTime)\n\n        window.setTimeout(function () {\n          stopSound()\n        }, remainingReleaseTime * 1000)\n      }\n    }\n  })\n\n  Pizzicato.Group = function (sounds) {\n    sounds = sounds || []\n\n    this.mergeGainNode = Pz.context.createGain()\n    this.masterVolume = Pz.context.createGain()\n    this.sounds = []\n    this.effects = []\n    this.effectConnectors = []\n\n    this.mergeGainNode.connect(this.masterVolume)\n    this.masterVolume.connect(Pz.masterGainNode)\n\n    for (var i = 0; i < sounds.length; i++) { this.addSound(sounds[i]) }\n  }\n\n  Pizzicato.Group.prototype = Object.create(Pz.Events, {\n\n    connect: {\n      enumerable: true,\n\n      value: function (audioNode) {\n        this.masterVolume.connect(audioNode)\n        return this\n      }\n    },\n\n    disconnect: {\n      enumerable: true,\n\n      value: function (audioNode) {\n        this.masterVolume.disconnect(audioNode)\n        return this\n      }\n    },\n\n    addSound: {\n      enumerable: true,\n\n      value: function (sound) {\n        if (!Pz.Util.isSound(sound)) {\n          console.error('You can only add Pizzicato.Sound objects')\n          return\n        }\n        if (this.sounds.indexOf(sound) > -1) {\n          console.warn('The Pizzicato.Sound object was already added to this group')\n          return\n        }\n        if (sound.detached) {\n          console.warn('Groups do not support detached sounds. You can manually create an audio graph to group detached sounds together.')\n        }\n\n        sound.disconnect(Pz.masterGainNode)\n        sound.connect(this.mergeGainNode)\n        this.sounds.push(sound)\n      }\n    },\n\n    removeSound: {\n      enumerable: true,\n\n      value: function (sound) {\n        var index = this.sounds.indexOf(sound)\n\n        if (index === -1) {\n          console.warn('Cannot remove a sound that is not part of this group.')\n          return\n        }\n\n        sound.disconnect(this.mergeGainNode)\n        sound.connect(Pz.masterGainNode)\n        this.sounds.splice(index, 1)\n      }\n    },\n\n    volume: {\n      enumerable: true,\n\n      get: function () {\n        if (this.masterVolume) { return this.masterVolume.gain.value }\n      },\n\n      set: function (volume) {\n        if (Pz.Util.isInRange(volume, 0, 1)) { this.masterVolume.gain.value = volume }\n      }\n    },\n\n    play: {\n      enumerable: true,\n\n      value: function () {\n        for (var i = 0; i < this.sounds.length; i++) { this.sounds[i].play() }\n\n        this.trigger('play')\n      }\n\n    },\n\n    stop: {\n      enumerable: true,\n\n      value: function () {\n        for (var i = 0; i < this.sounds.length; i++) { this.sounds[i].stop() }\n\n        this.trigger('stop')\n      }\n\n    },\n\n    pause: {\n      enumerable: true,\n\n      value: function () {\n        for (var i = 0; i < this.sounds.length; i++) { this.sounds[i].pause() }\n\n        this.trigger('pause')\n      }\n\n    },\n\n\t\t/**\n\t\t * Similarly to Sound objects, adding effects will create a graph in which there will be a\n\t\t * gain node (effectConnector) in between every effect added. For example:\n\t\t * [fadeNode]--->[effect 1]->[connector 1]--->[effect 2]->[connector 2]--->[masterGain]\n\t\t *\n\t\t * Connectors are used to know what nodes to disconnect and not disrupt the\n\t\t * connections of another Pz.Group object using the same effect.\n\t\t */\n    addEffect: {\n      enumerable: true,\n\n      value: function (effect) {\n        if (!Pz.Util.isEffect(effect)) {\n          console.error('The object provided is not a Pizzicato effect.')\n          return this\n        }\n\n        this.effects.push(effect)\n\n\t\t\t\t// Connects effect in the last position\n        var previousNode = this.effectConnectors.length > 0 ? this.effectConnectors[this.effectConnectors.length - 1] : this.mergeGainNode\n        previousNode.disconnect()\n        previousNode.connect(effect)\n\n\t\t\t\t// Creates connector for the newly added effect\n        var gain = Pz.context.createGain()\n        this.effectConnectors.push(gain)\n        effect.connect(gain)\n        gain.connect(this.masterVolume)\n\n        return this\n      }\n    },\n\n\t\t/**\n\t\t * When removing effects, the graph in which there will be a\n\t\t * gain node (effectConnector) in between every effect should be\n\t\t * conserved. For example:\n\t\t * [fadeNode]--->[effect 1]->[connector 1]--->[effect 2]->[connector 2]--->[masterGain]\n\t\t *\n\t\t * Connectors are used to know what nodes to disconnect and not disrupt the\n\t\t * connections of another Pz.Group object using the same effect.\n\t\t */\n    removeEffect: {\n      enumerable: true,\n\n      value: function (effect) {\n        var index = this.effects.indexOf(effect)\n\n        if (index === -1) {\n          console.warn('Cannot remove effect that is not applied to this group.')\n          return this\n        }\n\n        var previousNode = (index === 0) ? this.mergeGainNode : this.effectConnectors(index - 1)\n        previousNode.disconnect()\n\n\t\t\t\t// Disconnect connector and effect\n        var effectConnector = this.effectConnectors[index]\n        effectConnector.disconnect()\n        effect.disconnect(effectConnector)\n\n\t\t\t\t// Remove connector and effect from our arrays\n        this.effectConnectors.splice(index, 1)\n        this.effects.splice(index, 1)\n\n        var targetNode\n        if (index > this.effects.length - 1 || this.effects.length === 0) { targetNode = this.masterVolume } else\t\t\t\t\t{ targetNode = this.effects[index] }\n\n        previousNode.connect(targetNode)\n\n        return this\n      }\n    }\n\n  })\n  Pizzicato.Effects = {}\n\n  var baseEffect = Object.create(null, {\n\n    connect: {\n      enumerable: true,\n\n      value: function (audioNode) {\n        this.outputNode.connect(audioNode)\n        return this\n      }\n    },\n\n    disconnect: {\n      enumerable: true,\n\n      value: function (audioNode) {\n        this.outputNode.disconnect(audioNode)\n        return this\n      }\n    }\n  })\n  Pizzicato.Effects.Delay = function (options) {\n    this.options = {}\n    options = options || this.options\n\n    var defaults = {\n      feedback: 0.5,\n      time: 0.3,\n      mix: 0.5\n    }\n\n    this.inputNode = Pizzicato.context.createGain()\n    this.outputNode = Pizzicato.context.createGain()\n    this.dryGainNode = Pizzicato.context.createGain()\n    this.wetGainNode = Pizzicato.context.createGain()\n    this.feedbackGainNode = Pizzicato.context.createGain()\n    this.delayNode = Pizzicato.context.createDelay()\n\n\t\t// line in to dry mix\n    this.inputNode.connect(this.dryGainNode)\n\t\t// dry line out\n    this.dryGainNode.connect(this.outputNode)\n\n\t\t// feedback loop\n    this.delayNode.connect(this.feedbackGainNode)\n    this.feedbackGainNode.connect(this.delayNode)\n\n\t\t// line in to wet mix\n    this.inputNode.connect(this.delayNode)\n\t\t// wet out\n    this.delayNode.connect(this.wetGainNode)\n\n\t\t// wet line out\n    this.wetGainNode.connect(this.outputNode)\n\n    for (var key in defaults) {\n      this[key] = options[key]\n      this[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key]\n    }\n  }\n\n  Pizzicato.Effects.Delay.prototype = Object.create(baseEffect, {\n\n\t\t/**\n\t\t * Gets and sets the dry/wet mix.\n\t\t */\n    mix: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.mix\n      },\n\n      set: function (mix) {\n        if (!Pz.Util.isInRange(mix, 0, 1)) { return }\n\n        this.options.mix = mix\n        this.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix)\n        this.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix)\n      }\n    },\n\n\t\t/**\n\t\t * Time between each delayed sound\n\t\t */\n    time: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.time\n      },\n\n      set: function (time) {\n        if (!Pz.Util.isInRange(time, 0, 180)) { return }\n\n        this.options.time = time\n        this.delayNode.delayTime.value = time\n      }\n    },\n\n\t\t/**\n\t\t * Strength of each of the echoed delayed sounds.\n\t\t */\n    feedback: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.feedback\n      },\n\n      set: function (feedback) {\n        if (!Pz.Util.isInRange(feedback, 0, 1)) { return }\n\n        this.options.feedback = parseFloat(feedback, 10)\n        this.feedbackGainNode.gain.value = this.feedback\n      }\n    }\n\n  })\n  Pizzicato.Effects.Compressor = function (options) {\n    this.options = {}\n    options = options || this.options\n\n    var defaults = {\n      threshold: -24,\n      knee: 30,\n      attack: 0.003,\n      release: 0.250,\n      ratio: 12\n    }\n\n    this.inputNode = this.compressorNode = Pizzicato.context.createDynamicsCompressor()\n    this.outputNode = Pizzicato.context.createGain()\n\n    this.compressorNode.connect(this.outputNode)\n\n    for (var key in defaults) {\n      this[key] = options[key]\n      this[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key]\n    }\n  }\n\n  Pizzicato.Effects.Compressor.prototype = Object.create(baseEffect, {\n\n\t\t/**\n\t\t * The level above which compression is applied to the audio.\n\t\t * MIN: -100\n\t\t * MAX: 0\n\t\t */\n    threshold: {\n      enumerable: true,\n\n      get: function () {\n        return this.compressorNode.threshold.value\n      },\n      set: function (value) {\n        if (Pizzicato.Util.isInRange(value, -100, 0)) { this.compressorNode.threshold.value = value }\n      }\n    },\n\n\t\t/**\n\t\t * A value representing the range above the threshold where\n\t\t * the curve smoothly transitions to the \"ratio\" portion. More info:\n\t\t * http://www.homestudiocorner.com/what-is-knee-on-a-compressor/\n\t\t * MIN 0\n\t\t * MAX 40\n\t\t */\n    knee: {\n      enumerable: true,\n\n      get: function () {\n        return this.compressorNode.knee.value\n      },\n      set: function (value) {\n        if (Pizzicato.Util.isInRange(value, 0, 40)) { this.compressorNode.knee.value = value }\n      }\n    },\n\n\t\t/**\n\t\t * How soon the compressor starts to compress the dynamics after\n\t\t * the threshold is exceeded. If volume changes are slow, you can\n\t\t * push this to a high value. Short attack times will result in a\n\t\t * fast response to sudden, loud sounds, but will make the changes\n\t\t * in volume much more obvious to listeners.\n\t\t * MIN 0\n\t\t * MAX 1\n\t\t */\n    attack: {\n      enumerable: true,\n\n      get: function () {\n        return this.compressorNode.attack.value\n      },\n      set: function (value) {\n        if (Pizzicato.Util.isInRange(value, 0, 1)) { this.compressorNode.attack.value = value }\n      }\n    },\n\n\t\t/**\n\t\t * How soon the compressor starts to release the volume level\n\t\t * back to normal after the level drops below the threshold.\n\t\t * A long time value will tend to lose quiet sounds that come\n\t\t * after loud ones, but will avoid the volume being raised too\n\t\t * much during short quiet sections like pauses in speech.\n\t\t * MIN 0\n\t\t * MAX 1\n\t\t */\n    release: {\n      enumerable: true,\n\n      get: function () {\n        return this.compressorNode.release.value\n      },\n      set: function (value) {\n        if (Pizzicato.Util.isInRange(value, 0, 1)) { this.compressorNode.release.value = value }\n      }\n    },\n\n\t\t/**\n\t\t * The amount of compression applied to the audio once it\n\t\t * passes the threshold level. The higher the Ratio the more\n\t\t * the loud parts of the audio will be compressed.\n\t\t * MIN 1\n\t\t * MAX 20\n\t\t */\n    ratio: {\n      enumerable: true,\n\n      get: function () {\n        return this.compressorNode.ratio.value\n      },\n      set: function (value) {\n        if (Pizzicato.Util.isInRange(value, 1, 20)) { this.compressorNode.ratio.value = value }\n      }\n    },\n\n    getCurrentGainReduction: function () {\n      return this.compressorNode.reduction\n    }\n\n  })\n\t/**\n\t * Frequencies below the cutoff frequency pass\n\t * through; frequencies above it are attenuated.\n\t */\n  Pizzicato.Effects.LowPassFilter = function (options) {\n    Filter.call(this, options, 'lowpass')\n  }\n\n\t/**\n\t * Frequencies below the cutoff frequency are\n\t * attenuated; frequencies above it pass through.\n\t */\n  Pizzicato.Effects.HighPassFilter = function (options) {\n    Filter.call(this, options, 'highpass')\n  }\n\n\t/**\n\t * Filters used by Pizzicato stem from the biquad filter node. This\n\t * function acts as a common constructor. The only thing that changes\n\t * between filters is the 'type' of the biquad filter node.\n\t */\n  function Filter (options, type) {\n    this.options = {}\n    options = options || this.options\n\n    var defaults = {\n      frequency: 350,\n      peak: 1\n    }\n\n    this.inputNode = this.filterNode = Pz.context.createBiquadFilter()\n    this.filterNode.type = type\n\n    this.outputNode = Pizzicato.context.createGain()\n\n    this.filterNode.connect(this.outputNode)\n\n    for (var key in defaults) {\n      this[key] = options[key]\n      this[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key]\n    }\n  }\n\n  var filterPrototype = Object.create(baseEffect, {\n\n\t\t/**\n\t\t * The cutoff frequency of the filter.\n\t\t * MIN: 10\n\t\t * MAX: 22050 (half the sampling rate of the current context)\n\t\t */\n    frequency: {\n      enumerable: true,\n\n      get: function () {\n        return this.filterNode.frequency.value\n      },\n      set: function (value) {\n        if (Pizzicato.Util.isInRange(value, 10, 22050)) { this.filterNode.frequency.value = value }\n      }\n    },\n\n\t\t/**\n\t\t * Indicates how peaked the frequency is around\n\t\t * the cutoff. The greater the value is, the\n\t\t * greater is the peak.\n\t\t * MIN: 0.0001\n\t\t * MAX: 1000\n\t\t */\n    peak: {\n      enumerable: true,\n\n      get: function () {\n        return this.filterNode.Q.value\n      },\n      set: function (value) {\n        if (Pizzicato.Util.isInRange(value, 0.0001, 1000)) { this.filterNode.Q.value = value }\n      }\n    }\n  })\n\n  Pizzicato.Effects.LowPassFilter.prototype = filterPrototype\n  Pizzicato.Effects.HighPassFilter.prototype = filterPrototype\n  Pizzicato.Effects.Distortion = function (options) {\n    this.options = {}\n    options = options || this.options\n\n    var defaults = {\n      gain: 0.5\n    }\n\n    this.waveShaperNode = Pizzicato.context.createWaveShaper()\n    this.inputNode = this.outputNode = this.waveShaperNode\n\n    for (var key in defaults) {\n      this[key] = options[key]\n      this[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key]\n    }\n  }\n\n  Pizzicato.Effects.Distortion.prototype = Object.create(baseEffect, {\n\n\t\t/**\n\t\t * Gets and sets the gain (amount of distortion).\n\t\t */\n    gain: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.gain\n      },\n\n      set: function (gain) {\n        if (!Pz.Util.isInRange(gain, 0, 1)) { return }\n\n        this.options.gain = gain\n        this.adjustGain()\n      }\n    },\n\n\t\t/**\n\t\t * Sets the wave curve with the correct gain. Taken from\n\t\t * http://stackoverflow.com/questions/22312841/waveshaper-node-in-webaudio-how-to-emulate-distortion\n\t\t */\n    adjustGain: {\n      writable: false,\n      configurable: false,\n      enumerable: false,\n      value: function () {\n        var gain = Pz.Util.isNumber(this.options.gain) ? parseInt(this.options.gain * 100, 10) : 50\n        var n_samples = 44100\n        var curve = new Float32Array(n_samples)\n        var deg = Math.PI / 180\n        var x\n\n        for (var i = 0; i < n_samples; ++i) {\n          x = i * 2 / n_samples - 1\n          curve[i] = (3 + gain) * x * 20 * deg / (Math.PI + gain * Math.abs(x))\n        }\n\n        this.waveShaperNode.curve = curve\n      }\n    }\n\n  })\n  Pizzicato.Effects.Flanger = function (options) {\n    this.options = {}\n    options = options || this.options\n\n    var defaults = {\n      time: 0.45,\n      speed: 0.2,\n      depth: 0.1,\n      feedback: 0.1,\n      mix: 0.5\n    }\n\n    this.inputNode = Pizzicato.context.createGain()\n    this.outputNode = Pizzicato.context.createGain()\n    this.inputFeedbackNode = Pizzicato.context.createGain()\n    this.wetGainNode = Pizzicato.context.createGain()\n    this.dryGainNode = Pizzicato.context.createGain()\n    this.delayNode = Pizzicato.context.createDelay()\n    this.oscillatorNode = Pizzicato.context.createOscillator()\n    this.gainNode = Pizzicato.context.createGain()\n    this.feedbackNode = Pizzicato.context.createGain()\n    this.oscillatorNode.type = 'sine'\n\n    this.inputNode.connect(this.inputFeedbackNode)\n    this.inputNode.connect(this.dryGainNode)\n\n    this.inputFeedbackNode.connect(this.delayNode)\n    this.inputFeedbackNode.connect(this.wetGainNode)\n\n    this.delayNode.connect(this.wetGainNode)\n    this.delayNode.connect(this.feedbackNode)\n\n    this.feedbackNode.connect(this.inputFeedbackNode)\n\n    this.oscillatorNode.connect(this.gainNode)\n    this.gainNode.connect(this.delayNode.delayTime)\n\n    this.dryGainNode.connect(this.outputNode)\n    this.wetGainNode.connect(this.outputNode)\n\n    this.oscillatorNode.start(0)\n\n    for (var key in defaults) {\n      this[key] = options[key]\n      this[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key]\n    }\n  }\n\n  Pizzicato.Effects.Flanger.prototype = Object.create(baseEffect, {\n\n    time: {\n      enumberable: true,\n\n      get: function () {\n        return this.options.time\n      },\n\n      set: function (time) {\n        if (!Pz.Util.isInRange(time, 0, 1)) { return }\n\n        this.options.time = time\n        this.delayNode.delayTime.value = Pz.Util.normalize(time, 0.001, 0.02)\n      }\n    },\n\n    speed: {\n      enumberable: true,\n\n      get: function () {\n        return this.options.speed\n      },\n\n      set: function (speed) {\n        if (!Pz.Util.isInRange(speed, 0, 1)) { return }\n\n        this.options.speed = speed\n        this.oscillatorNode.frequency.value = Pz.Util.normalize(speed, 0.5, 5)\n      }\n    },\n\n    depth: {\n      enumberable: true,\n\n      get: function () {\n        return this.options.depth\n      },\n\n      set: function (depth) {\n        if (!Pz.Util.isInRange(depth, 0, 1)) { return }\n\n        this.options.depth = depth\n        this.gainNode.gain.value = Pz.Util.normalize(depth, 0.0005, 0.005)\n      }\n    },\n\n    feedback: {\n      enumberable: true,\n\n      get: function () {\n        return this.options.feedback\n      },\n\n      set: function (feedback) {\n        if (!Pz.Util.isInRange(feedback, 0, 1)) { return }\n\n        this.options.feedback = feedback\n        this.feedbackNode.gain.value = Pz.Util.normalize(feedback, 0, 0.8)\n      }\n    },\n\n    mix: {\n      enumberable: true,\n\n      get: function () {\n        return this.options.mix\n      },\n\n      set: function (mix) {\n        if (!Pz.Util.isInRange(mix, 0, 1)) { return }\n\n        this.options.mix = mix\n        this.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix)\n        this.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix)\n      }\n    }\n\n  })\n  Pizzicato.Effects.StereoPanner = function (options) {\n    this.options = {}\n    options = options || this.options\n\n    var defaults = {\n      pan: 0\n    }\n\n    this.inputNode = Pizzicato.context.createGain()\n    this.outputNode = Pizzicato.context.createGain()\n\n    if (Pizzicato.context.createStereoPanner) {\n      this.pannerNode = Pizzicato.context.createStereoPanner()\n      this.inputNode.connect(this.pannerNode)\n      this.pannerNode.connect(this.outputNode)\n    } else {\n      this.inputNode.connect(this.outputNode)\n    }\n\n    for (var key in defaults) {\n      this[key] = options[key]\n      this[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key]\n    }\n  }\n\n  Pizzicato.Effects.StereoPanner.prototype = Object.create(baseEffect, {\n\n\t\t/**\n\t\t * Pan position\n\t\t */\n    pan: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.pan\n      },\n\n      set: function (pan) {\n        if (!Pz.Util.isInRange(pan, -1, 1)) { return }\n\n        this.options.pan = pan\n        if (this.pannerNode) {\n          this.pannerNode.pan.value = pan\n        }\n      }\n    }\n\n  })\n  Pizzicato.Effects.Convolver = function (options, callback) {\n    this.options = {}\n    options = options || this.options\n\n    var self = this\n    var request = new XMLHttpRequest()\n    var defaults = {\n      mix: 0.5\n    }\n\n    this.callback = callback\n\n    this.inputNode = Pizzicato.context.createGain()\n    this.convolverNode = Pizzicato.context.createConvolver()\n    this.outputNode = Pizzicato.context.createGain()\n\n    this.wetGainNode = Pizzicato.context.createGain()\n    this.dryGainNode = Pizzicato.context.createGain()\n\n    this.inputNode.connect(this.convolverNode)\n\n    this.convolverNode.connect(this.wetGainNode)\n    this.inputNode.connect(this.dryGainNode)\n\n    this.dryGainNode.connect(this.outputNode)\n    this.wetGainNode.connect(this.outputNode)\n\n    for (var key in defaults) {\n      this[key] = options[key]\n      this[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key]\n    }\n\n    if (!options.impulse) {\n      console.error('No impulse file specified.')\n      return\n    }\n\n    request.open('GET', options.impulse, true)\n    request.responseType = 'arraybuffer'\n    request.onload = function (e) {\n      var audioData = e.target.response\n\n      Pizzicato.context.decodeAudioData(audioData, function (buffer) {\n        self.convolverNode.buffer = buffer\n\n        if (self.callback && Pz.Util.isFunction(self.callback)) { self.callback() }\n      }, function (error) {\n        error = error || new Error('Error decoding impulse file')\n\n        if (self.callback && Pz.Util.isFunction(self.callback)) { self.callback(error) }\n      })\n    }\n\n    request.onreadystatechange = function (event) {\n      if (request.readyState === 4 && request.status !== 200) {\n        console.error('Error while fetching ' + options.impulse + '. ' + request.statusText)\n      }\n    }\n\n    request.send()\n  }\n\n  Pizzicato.Effects.Convolver.prototype = Object.create(baseEffect, {\n\n    mix: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.mix\n      },\n\n      set: function (mix) {\n        if (!Pz.Util.isInRange(mix, 0, 1)) { return }\n\n        this.options.mix = mix\n        this.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix)\n        this.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix)\n      }\n    }\n  })\n\t/**\n\t * Adapted from https://github.com/mmckegg/web-audio-school/blob/master/lessons/3.%20Effects/18.%20Ping%20Pong%20Delay/answer.js\n\t */\n\n  Pizzicato.Effects.PingPongDelay = function (options) {\n    this.options = {}\n    options = options || this.options\n\n    var defaults = {\n      feedback: 0.5,\n      time: 0.3,\n      mix: 0.5\n    }\n\n    this.inputNode = Pizzicato.context.createGain()\n    this.outputNode = Pizzicato.context.createGain()\n    this.delayNodeLeft = Pizzicato.context.createDelay()\n    this.delayNodeRight = Pizzicato.context.createDelay()\n    this.dryGainNode = Pizzicato.context.createGain()\n    this.wetGainNode = Pizzicato.context.createGain()\n    this.feedbackGainNode = Pizzicato.context.createGain()\n    this.channelMerger = Pizzicato.context.createChannelMerger(2)\n\n\t\t// dry mix\n    this.inputNode.connect(this.dryGainNode)\n\t\t// dry mix out\n    this.dryGainNode.connect(this.outputNode)\n\n\t\t// the feedback loop\n    this.delayNodeLeft.connect(this.channelMerger, 0, 0)\n    this.delayNodeRight.connect(this.channelMerger, 0, 1)\n    this.delayNodeLeft.connect(this.delayNodeRight)\n    this.feedbackGainNode.connect(this.delayNodeLeft)\n    this.delayNodeRight.connect(this.feedbackGainNode)\n\n\t\t// wet mix\n    this.inputNode.connect(this.feedbackGainNode)\n\n\t\t// wet out\n    this.channelMerger.connect(this.wetGainNode)\n    this.wetGainNode.connect(this.outputNode)\n\n    for (var key in defaults) {\n      this[key] = options[key]\n      this[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key]\n    }\n  }\n\n  Pizzicato.Effects.PingPongDelay.prototype = Object.create(baseEffect, {\n\n\t\t/**\n\t\t * Gets and sets the dry/wet mix.\n\t\t */\n    mix: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.mix\n      },\n\n      set: function (mix) {\n        if (!Pz.Util.isInRange(mix, 0, 1)) { return }\n\n        this.options.mix = mix\n        this.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix)\n        this.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix)\n      }\n    },\n\n\t\t/**\n\t\t * Time between each delayed sound\n\t\t */\n    time: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.time\n      },\n\n      set: function (time) {\n        if (!Pz.Util.isInRange(time, 0, 180)) { return }\n\n        this.options.time = time\n        this.delayNodeLeft.delayTime.value = time\n        this.delayNodeRight.delayTime.value = time\n      }\n    },\n\n\t\t/**\n\t\t * Strength of each of the echoed delayed sounds.\n\t\t */\n    feedback: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.feedback\n      },\n\n      set: function (feedback) {\n        if (!Pz.Util.isInRange(feedback, 0, 1)) { return }\n\n        this.options.feedback = parseFloat(feedback, 10)\n        this.feedbackGainNode.gain.value = this.feedback\n      }\n    }\n\n  })\n\t/**\n\t * Adapted from https://github.com/web-audio-components/simple-reverb\n\t */\n\n  Pizzicato.Effects.Reverb = function (options) {\n    var self = this\n\n    this.options = {}\n    options = options || this.options\n\n    var defaults = {\n      mix: 0.5,\n      time: 0.01,\n      decay: 0.01,\n      reverse: false\n    }\n\n    this.inputNode = Pizzicato.context.createGain()\n    this.reverbNode = Pizzicato.context.createConvolver()\n    this.outputNode = Pizzicato.context.createGain()\n    this.wetGainNode = Pizzicato.context.createGain()\n    this.dryGainNode = Pizzicato.context.createGain()\n\n    this.inputNode.connect(this.reverbNode)\n    this.reverbNode.connect(this.wetGainNode)\n    this.inputNode.connect(this.dryGainNode)\n    this.dryGainNode.connect(this.outputNode)\n    this.wetGainNode.connect(this.outputNode)\n\n    for (var key in defaults) {\n      this[key] = options[key]\n      this[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key]\n    }\n\n    (buildImpulse.bind(this))()\n  }\n\n  Pizzicato.Effects.Reverb.prototype = Object.create(baseEffect, {\n\n    mix: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.mix\n      },\n\n      set: function (mix) {\n        if (!Pz.Util.isInRange(mix, 0, 1)) { return }\n\n        this.options.mix = mix\n        this.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix)\n        this.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix)\n      }\n    },\n\n    time: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.time\n      },\n\n      set: function (time) {\n        if (!Pz.Util.isInRange(time, 0.0001, 10)) { return }\n\n        this.options.time = time;\n        (buildImpulse.bind(this))()\n      }\n    },\n\n    decay: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.decay\n      },\n\n      set: function (decay) {\n        if (!Pz.Util.isInRange(decay, 0.0001, 10)) { return }\n\n        this.options.decay = decay;\n        (buildImpulse.bind(this))()\n      }\n\n    },\n\n    reverse: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.reverse\n      },\n\n      set: function (reverse) {\n        if (!Pz.Util.isBool(reverse)) { return }\n\n        this.options.reverse = reverse;\n        (buildImpulse.bind(this))()\n      }\n    }\n\n  })\n\n  function buildImpulse () {\n    var length = Pz.context.sampleRate * this.time\n    var impulse = Pizzicato.context.createBuffer(2, length, Pz.context.sampleRate)\n    var impulseL = impulse.getChannelData(0)\n    var impulseR = impulse.getChannelData(1)\n    var n, i\n\n    for (i = 0; i < length; i++) {\n      n = this.reverse ? length - i : i\n      impulseL[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, this.decay)\n      impulseR[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, this.decay)\n    }\n\n    this.reverbNode.buffer = impulse\n  }\n  Pizzicato.Effects.Tremolo = function (options) {\n\t\t// adapted from\n\t\t// https://github.com/mmckegg/web-audio-school/blob/master/lessons/3.%20Effects/13.%20Tremolo/answer.js\n\n    this.options = {}\n    options = options || this.options\n\n    var defaults = {\n      speed: 4,\n      depth: 1,\n      mix: 0.8\n    }\n\n\t\t// create nodes\n    this.inputNode = Pizzicato.context.createGain()\n    this.outputNode = Pizzicato.context.createGain()\n    this.dryGainNode = Pizzicato.context.createGain()\n    this.wetGainNode = Pizzicato.context.createGain()\n\n    this.tremoloGainNode = Pizzicato.context.createGain()\n    this.tremoloGainNode.gain.value = 0\n    this.lfoNode = Pizzicato.context.createOscillator()\n\n    this.shaperNode = Pizzicato.context.createWaveShaper()\n    this.shaperNode.curve = new Float32Array([0, 1])\n    this.shaperNode.connect(this.tremoloGainNode.gain)\n\n\t\t// dry mix\n    this.inputNode.connect(this.dryGainNode)\n    this.dryGainNode.connect(this.outputNode)\n\n\t\t// wet mix\n    this.lfoNode.connect(this.shaperNode)\n    this.lfoNode.type = 'sine'\n    this.lfoNode.start(0)\n\n    this.inputNode.connect(this.tremoloGainNode)\n    this.tremoloGainNode.connect(this.wetGainNode)\n    this.wetGainNode.connect(this.outputNode)\n\n    for (var key in defaults) {\n      this[key] = options[key]\n      this[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key]\n    }\n  }\n\n  Pizzicato.Effects.Tremolo.prototype = Object.create(baseEffect, {\n\n\t\t/**\n\t\t * Gets and sets the dry/wet mix.\n\t\t */\n    mix: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.mix\n      },\n\n      set: function (mix) {\n        if (!Pz.Util.isInRange(mix, 0, 1)) { return }\n\n        this.options.mix = mix\n        this.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix)\n        this.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix)\n      }\n    },\n\n\t\t/**\n\t\t * Speed of the tremolo\n\t\t */\n    speed: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.speed\n      },\n\n      set: function (speed) {\n        if (!Pz.Util.isInRange(speed, 0, 20)) { return }\n\n        this.options.speed = speed\n        this.lfoNode.frequency.value = speed\n      }\n    },\n\n\t\t/**\n\t\t * Depth of the tremolo\n\t\t */\n    depth: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.depth\n      },\n\n      set: function (depth) {\n        if (!Pz.Util.isInRange(depth, 0, 1)) { return }\n\n        this.options.depth = depth\n        this.shaperNode.curve = new Float32Array([1 - depth, 1])\n      }\n    }\n\n  })\n  Pizzicato.Effects.DubDelay = function (options) {\n    this.options = {}\n    options = options || this.options\n\n    var defaults = {\n      feedback: 0.6,\n      time: 0.7,\n      mix: 0.5,\n      cutoff: 700\n    }\n\n    this.inputNode = Pizzicato.context.createGain()\n    this.outputNode = Pizzicato.context.createGain()\n    this.dryGainNode = Pizzicato.context.createGain()\n    this.wetGainNode = Pizzicato.context.createGain()\n    this.feedbackGainNode = Pizzicato.context.createGain()\n    this.delayNode = Pizzicato.context.createDelay()\n    this.bqFilterNode = Pizzicato.context.createBiquadFilter()\n\n\t\t// dry mix\n    this.inputNode.connect(this.dryGainNode)\n    this.dryGainNode.connect(this.outputNode)\n\n\t\t// wet mix\n    this.inputNode.connect(this.wetGainNode)\n    this.inputNode.connect(this.feedbackGainNode)\n\n    this.feedbackGainNode.connect(this.bqFilterNode)\n    this.bqFilterNode.connect(this.delayNode)\n    this.delayNode.connect(this.feedbackGainNode)\n    this.delayNode.connect(this.wetGainNode)\n\n    this.wetGainNode.connect(this.outputNode)\n\n    for (var key in defaults) {\n      this[key] = options[key]\n      this[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key]\n    }\n  }\n\n  Pizzicato.Effects.DubDelay.prototype = Object.create(baseEffect, {\n\n\t\t/**\n\t\t * Gets and sets the dry/wet mix.\n\t\t */\n    mix: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.mix\n      },\n\n      set: function (mix) {\n        if (!Pz.Util.isInRange(mix, 0, 1)) { return }\n\n        this.options.mix = mix\n        this.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix)\n        this.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix)\n      }\n    },\n\n\t\t/**\n\t\t * Time between each delayed sound\n\t\t */\n    time: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.time\n      },\n\n      set: function (time) {\n        if (!Pz.Util.isInRange(time, 0, 180)) { return }\n\n        this.options.time = time\n        this.delayNode.delayTime.value = time\n      }\n    },\n\n\t\t/**\n\t\t * Strength of each of the echoed delayed sounds.\n\t\t */\n    feedback: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.feedback\n      },\n\n      set: function (feedback) {\n        if (!Pz.Util.isInRange(feedback, 0, 1)) { return }\n\n        this.options.feedback = parseFloat(feedback, 10)\n        this.feedbackGainNode.gain.value = this.feedback\n      }\n    },\n\n\t\t/**\n\t\t * Frequency on delay repeats\n\t\t */\n    cutoff: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.cutoff\n      },\n\n      set: function (cutoff) {\n        if (!Pz.Util.isInRange(cutoff, 0, 4000)) { return }\n\n        this.options.cutoff = cutoff\n        this.bqFilterNode.frequency.value = this.cutoff\n      }\n    }\n\n  })\n\t/**\n\t * See http://webaudio.prototyping.bbc.co.uk/ring-modulator/\n\t */\n  Pizzicato.Effects.RingModulator = function (options) {\n    this.options = {}\n    options = options || this.options\n\n    var defaults = {\n      speed: 30,\n      distortion: 1,\n      mix: 0.5\n    }\n\n    this.inputNode = Pizzicato.context.createGain()\n    this.outputNode = Pizzicato.context.createGain()\n    this.dryGainNode = Pizzicato.context.createGain()\n    this.wetGainNode = Pizzicato.context.createGain()\n\n\t\t/**\n\t\t * `vIn` is the modulation oscillator input\n\t\t * `vc` is the audio input.\n\t\t */\n    this.vIn = Pizzicato.context.createOscillator()\n    this.vIn.start(0)\n    this.vInGain = Pizzicato.context.createGain()\n    this.vInGain.gain.value = 0.5\n    this.vInInverter1 = Pizzicato.context.createGain()\n    this.vInInverter1.gain.value = -1\n    this.vInInverter2 = Pizzicato.context.createGain()\n    this.vInInverter2.gain.value = -1\n    this.vInDiode1 = new DiodeNode(Pizzicato.context)\n    this.vInDiode2 = new DiodeNode(Pizzicato.context)\n    this.vInInverter3 = Pizzicato.context.createGain()\n    this.vInInverter3.gain.value = -1\n    this.vcInverter1 = Pizzicato.context.createGain()\n    this.vcInverter1.gain.value = -1\n    this.vcDiode3 = new DiodeNode(Pizzicato.context)\n    this.vcDiode4 = new DiodeNode(Pizzicato.context)\n\n    this.outGain = Pizzicato.context.createGain()\n    this.outGain.gain.value = 3\n\n    this.compressor = Pizzicato.context.createDynamicsCompressor()\n    this.compressor.threshold.value = -24\n    this.compressor.ratio.value = 16\n\n\t\t// dry mix\n    this.inputNode.connect(this.dryGainNode)\n    this.dryGainNode.connect(this.outputNode)\n\n\t\t// wet mix\n    this.inputNode.connect(this.vcInverter1)\n    this.inputNode.connect(this.vcDiode4.node)\n    this.vcInverter1.connect(this.vcDiode3.node)\n    this.vIn.connect(this.vInGain)\n    this.vInGain.connect(this.vInInverter1)\n    this.vInGain.connect(this.vcInverter1)\n    this.vInGain.connect(this.vcDiode4.node)\n    this.vInInverter1.connect(this.vInInverter2)\n    this.vInInverter1.connect(this.vInDiode2.node)\n    this.vInInverter2.connect(this.vInDiode1.node)\n    this.vInDiode1.connect(this.vInInverter3)\n    this.vInDiode2.connect(this.vInInverter3)\n    this.vInInverter3.connect(this.compressor)\n    this.vcDiode3.connect(this.compressor)\n    this.vcDiode4.connect(this.compressor)\n    this.compressor.connect(this.outGain)\n    this.outGain.connect(this.wetGainNode)\n\n\t\t// line out\n    this.wetGainNode.connect(this.outputNode)\n\n    for (var key in defaults) {\n      this[key] = options[key]\n      this[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key]\n    }\n  }\n\n  var DiodeNode = function (context_) {\n    this.context = context_\n    this.node = this.context.createWaveShaper()\n    this.vb = 0.2\n    this.vl = 0.4\n    this.h = 1\n    this.setCurve()\n  }\n\n  DiodeNode.prototype.setDistortion = function (distortion) {\n    this.h = distortion\n    return this.setCurve()\n  }\n\n  DiodeNode.prototype.setCurve = function () {\n    var i,\n      samples,\n      v,\n      value,\n      wsCurve,\n      _i,\n      _ref,\n      retVal\n\n    samples = 1024\n    wsCurve = new Float32Array(samples)\n\n    for (i = _i = 0, _ref = wsCurve.length; _ref >= 0 ? _i < _ref : _i > _ref; i = _ref >= 0 ? ++_i : --_i) {\n      v = (i - samples / 2) / (samples / 2)\n      v = Math.abs(v)\n      if (v <= this.vb) {\n        value = 0\n      } else if ((this.vb < v) && (v <= this.vl)) {\n        value = this.h * ((Math.pow(v - this.vb, 2)) / (2 * this.vl - 2 * this.vb))\n      } else {\n        value = this.h * v - this.h * this.vl + (this.h * ((Math.pow(this.vl - this.vb, 2)) / (2 * this.vl - 2 * this.vb)))\n      }\n      wsCurve[i] = value\n    }\n\n    retVal = this.node.curve = wsCurve\n    return retVal\n  }\n\n  DiodeNode.prototype.connect = function (destination) {\n    return this.node.connect(destination)\n  }\n\n  Pizzicato.Effects.RingModulator.prototype = Object.create(baseEffect, {\n\n\t\t/**\n\t\t * Gets and sets the dry/wet mix.\n\t\t */\n    mix: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.mix\n      },\n\n      set: function (mix) {\n        if (!Pz.Util.isInRange(mix, 0, 1)) { return }\n\n        this.options.mix = mix\n        this.dryGainNode.gain.value = Pizzicato.Util.getDryLevel(this.mix)\n        this.wetGainNode.gain.value = Pizzicato.Util.getWetLevel(this.mix)\n      }\n    },\n\n\t\t/**\n\t\t * Speed on the input oscillator\n\t\t */\n    speed: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.speed\n      },\n\n      set: function (speed) {\n        if (!Pz.Util.isInRange(speed, 0, 2000)) { return }\n\n        this.options.speed = speed\n        this.vIn.frequency.value = speed\n      }\n    },\n\n\t\t/**\n\t\t * Level of distortion\n\t\t */\n    distortion: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.distortion\n      },\n\n      set: function (distortion) {\n        if (!Pz.Util.isInRange(distortion, 0.2, 50)) { return }\n\n        this.options.distortion = parseFloat(distortion, 10)\n\n        var diodeNodes = [this.vInDiode1, this.vInDiode2, this.vcDiode3, this.vcDiode4]\n\n        for (var i = 0, l = diodeNodes.length; i < l; i++) {\n          diodeNodes[i].setDistortion(distortion)\n        }\n      }\n    }\n\n  })\n  Pizzicato.Effects.Quadrafuzz = function (options) {\n    this.options = {}\n    options = options || this.options\n\n    var defaults = {\n      lowGain: 0.6,\n      midLowGain: 0.8,\n      midHighGain: 0.5,\n      highGain: 0.6\n    }\n\n    this.inputNode = Pz.context.createGain()\n    this.outputNode = Pz.context.createGain()\n    this.dryGainNode = Pz.context.createGain()\n    this.wetGainNode = Pz.context.createGain()\n\n    this.lowpassLeft = Pz.context.createBiquadFilter()\n    this.lowpassLeft.type = 'lowpass'\n    this.lowpassLeft.frequency.value = 147\n    this.lowpassLeft.Q.value = 0.7071\n\n    this.bandpass1Left = Pz.context.createBiquadFilter()\n    this.bandpass1Left.type = 'bandpass'\n    this.bandpass1Left.frequency.value = 587\n    this.bandpass1Left.Q.value = 0.7071\n\n    this.bandpass2Left = Pz.context.createBiquadFilter()\n    this.bandpass2Left.type = 'bandpass'\n    this.bandpass2Left.frequency.value = 2490\n    this.bandpass2Left.Q.value = 0.7071\n\n    this.highpassLeft = Pz.context.createBiquadFilter()\n    this.highpassLeft.type = 'highpass'\n    this.highpassLeft.frequency.value = 4980\n    this.highpassLeft.Q.value = 0.7071\n\n    this.overdrives = []\n    for (var i = 0; i < 4; i++) {\n      this.overdrives[i] = Pz.context.createWaveShaper()\n      this.overdrives[i].curve = getDistortionCurve()\n    }\n\n    this.inputNode.connect(this.wetGainNode)\n    this.inputNode.connect(this.dryGainNode)\n    this.dryGainNode.connect(this.outputNode)\n\n    var filters = [this.lowpassLeft, this.bandpass1Left, this.bandpass2Left, this.highpassLeft]\n    for (i = 0; i < filters.length; i++) {\n      this.wetGainNode.connect(filters[i])\n      filters[i].connect(this.overdrives[i])\n      this.overdrives[i].connect(this.outputNode)\n    }\n\n    for (var key in defaults) {\n      this[key] = options[key]\n      this[key] = (this[key] === undefined || this[key] === null) ? defaults[key] : this[key]\n    }\n  }\n\n  function getDistortionCurve (gain) {\n    var sampleRate = Pz.context.sampleRate\n    var curve = new Float32Array(sampleRate)\n    var deg = Math.PI / 180\n\n    for (var i = 0; i < sampleRate; i++) {\n      var x = i * 2 / sampleRate - 1\n      curve[i] = (3 + gain) * x * 20 * deg / (Math.PI + gain * Math.abs(x))\n    }\n    return curve\n  }\n\n  Pizzicato.Effects.Quadrafuzz.prototype = Object.create(baseEffect, {\n\n    lowGain: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.lowGain\n      },\n\n      set: function (lowGain) {\n        if (!Pz.Util.isInRange(lowGain, 0, 1)) { return }\n\n        this.options.lowGain = lowGain\n        this.overdrives[0].curve = getDistortionCurve(Pz.Util.normalize(this.lowGain, 0, 150))\n      }\n    },\n\n    midLowGain: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.midLowGain\n      },\n\n      set: function (midLowGain) {\n        if (!Pz.Util.isInRange(midLowGain, 0, 1)) { return }\n\n        this.options.midLowGain = midLowGain\n        this.overdrives[1].curve = getDistortionCurve(Pz.Util.normalize(this.midLowGain, 0, 150))\n      }\n    },\n\n    midHighGain: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.midHighGain\n      },\n\n      set: function (midHighGain) {\n        if (!Pz.Util.isInRange(midHighGain, 0, 1)) { return }\n\n        this.options.midHighGain = midHighGain\n        this.overdrives[2].curve = getDistortionCurve(Pz.Util.normalize(this.midHighGain, 0, 150))\n      }\n    },\n\n    highGain: {\n      enumerable: true,\n\n      get: function () {\n        return this.options.highGain\n      },\n\n      set: function (highGain) {\n        if (!Pz.Util.isInRange(highGain, 0, 1)) { return }\n\n        this.options.highGain = highGain\n        this.overdrives[3].curve = getDistortionCurve(Pz.Util.normalize(this.highGain, 0, 150))\n      }\n    }\n  })\n\n  return Pizzicato\n})(typeof window !== 'undefined' ? window : global)\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(7)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc3JjL2pzL1BpenppY2F0by5qcz9hZDQ0Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI4Q0FBQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlCQUFpQiw2QkFBNkIsZ0JBQWdCO0FBQUE7QUFBQTtBQUFBLHNHQUF3QixRQUFROztBQUU5Rjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsdUZBQXVGOztBQUV2RjtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLHVEQUF1RDtBQUN2RDs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLDBGQUEwRjs7QUFFMUY7QUFDQSxLQUFLOztBQUVMO0FBQ0EseURBQXlEOztBQUV6RCx1QkFBdUI7O0FBRXZCO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLHlEQUF5RDs7QUFFekQsdUJBQXVCOztBQUV2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLDhEQUE4RDtBQUM5RDtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjs7QUFFL0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFD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QUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0EsNENBQTRDOztBQUU1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBLCtDQUErQzs7QUFFL0M7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0EsOENBQThDOztBQUU5QztBQUNBO0FBQ0E7QUFDQTs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBLDRDQUE0Qzs7QUFFNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQSwrQ0FBK0M7O0FBRS9DO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBLGlEQUFpRDs7QUFFakQ7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0Esa0RBQWtEOztBQUVsRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLDJDQUEyQyxtQ0FBbUM7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0EsNENBQTRDOztBQUU1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBLGlEQUFpRDs7QUFFakQ7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0Esc0RBQXNEOztBQUV0RDs7QUFFQTs7QUFFQSw4Q0FBOEMsT0FBTztBQUNyRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQixnQkFBZ0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0EsZ0RBQWdEOztBQUVoRDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQSxtREFBbUQ7O0FBRW5EO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBLG9EQUFvRDs7QUFFcEQ7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0EsaURBQWlEOztBQUVqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxDQUFDIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKHJvb3QpIHtcbiAgJ3VzZSBzdHJpY3QnXG5cbiAgdmFyIFBpenppY2F0byA9IHt9XG4gIHZhciBQeiA9IFBpenppY2F0b1xuICB2YXIgY29tbW9uSlMgPSB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0c1xuICB2YXIgYW1kID0gdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kXG5cbiAgaWYgKGNvbW1vbkpTKSB7IG1vZHVsZS5leHBvcnRzID0gUGl6emljYXRvIH0gZWxzZSBpZiAoYW1kKSB7IGRlZmluZShbXSwgUGl6emljYXRvKSB9IGVsc2VcdFx0eyByb290LlBpenppY2F0byA9IHJvb3QuUHogPSBQaXp6aWNhdG8gfVxuXG4gIHZhciBBdWRpb0NvbnRleHQgPSByb290LkF1ZGlvQ29udGV4dCB8fCByb290LndlYmtpdEF1ZGlvQ29udGV4dFxuXG4gIGlmICghQXVkaW9Db250ZXh0KSB7XG4gICAgY29uc29sZS5lcnJvcignTm8gQXVkaW9Db250ZXh0IGZvdW5kIGluIHRoaXMgZW52aXJvbm1lbnQuIFBsZWFzZSBlbnN1cmUgeW91ciB3aW5kb3cgb3IgZ2xvYmFsIG9iamVjdCBjb250YWlucyBhIHdvcmtpbmcgQXVkaW9Db250ZXh0IGNvbnN0cnVjdG9yIGZ1bmN0aW9uLicpXG4gICAgcmV0dXJuXG4gIH1cblxuICBQaXp6aWNhdG8uY29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoKVxuXG4gIHZhciBtYXN0ZXJHYWluTm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICBtYXN0ZXJHYWluTm9kZS5jb25uZWN0KFBpenppY2F0by5jb250ZXh0LmRlc3RpbmF0aW9uKVxuXG4gIFBpenppY2F0by5VdGlsID0ge1xuXG4gICAgaXNTdHJpbmc6IGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKGFyZykgPT09ICdbb2JqZWN0IFN0cmluZ10nXG4gICAgfSxcblxuICAgIGlzT2JqZWN0OiBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcmcpID09PSAnW29iamVjdCBPYmplY3RdJ1xuICAgIH0sXG5cbiAgICBpc0Z1bmN0aW9uOiBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcmcpID09PSAnW29iamVjdCBGdW5jdGlvbl0nXG4gICAgfSxcblxuICAgIGlzTnVtYmVyOiBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcmcpID09PSAnW29iamVjdCBOdW1iZXJdJyAmJiBhcmcgPT09ICthcmdcbiAgICB9LFxuXG4gICAgaXNBcnJheTogZnVuY3Rpb24gKGFyZykge1xuICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYXJnKSA9PT0gJ1tvYmplY3QgQXJyYXldJ1xuICAgIH0sXG5cbiAgICBpc0luUmFuZ2U6IGZ1bmN0aW9uIChhcmcsIG1pbiwgbWF4KSB7XG4gICAgICBpZiAoIVB6LlV0aWwuaXNOdW1iZXIoYXJnKSB8fCAhUHouVXRpbC5pc051bWJlcihtaW4pIHx8ICFQei5VdGlsLmlzTnVtYmVyKG1heCkpIHsgcmV0dXJuIGZhbHNlIH1cblxuICAgICAgcmV0dXJuIGFyZyA+PSBtaW4gJiYgYXJnIDw9IG1heFxuICAgIH0sXG5cbiAgICBpc0Jvb2w6IGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgKGFyZykgPT09ICdib29sZWFuJ1xuICAgIH0sXG5cbiAgICBpc09zY2lsbGF0b3I6IGZ1bmN0aW9uIChhdWRpb05vZGUpIHtcbiAgICAgIHJldHVybiAoYXVkaW9Ob2RlICYmIGF1ZGlvTm9kZS50b1N0cmluZygpID09PSAnW29iamVjdCBPc2NpbGxhdG9yTm9kZV0nKVxuICAgIH0sXG5cbiAgICBpc0F1ZGlvQnVmZmVyU291cmNlTm9kZTogZnVuY3Rpb24gKGF1ZGlvTm9kZSkge1xuICAgICAgcmV0dXJuIChhdWRpb05vZGUgJiYgYXVkaW9Ob2RlLnRvU3RyaW5nKCkgPT09ICdbb2JqZWN0IEF1ZGlvQnVmZmVyU291cmNlTm9kZV0nKVxuICAgIH0sXG5cbiAgICBpc1NvdW5kOiBmdW5jdGlvbiAoc291bmQpIHtcbiAgICAgIHJldHVybiBzb3VuZCBpbnN0YW5jZW9mIFB6LlNvdW5kXG4gICAgfSxcblxuICAgIGlzRWZmZWN0OiBmdW5jdGlvbiAoZWZmZWN0KSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gUGl6emljYXRvLkVmZmVjdHMpIHtcbiAgICAgICAgaWYgKGVmZmVjdCBpbnN0YW5jZW9mIFBpenppY2F0by5FZmZlY3RzW2tleV0pIHsgcmV0dXJuIHRydWUgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9LFxuXG5cdFx0Ly8gVGFrZXMgYSBudW1iZXIgZnJvbSAwIHRvIDEgYW5kIG5vcm1hbGl6ZXMgaXQgdG8gZml0IHdpdGhpbiByYW5nZSBmbG9vciB0byBjZWlsaW5nXG4gICAgbm9ybWFsaXplOiBmdW5jdGlvbiAobnVtLCBmbG9vciwgY2VpbCkge1xuICAgICAgaWYgKCFQei5VdGlsLmlzTnVtYmVyKG51bSkgfHwgIVB6LlV0aWwuaXNOdW1iZXIoZmxvb3IpIHx8ICFQei5VdGlsLmlzTnVtYmVyKGNlaWwpKSB7IHJldHVybiB9XG5cbiAgICAgIHJldHVybiAoKGNlaWwgLSBmbG9vcikgKiBudW0pIC8gMSArIGZsb29yXG4gICAgfSxcblxuICAgIGdldERyeUxldmVsOiBmdW5jdGlvbiAobWl4KSB7XG4gICAgICBpZiAoIVB6LlV0aWwuaXNOdW1iZXIobWl4KSB8fCBtaXggPiAxIHx8IG1peCA8IDApIHsgcmV0dXJuIDAgfVxuXG4gICAgICBpZiAobWl4IDw9IDAuNSkgeyByZXR1cm4gMSB9XG5cbiAgICAgIHJldHVybiAxIC0gKChtaXggLSAwLjUpICogMilcbiAgICB9LFxuXG4gICAgZ2V0V2V0TGV2ZWw6IGZ1bmN0aW9uIChtaXgpIHtcbiAgICAgIGlmICghUHouVXRpbC5pc051bWJlcihtaXgpIHx8IG1peCA+IDEgfHwgbWl4IDwgMCkgeyByZXR1cm4gMCB9XG5cbiAgICAgIGlmIChtaXggPj0gMC41KSB7IHJldHVybiAxIH1cblxuICAgICAgcmV0dXJuIDEgLSAoKDAuNSAtIG1peCkgKiAyKVxuICAgIH1cbiAgfVxuXHQvKiBJbiBvcmRlciB0byBhbGxvdyBhbiBBdWRpb05vZGUgdG8gY29ubmVjdCB0byBhIFBpenppY2F0b1xuXHRFZmZlY3Qgb2JqZWN0LCB3ZSBtdXN0IHNoaW0gaXRzIGNvbm5lY3QgbWV0aG9kICovXG4gIHZhciBnYWluTm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICB2YXIgYXVkaW9Ob2RlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKE9iamVjdC5nZXRQcm90b3R5cGVPZihnYWluTm9kZSkpXG4gIHZhciBjb25uZWN0ID0gYXVkaW9Ob2RlLmNvbm5lY3RcblxuICBhdWRpb05vZGUuY29ubmVjdCA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgdmFyIGVuZHBvaW50ID0gUHouVXRpbC5pc0VmZmVjdChub2RlKSA/IG5vZGUuaW5wdXROb2RlIDogbm9kZVxuICAgIGNvbm5lY3QuY2FsbCh0aGlzLCBlbmRwb2ludClcbiAgICByZXR1cm4gbm9kZVxuICB9XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFBpenppY2F0bywgJ3ZvbHVtZScsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbWFzdGVyR2Fpbk5vZGUuZ2Fpbi52YWx1ZVxuICAgIH0sXG5cbiAgICBzZXQ6IGZ1bmN0aW9uICh2b2x1bWUpIHtcbiAgICAgIGlmIChQei5VdGlsLmlzSW5SYW5nZSh2b2x1bWUsIDAsIDEpICYmIG1hc3RlckdhaW5Ob2RlKSB7IG1hc3RlckdhaW5Ob2RlLmdhaW4udmFsdWUgPSB2b2x1bWUgfVxuICAgIH1cbiAgfSlcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUGl6emljYXRvLCAnbWFzdGVyR2Fpbk5vZGUnLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG5cbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBtYXN0ZXJHYWluTm9kZVxuICAgIH0sXG5cbiAgICBzZXQ6IGZ1bmN0aW9uICh2b2x1bWUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NhblxcJ3Qgc2V0IHRoZSBtYXN0ZXIgZ2FpbiBub2RlJylcbiAgICB9XG4gIH0pXG4gIFBpenppY2F0by5FdmVudHMgPSB7XG5cblx0XHRcdC8qKlxuXHRcdFx0ICogQWRkcyBhbiBldmVudCBoYW5kbGVyIHRoYXQgd2lsbCBiZSB0cmVhdGVkIHVwb25cblx0XHRcdCAqIHRoZSB0cmlnZ2VyaW5nIG9mIHRoYXQgZXZlbnQuXG5cdFx0XHQgKi9cbiAgICBvbjogZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgICBpZiAoIW5hbWUgfHwgIWNhbGxiYWNrKSB7IHJldHVybiB9XG5cbiAgICAgIHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fVxuICAgICAgdmFyIF9ldmVudCA9IHRoaXMuX2V2ZW50c1tuYW1lXSB8fCAodGhpcy5fZXZlbnRzW25hbWVdID0gW10pXG5cbiAgICAgIF9ldmVudC5wdXNoKHtcbiAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgICBjb250ZXh0OiBjb250ZXh0IHx8IHRoaXMsXG4gICAgICAgIGhhbmRsZXI6IHRoaXNcbiAgICAgIH0pXG4gICAgfSxcblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBUcmlnZ2VycyBhIHBhcnRpY3VsYXIgZXZlbnQuIElmIGEgaGFuZGxlclxuXHRcdFx0ICogaXMgbGlua2VkIHRvIHRoYXQgZXZlbnQsIHRoZSBoYW5kbGVyIHdpbGwgYmVcblx0XHRcdCAqIGV4ZWN1dGVkLlxuXHRcdFx0ICovXG4gICAgdHJpZ2dlcjogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIGlmICghbmFtZSkgeyByZXR1cm4gfVxuXG4gICAgICB2YXIgX2V2ZW50LCBsZW5ndGgsIGFyZ3MsIGlcblxuICAgICAgdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9XG4gICAgICBfZXZlbnQgPSB0aGlzLl9ldmVudHNbbmFtZV0gfHwgKHRoaXMuX2V2ZW50c1tuYW1lXSA9IFtdKVxuXG4gICAgICBpZiAoIV9ldmVudCkgeyByZXR1cm4gfVxuXG4gICAgICBsZW5ndGggPSBNYXRoLm1heCgwLCBhcmd1bWVudHMubGVuZ3RoIC0gMSlcbiAgICAgIGFyZ3MgPSBbXVxuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV0gfVxuXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgX2V2ZW50Lmxlbmd0aDsgaSsrKSB7IF9ldmVudFtpXS5jYWxsYmFjay5hcHBseShfZXZlbnRbaV0uY29udGV4dCwgYXJncykgfVxuICAgIH0sXG5cblx0XHRcdC8qKlxuXHRcdFx0ICogUmVtb3ZlcyBhbiBldmVudCBoYW5kbGVyLiBJZiBubyBuYW1lIGlzIHByb3ZpZGVkLFxuXHRcdFx0ICogYWxsIGhhbmRsZXJzIGZvciB0aGlzIG9iamVjdCB3aWxsIGJlIHJlbW92ZWQuXG5cdFx0XHQgKi9cbiAgICBvZmY6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICBpZiAobmFtZSkgeyB0aGlzLl9ldmVudHNbbmFtZV0gPSB1bmRlZmluZWQgfSBlbHNlXHRcdFx0XHRcdHsgdGhpcy5fZXZlbnRzID0ge30gfVxuICAgIH1cblxuICB9XG4gIFBpenppY2F0by5Tb3VuZCA9IGZ1bmN0aW9uIChkZXNjcmlwdGlvbiwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXNcbiAgICB2YXIgdXRpbCA9IFBpenppY2F0by5VdGlsXG4gICAgdmFyIGRlc2NyaXB0aW9uRXJyb3IgPSBnZXREZXNjcmlwdGlvbkVycm9yKGRlc2NyaXB0aW9uKVxuICAgIHZhciBoYXNPcHRpb25zID0gdXRpbC5pc09iamVjdChkZXNjcmlwdGlvbikgJiYgdXRpbC5pc09iamVjdChkZXNjcmlwdGlvbi5vcHRpb25zKVxuICAgIHZhciBkZWZhdWx0QXR0YWNrID0gMC4wNFxuICAgIHZhciBkZWZhdWx0UmVsZWFzZSA9IDAuMDRcblxuICAgIGlmIChkZXNjcmlwdGlvbkVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGRlc2NyaXB0aW9uRXJyb3IpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGluaXRpYWxpemluZyBQaXp6aWNhdG8gU291bmQ6ICcgKyBkZXNjcmlwdGlvbkVycm9yKVxuICAgIH1cblxuICAgIHRoaXMuZGV0YWNoZWQgPSBoYXNPcHRpb25zICYmIGRlc2NyaXB0aW9uLm9wdGlvbnMuZGV0YWNoZWRcbiAgICB0aGlzLm1hc3RlclZvbHVtZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgIHRoaXMuZmFkZU5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLmZhZGVOb2RlLmdhaW4udmFsdWUgPSAwXG5cbiAgICBpZiAoIXRoaXMuZGV0YWNoZWQpIHsgdGhpcy5tYXN0ZXJWb2x1bWUuY29ubmVjdChQaXp6aWNhdG8ubWFzdGVyR2Fpbk5vZGUpIH1cblxuICAgIHRoaXMubGFzdFRpbWVQbGF5ZWQgPSAwXG4gICAgdGhpcy5lZmZlY3RzID0gW11cbiAgICB0aGlzLmVmZmVjdENvbm5lY3RvcnMgPSBbXVxuICAgIHRoaXMucGxheWluZyA9IHRoaXMucGF1c2VkID0gZmFsc2VcbiAgICB0aGlzLmxvb3AgPSBoYXNPcHRpb25zICYmIGRlc2NyaXB0aW9uLm9wdGlvbnMubG9vcFxuICAgIHRoaXMuYXR0YWNrID0gaGFzT3B0aW9ucyAmJiB1dGlsLmlzTnVtYmVyKGRlc2NyaXB0aW9uLm9wdGlvbnMuYXR0YWNrKSA/IGRlc2NyaXB0aW9uLm9wdGlvbnMuYXR0YWNrIDogZGVmYXVsdEF0dGFja1xuICAgIHRoaXMudm9sdW1lID0gaGFzT3B0aW9ucyAmJiB1dGlsLmlzTnVtYmVyKGRlc2NyaXB0aW9uLm9wdGlvbnMudm9sdW1lKSA/IGRlc2NyaXB0aW9uLm9wdGlvbnMudm9sdW1lIDogMVxuXG4gICAgaWYgKGhhc09wdGlvbnMgJiYgdXRpbC5pc051bWJlcihkZXNjcmlwdGlvbi5vcHRpb25zLnJlbGVhc2UpKSB7XG4gICAgICB0aGlzLnJlbGVhc2UgPSBkZXNjcmlwdGlvbi5vcHRpb25zLnJlbGVhc2VcbiAgICB9IGVsc2UgaWYgKGhhc09wdGlvbnMgJiYgdXRpbC5pc051bWJlcihkZXNjcmlwdGlvbi5vcHRpb25zLnN1c3RhaW4pKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1xcJ3N1c3RhaW5cXCcgaXMgZGVwcmVjYXRlZC4gVXNlIFxcJ3JlbGVhc2VcXCcgaW5zdGVhZC4nKVxuICAgICAgdGhpcy5yZWxlYXNlID0gZGVzY3JpcHRpb24ub3B0aW9ucy5zdXN0YWluXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVsZWFzZSA9IGRlZmF1bHRSZWxlYXNlXG4gICAgfVxuXG4gICAgaWYgKCFkZXNjcmlwdGlvbikgeyAoaW5pdGlhbGl6ZVdpdGhXYXZlLmJpbmQodGhpcykpKHt9LCBjYWxsYmFjaykgfSBlbHNlIGlmICh1dGlsLmlzU3RyaW5nKGRlc2NyaXB0aW9uKSkgeyAoaW5pdGlhbGl6ZVdpdGhVcmwuYmluZCh0aGlzKSkoZGVzY3JpcHRpb24sIGNhbGxiYWNrKSB9IGVsc2UgaWYgKHV0aWwuaXNGdW5jdGlvbihkZXNjcmlwdGlvbikpIHsgKGluaXRpYWxpemVXaXRoRnVuY3Rpb24uYmluZCh0aGlzKSkoZGVzY3JpcHRpb24sIGNhbGxiYWNrKSB9IGVsc2UgaWYgKGRlc2NyaXB0aW9uLnNvdXJjZSA9PT0gJ2ZpbGUnKSB7IChpbml0aWFsaXplV2l0aFVybC5iaW5kKHRoaXMpKShkZXNjcmlwdGlvbi5vcHRpb25zLnBhdGgsIGNhbGxiYWNrKSB9IGVsc2UgaWYgKGRlc2NyaXB0aW9uLnNvdXJjZSA9PT0gJ3dhdmUnKSB7IChpbml0aWFsaXplV2l0aFdhdmUuYmluZCh0aGlzKSkoZGVzY3JpcHRpb24ub3B0aW9ucywgY2FsbGJhY2spIH0gZWxzZSBpZiAoZGVzY3JpcHRpb24uc291cmNlID09PSAnaW5wdXQnKSB7IChpbml0aWFsaXplV2l0aElucHV0LmJpbmQodGhpcykpKGRlc2NyaXB0aW9uLCBjYWxsYmFjaykgfSBlbHNlIGlmIChkZXNjcmlwdGlvbi5zb3VyY2UgPT09ICdzY3JpcHQnKSB7IChpbml0aWFsaXplV2l0aEZ1bmN0aW9uLmJpbmQodGhpcykpKGRlc2NyaXB0aW9uLm9wdGlvbnMsIGNhbGxiYWNrKSB9IGVsc2UgaWYgKGRlc2NyaXB0aW9uLnNvdXJjZSA9PT0gJ3NvdW5kJykgeyAoaW5pdGlhbGl6ZVdpdGhTb3VuZE9iamVjdC5iaW5kKHRoaXMpKShkZXNjcmlwdGlvbi5vcHRpb25zLCBjYWxsYmFjaykgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RGVzY3JpcHRpb25FcnJvciAoZGVzY3JpcHRpb24pIHtcbiAgICAgIHZhciBzdXBwb3J0ZWRTb3VyY2VzID0gWyd3YXZlJywgJ2ZpbGUnLCAnaW5wdXQnLCAnc2NyaXB0JywgJ3NvdW5kJ11cblxuICAgICAgaWYgKGRlc2NyaXB0aW9uICYmICghdXRpbC5pc0Z1bmN0aW9uKGRlc2NyaXB0aW9uKSAmJiAhdXRpbC5pc1N0cmluZyhkZXNjcmlwdGlvbikgJiYgIXV0aWwuaXNPYmplY3QoZGVzY3JpcHRpb24pKSkgeyByZXR1cm4gJ0Rlc2NyaXB0aW9uIHR5cGUgbm90IHN1cHBvcnRlZC4gSW5pdGlhbGl6ZSBhIHNvdW5kIHVzaW5nIGFuIG9iamVjdCwgYSBmdW5jdGlvbiBvciBhIHN0cmluZy4nIH1cblxuICAgICAgaWYgKHV0aWwuaXNPYmplY3QoZGVzY3JpcHRpb24pKSB7XG4gICAgICAgIGlmICghdXRpbC5pc1N0cmluZyhkZXNjcmlwdGlvbi5zb3VyY2UpIHx8IHN1cHBvcnRlZFNvdXJjZXMuaW5kZXhPZihkZXNjcmlwdGlvbi5zb3VyY2UpID09PSAtMSkgeyByZXR1cm4gJ1NwZWNpZmllZCBzb3VyY2Ugbm90IHN1cHBvcnRlZC4gU291cmNlcyBjYW4gYmUgd2F2ZSwgZmlsZSwgaW5wdXQgb3Igc2NyaXB0JyB9XG5cbiAgICAgICAgaWYgKGRlc2NyaXB0aW9uLnNvdXJjZSA9PT0gJ2ZpbGUnICYmICghZGVzY3JpcHRpb24ub3B0aW9ucyB8fCAhZGVzY3JpcHRpb24ub3B0aW9ucy5wYXRoKSkgeyByZXR1cm4gJ0EgcGF0aCBpcyBuZWVkZWQgZm9yIHNvdW5kcyB3aXRoIGEgZmlsZSBzb3VyY2UnIH1cblxuICAgICAgICBpZiAoZGVzY3JpcHRpb24uc291cmNlID09PSAnc2NyaXB0JyAmJiAoIWRlc2NyaXB0aW9uLm9wdGlvbnMgfHwgIWRlc2NyaXB0aW9uLm9wdGlvbnMuYXVkaW9GdW5jdGlvbikpIHsgcmV0dXJuICdBbiBhdWRpbyBmdW5jdGlvbiBpcyBuZWVkZWQgZm9yIHNvdW5kcyB3aXRoIGEgc2NyaXB0IHNvdXJjZScgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXRpYWxpemVXaXRoV2F2ZSAod2F2ZU9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgICB3YXZlT3B0aW9ucyA9IHdhdmVPcHRpb25zIHx8IHt9XG4gICAgICB0aGlzLmdldFJhd1NvdXJjZU5vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmcmVxdWVuY3kgPSB0aGlzLnNvdXJjZU5vZGUgPyB0aGlzLnNvdXJjZU5vZGUuZnJlcXVlbmN5LnZhbHVlIDogd2F2ZU9wdGlvbnMuZnJlcXVlbmN5XG4gICAgICAgIHZhciBub2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlT3NjaWxsYXRvcigpXG4gICAgICAgIG5vZGUudHlwZSA9IHdhdmVPcHRpb25zLnR5cGUgfHwgJ3NpbmUnXG4gICAgICAgIG5vZGUuZnJlcXVlbmN5LnZhbHVlID0gKGZyZXF1ZW5jeSB8fCA0NDApXG5cbiAgICAgICAgcmV0dXJuIG5vZGVcbiAgICAgIH1cbiAgICAgIHRoaXMuc291cmNlTm9kZSA9IHRoaXMuZ2V0UmF3U291cmNlTm9kZSgpXG4gICAgICB0aGlzLnNvdXJjZU5vZGUuZ2FpblN1Y2Nlc3NvciA9IFB6LmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgICB0aGlzLnNvdXJjZU5vZGUuY29ubmVjdCh0aGlzLnNvdXJjZU5vZGUuZ2FpblN1Y2Nlc3NvcilcblxuICAgICAgaWYgKHV0aWwuaXNGdW5jdGlvbihjYWxsYmFjaykpIHsgY2FsbGJhY2soKSB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdGlhbGl6ZVdpdGhVcmwgKHBhdGhzLCBjYWxsYmFjaykge1xuICAgICAgcGF0aHMgPSB1dGlsLmlzQXJyYXkocGF0aHMpID8gcGF0aHMgOiBbcGF0aHNdXG5cbiAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcbiAgICAgIHJlcXVlc3Qub3BlbignR0VUJywgcGF0aHNbMF0sIHRydWUpXG4gICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcidcblxuICAgICAgcmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbiAocHJvZ3Jlc3NFdmVudCkge1xuICAgICAgICBQaXp6aWNhdG8uY29udGV4dC5kZWNvZGVBdWRpb0RhdGEocHJvZ3Jlc3NFdmVudC50YXJnZXQucmVzcG9uc2UsIGZ1bmN0aW9uIChidWZmZXIpIHtcbiAgICAgICAgICBzZWxmLmdldFJhd1NvdXJjZU5vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpXG4gICAgICAgICAgICBub2RlLmxvb3AgPSB0aGlzLmxvb3BcbiAgICAgICAgICAgIG5vZGUuYnVmZmVyID0gYnVmZmVyXG4gICAgICAgICAgICByZXR1cm4gbm9kZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodXRpbC5pc0Z1bmN0aW9uKGNhbGxiYWNrKSkgeyBjYWxsYmFjaygpIH1cbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVjb2RpbmcgYXVkaW8gZmlsZSAnICsgcGF0aHNbMF0pXG5cbiAgICAgICAgICBpZiAocGF0aHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgcGF0aHMuc2hpZnQoKVxuICAgICAgICAgICAgaW5pdGlhbGl6ZVdpdGhVcmwocGF0aHMsIGNhbGxiYWNrKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZXJyb3IgPSBlcnJvciB8fCBuZXcgRXJyb3IoJ0Vycm9yIGRlY29kaW5nIGF1ZGlvIGZpbGUgJyArIHBhdGhzWzBdKVxuXG4gICAgICAgICAgaWYgKHV0aWwuaXNGdW5jdGlvbihjYWxsYmFjaykpIHsgY2FsbGJhY2soZXJyb3IpIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgPT09IDQgJiYgcmVxdWVzdC5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdoaWxlIGZldGNoaW5nICcgKyBwYXRoc1swXSArICcuICcgKyByZXF1ZXN0LnN0YXR1c1RleHQpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlcXVlc3Quc2VuZCgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdGlhbGl6ZVdpdGhJbnB1dCAob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSAobmF2aWdhdG9yLmdldFVzZXJNZWRpYSB8fCBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEgfHwgbmF2aWdhdG9yLm1zR2V0VXNlck1lZGlhKVxuXG4gICAgICBpZiAoIW5hdmlnYXRvci5nZXRVc2VyTWVkaWEpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignWW91ciBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgZ2V0VXNlck1lZGlhJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEoe1xuICAgICAgICBhdWRpbzogdHJ1ZVxuICAgICAgfSwgZnVuY3Rpb24gKHN0cmVhbSkge1xuICAgICAgICBzZWxmLmdldFJhd1NvdXJjZU5vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIFBpenppY2F0by5jb250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKHN0cmVhbSlcbiAgICAgICAgfVxuICAgICAgICBpZiAodXRpbC5pc0Z1bmN0aW9uKGNhbGxiYWNrKSkgeyBjYWxsYmFjaygpIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBpZiAodXRpbC5pc0Z1bmN0aW9uKGNhbGxiYWNrKSkgeyBjYWxsYmFjayhlcnJvcikgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbml0aWFsaXplV2l0aEZ1bmN0aW9uIChvcHRpb25zLCBjYWxsYmFjaykge1xuICAgICAgdmFyIGF1ZGlvRnVuY3Rpb24gPSB1dGlsLmlzRnVuY3Rpb24ob3B0aW9ucykgPyBvcHRpb25zIDogb3B0aW9ucy5hdWRpb0Z1bmN0aW9uXG4gICAgICB2YXIgYnVmZmVyU2l6ZSA9IHV0aWwuaXNPYmplY3Qob3B0aW9ucykgJiYgb3B0aW9ucy5idWZmZXJTaXplID8gb3B0aW9ucy5idWZmZXJTaXplIDogbnVsbFxuXG4gICAgICBpZiAoIWJ1ZmZlclNpemUpIHtcbiAgICAgICAgdHJ5IHsgLy8gV2Via2l0IGRvZXMgbm90IGF1dG9tYXRpY2FsbHkgY2hvc2UgdGhlIGJ1ZmZlciBzaXplXG4gICAgICAgICAgdmFyIHRlc3QgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVTY3JpcHRQcm9jZXNzb3IoKVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgYnVmZmVyU2l6ZSA9IDIwNDhcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmdldFJhd1NvdXJjZU5vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBub2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlU2NyaXB0UHJvY2Vzc29yKGJ1ZmZlclNpemUsIDEsIDEpXG4gICAgICAgIG5vZGUub25hdWRpb3Byb2Nlc3MgPSBhdWRpb0Z1bmN0aW9uXG4gICAgICAgIHJldHVybiBub2RlXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdGlhbGl6ZVdpdGhTb3VuZE9iamVjdCAob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuZ2V0UmF3U291cmNlTm9kZSA9IG9wdGlvbnMuc291bmQuZ2V0UmF3U291cmNlTm9kZVxuXG4gICAgICBpZiAob3B0aW9ucy5zb3VuZC5zb3VyY2VOb2RlICYmIFB6LlV0aWwuaXNPc2NpbGxhdG9yKG9wdGlvbnMuc291bmQuc291cmNlTm9kZSkpIHtcbiAgICAgICAgdGhpcy5zb3VyY2VOb2RlID0gdGhpcy5nZXRSYXdTb3VyY2VOb2RlKClcbiAgICAgICAgdGhpcy5mcmVxdWVuY3kgPSBvcHRpb25zLnNvdW5kLmZyZXF1ZW5jeVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIFBpenppY2F0by5Tb3VuZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBpenppY2F0by5FdmVudHMsIHtcblxuICAgIHBsYXk6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiAod2hlbiwgb2Zmc2V0KSB7XG4gICAgICAgIGlmICh0aGlzLnBsYXlpbmcpIHsgcmV0dXJuIH1cblxuICAgICAgICBpZiAoIVB6LlV0aWwuaXNOdW1iZXIob2Zmc2V0KSkgeyBvZmZzZXQgPSB0aGlzLm9mZnNldFRpbWUgfHwgMCB9XG5cbiAgICAgICAgaWYgKCFQei5VdGlsLmlzTnVtYmVyKHdoZW4pKSB7IHdoZW4gPSAwIH1cblxuICAgICAgICB0aGlzLnBsYXlpbmcgPSB0cnVlXG4gICAgICAgIHRoaXMucGF1c2VkID0gZmFsc2VcbiAgICAgICAgdGhpcy5zb3VyY2VOb2RlID0gdGhpcy5nZXRTb3VyY2VOb2RlKClcblxuICAgICAgICB0aGlzLmFwcGx5QXR0YWNrKClcblxuICAgICAgICBpZiAoUHouVXRpbC5pc0Z1bmN0aW9uKHRoaXMuc291cmNlTm9kZS5zdGFydCkpIHtcbiAgICAgICAgICB0aGlzLmxhc3RUaW1lUGxheWVkID0gUGl6emljYXRvLmNvbnRleHQuY3VycmVudFRpbWUgLSBvZmZzZXRcbiAgICAgICAgICB0aGlzLnNvdXJjZU5vZGUuc3RhcnQoUHouY29udGV4dC5jdXJyZW50VGltZSArIHdoZW4sIG9mZnNldClcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcigncGxheScpXG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0b3A6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5wYXVzZWQgJiYgIXRoaXMucGxheWluZykgeyByZXR1cm4gfVxuXG4gICAgICAgIHRoaXMucGF1c2VkID0gdGhpcy5wbGF5aW5nID0gZmFsc2VcbiAgICAgICAgdGhpcy5zdG9wV2l0aFJlbGVhc2UoKVxuXG4gICAgICAgIHRoaXMub2Zmc2V0VGltZSA9IDBcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdzdG9wJylcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcGF1c2U6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnBhdXNlZCB8fCAhdGhpcy5wbGF5aW5nKSB7IHJldHVybiB9XG5cbiAgICAgICAgdGhpcy5wYXVzZWQgPSB0cnVlXG4gICAgICAgIHRoaXMucGxheWluZyA9IGZhbHNlXG5cbiAgICAgICAgdGhpcy5zdG9wV2l0aFJlbGVhc2UoKVxuXG4gICAgICAgIHZhciBlbGFwc2VkVGltZSA9IFB6LmNvbnRleHQuY3VycmVudFRpbWUgLSB0aGlzLmxhc3RUaW1lUGxheWVkXG5cblx0XHRcdFx0Ly8gSWYgd2UgYXJlIHVzaW5nIGEgYnVmZmVyIG5vZGUgLSBwb3RlbnRpYWxseSBpbiBsb29wIG1vZGUgLSB3ZSBuZWVkIHRvXG5cdFx0XHRcdC8vIGtub3cgd2hlcmUgdG8gcmUtc3RhcnQgdGhlIHNvdW5kIGluZGVwZW5kZW50bHkgb2YgdGhlIGxvb3AgaXQgaXMgaW4uXG4gICAgICAgIGlmICh0aGlzLnNvdXJjZU5vZGUuYnVmZmVyKSB7IHRoaXMub2Zmc2V0VGltZSA9IGVsYXBzZWRUaW1lICUgKHRoaXMuc291cmNlTm9kZS5idWZmZXIubGVuZ3RoIC8gUHouY29udGV4dC5zYW1wbGVSYXRlKSB9IGVsc2VcdFx0XHRcdFx0eyB0aGlzLm9mZnNldFRpbWUgPSBlbGFwc2VkVGltZSB9XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdwYXVzZScpXG4gICAgICB9XG4gICAgfSxcblxuICAgIGNsb25lOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2xvbmUgPSBuZXcgUGl6emljYXRvLlNvdW5kKHtcbiAgICAgICAgICBzb3VyY2U6ICdzb3VuZCcsXG4gICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgbG9vcDogdGhpcy5sb29wLFxuICAgICAgICAgICAgYXR0YWNrOiB0aGlzLmF0dGFjayxcbiAgICAgICAgICAgIHJlbGVhc2U6IHRoaXMucmVsZWFzZSxcbiAgICAgICAgICAgIHZvbHVtZTogdGhpcy52b2x1bWUsXG4gICAgICAgICAgICBzb3VuZDogdGhpc1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZWZmZWN0cy5sZW5ndGg7IGkrKykgeyBjbG9uZS5hZGRFZmZlY3QodGhpcy5lZmZlY3RzW2ldKSB9XG5cbiAgICAgICAgcmV0dXJuIGNsb25lXG4gICAgICB9XG4gICAgfSxcblxuICAgIG9uRW5kZWQ6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdC8vIFRoaXMgZnVuY3Rpb24gbWF5J3ZlIGJlZW4gY2FsbGVkIGZyb20gdGhlIHJlbGVhc2Vcblx0XHRcdFx0XHQvLyBlbmQuIElmIGluIHRoYXQgdGltZSB0aGUgU291bmQgaGFzIGJlZW4gcGxheWVkIGFnYWluLFxuXHRcdFx0XHRcdC8vIG5vIGFjdGlvbiBzaG91bGQgYmUgdGFrZW4uXG4gICAgICAgICAgaWYgKCEhdGhpcy5zb3VyY2VOb2RlICYmIHRoaXMuc291cmNlTm9kZSAhPT0gbm9kZSkgeyByZXR1cm4gfVxuXG4gICAgICAgICAgaWYgKHRoaXMucGxheWluZykgeyB0aGlzLnN0b3AoKSB9XG4gICAgICAgICAgaWYgKCF0aGlzLnBhdXNlZCkgeyB0aGlzLnRyaWdnZXIoJ2VuZCcpIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cblx0XHQvKipcblx0XHQgKiBBZGRpbmcgZWZmZWN0cyB3aWxsIGNyZWF0ZSBhIGdyYXBoIGluIHdoaWNoIHRoZXJlIHdpbGwgYmUgYVxuXHRcdCAqIGdhaW4gbm9kZSAoZWZmZWN0Q29ubmVjdG9yKSBpbiBiZXR3ZWVuIGV2ZXJ5IGVmZmVjdCBhZGRlZC4gRm9yIGV4YW1wbGU6XG5cdFx0ICogW2ZhZGVOb2RlXS0tLT5bZWZmZWN0IDFdLT5bY29ubmVjdG9yIDFdLS0tPltlZmZlY3QgMl0tPltjb25uZWN0b3IgMl0tLS0+W21hc3RlckdhaW5dXG5cdFx0ICpcblx0XHQgKiBDb25uZWN0b3JzIGFyZSB1c2VkIHRvIGtub3cgd2hhdCBub2RlcyB0byBkaXNjb25uZWN0IGFuZCBub3QgZGlzcnVwdCB0aGVcblx0XHQgKiBjb25uZWN0aW9ucyBvZiBhbm90aGVyIFB6LlNvdW5kIG9iamVjdCB1c2luZyB0aGUgc2FtZSBlZmZlY3QuXG5cdFx0ICovXG4gICAgYWRkRWZmZWN0OiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKGVmZmVjdCkge1xuICAgICAgICBpZiAoIVB6LlV0aWwuaXNFZmZlY3QoZWZmZWN0KSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoZSBvYmplY3QgcHJvdmlkZWQgaXMgbm90IGEgUGl6emljYXRvIGVmZmVjdC4nKVxuICAgICAgICAgIHJldHVybiB0aGlzXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVmZmVjdHMucHVzaChlZmZlY3QpXG5cblx0XHRcdFx0Ly8gQ29ubmVjdHMgZWZmZWN0IGluIHRoZSBsYXN0IHBvc2l0aW9uXG4gICAgICAgIHZhciBwcmV2aW91c05vZGUgPSB0aGlzLmVmZmVjdENvbm5lY3RvcnMubGVuZ3RoID4gMCA/IHRoaXMuZWZmZWN0Q29ubmVjdG9yc1t0aGlzLmVmZmVjdENvbm5lY3RvcnMubGVuZ3RoIC0gMV0gOiB0aGlzLmZhZGVOb2RlXG4gICAgICAgIHByZXZpb3VzTm9kZS5kaXNjb25uZWN0KClcbiAgICAgICAgcHJldmlvdXNOb2RlLmNvbm5lY3QoZWZmZWN0KVxuXG5cdFx0XHRcdC8vIENyZWF0ZXMgY29ubmVjdG9yIGZvciB0aGUgbmV3bHkgYWRkZWQgZWZmZWN0XG4gICAgICAgIHZhciBnYWluID0gUHouY29udGV4dC5jcmVhdGVHYWluKClcbiAgICAgICAgdGhpcy5lZmZlY3RDb25uZWN0b3JzLnB1c2goZ2FpbilcbiAgICAgICAgZWZmZWN0LmNvbm5lY3QoZ2FpbilcbiAgICAgICAgZ2Fpbi5jb25uZWN0KHRoaXMubWFzdGVyVm9sdW1lKVxuXG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgICB9XG4gICAgfSxcblxuXHRcdC8qKlxuXHRcdCAqIFdoZW4gcmVtb3ZpbmcgZWZmZWN0cywgdGhlIGdyYXBoIGluIHdoaWNoIHRoZXJlIHdpbGwgYmUgYVxuXHRcdCAqIGdhaW4gbm9kZSAoZWZmZWN0Q29ubmVjdG9yKSBpbiBiZXR3ZWVuIGV2ZXJ5IGVmZmVjdCBzaG91bGQgYmVcblx0XHQgKiBjb25zZXJ2ZWQuIEZvciBleGFtcGxlOlxuXHRcdCAqIFtmYWRlTm9kZV0tLS0+W2VmZmVjdCAxXS0+W2Nvbm5lY3RvciAxXS0tLT5bZWZmZWN0IDJdLT5bY29ubmVjdG9yIDJdLS0tPlttYXN0ZXJHYWluXVxuXHRcdCAqXG5cdFx0ICogQ29ubmVjdG9ycyBhcmUgdXNlZCB0byBrbm93IHdoYXQgbm9kZXMgdG8gZGlzY29ubmVjdCBhbmQgbm90IGRpc3J1cHQgdGhlXG5cdFx0ICogY29ubmVjdGlvbnMgb2YgYW5vdGhlciBQei5Tb3VuZCBvYmplY3QgdXNpbmcgdGhlIHNhbWUgZWZmZWN0LlxuXHRcdCAqL1xuICAgIHJlbW92ZUVmZmVjdDoge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlZmZlY3QpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5lZmZlY3RzLmluZGV4T2YoZWZmZWN0KVxuXG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0Nhbm5vdCByZW1vdmUgZWZmZWN0IHRoYXQgaXMgbm90IGFwcGxpZWQgdG8gdGhpcyBzb3VuZC4nKVxuICAgICAgICAgIHJldHVybiB0aGlzXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2hvdWxkUmVzdW1lUGxheWluZyA9IHRoaXMucGxheWluZ1xuXG4gICAgICAgIGlmIChzaG91bGRSZXN1bWVQbGF5aW5nKSB7IHRoaXMucGF1c2UoKSB9XG5cbiAgICAgICAgdmFyIHByZXZpb3VzTm9kZSA9IChpbmRleCA9PT0gMCkgPyB0aGlzLmZhZGVOb2RlIDogdGhpcy5lZmZlY3RDb25uZWN0b3JzW2luZGV4IC0gMV1cbiAgICAgICAgcHJldmlvdXNOb2RlLmRpc2Nvbm5lY3QoKVxuXG5cdFx0XHRcdC8vIERpc2Nvbm5lY3QgY29ubmVjdG9yIGFuZCBlZmZlY3RcbiAgICAgICAgdmFyIGVmZmVjdENvbm5lY3RvciA9IHRoaXMuZWZmZWN0Q29ubmVjdG9yc1tpbmRleF1cbiAgICAgICAgZWZmZWN0Q29ubmVjdG9yLmRpc2Nvbm5lY3QoKVxuICAgICAgICBlZmZlY3QuZGlzY29ubmVjdChlZmZlY3RDb25uZWN0b3IpXG5cblx0XHRcdFx0Ly8gUmVtb3ZlIGNvbm5lY3RvciBhbmQgZWZmZWN0IGZyb20gb3VyIGFycmF5c1xuICAgICAgICB0aGlzLmVmZmVjdENvbm5lY3RvcnMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICB0aGlzLmVmZmVjdHMuc3BsaWNlKGluZGV4LCAxKVxuXG4gICAgICAgIHZhciB0YXJnZXROb2RlXG4gICAgICAgIGlmIChpbmRleCA+IHRoaXMuZWZmZWN0cy5sZW5ndGggLSAxIHx8IHRoaXMuZWZmZWN0cy5sZW5ndGggPT09IDApIHsgdGFyZ2V0Tm9kZSA9IHRoaXMubWFzdGVyVm9sdW1lIH0gZWxzZVx0XHRcdFx0XHR7IHRhcmdldE5vZGUgPSB0aGlzLmVmZmVjdHNbaW5kZXhdIH1cblxuICAgICAgICBwcmV2aW91c05vZGUuY29ubmVjdCh0YXJnZXROb2RlKVxuXG4gICAgICAgIGlmIChzaG91bGRSZXN1bWVQbGF5aW5nKSB7IHRoaXMucGxheSgpIH1cblxuICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBjb25uZWN0OiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKGF1ZGlvTm9kZSkge1xuICAgICAgICB0aGlzLm1hc3RlclZvbHVtZS5jb25uZWN0KGF1ZGlvTm9kZSlcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZGlzY29ubmVjdDoge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIChhdWRpb05vZGUpIHtcbiAgICAgICAgdGhpcy5tYXN0ZXJWb2x1bWUuZGlzY29ubmVjdChhdWRpb05vZGUpXG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgICB9XG4gICAgfSxcblxuICAgIGNvbm5lY3RFZmZlY3RzOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29ubmVjdG9ycyA9IFtdXG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmVmZmVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgaXNMYXN0RWZmZWN0ID0gaSA9PT0gdGhpcy5lZmZlY3RzLmxlbmd0aCAtIDFcbiAgICAgICAgICB2YXIgZGVzdGluYXRpb25Ob2RlID0gaXNMYXN0RWZmZWN0ID8gdGhpcy5tYXN0ZXJWb2x1bWUgOiB0aGlzLmVmZmVjdHNbaSArIDFdLmlucHV0Tm9kZVxuXG4gICAgICAgICAgY29ubmVjdG9yc1tpXSA9IFB6LmNvbnRleHQuY3JlYXRlR2FpbigpXG5cbiAgICAgICAgICB0aGlzLmVmZmVjdHNbaV0ub3V0cHV0Tm9kZS5kaXNjb25uZWN0KHRoaXMuZWZmZWN0Q29ubmVjdG9yc1tpXSlcblxuICAgICAgICAgIHRoaXMuZWZmZWN0c1tpXS5vdXRwdXROb2RlLmNvbm5lY3QoZGVzdGluYXRpb25Ob2RlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHZvbHVtZToge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLm1hc3RlclZvbHVtZSkgeyByZXR1cm4gdGhpcy5tYXN0ZXJWb2x1bWUuZ2Fpbi52YWx1ZSB9XG4gICAgICB9LFxuXG4gICAgICBzZXQ6IGZ1bmN0aW9uICh2b2x1bWUpIHtcbiAgICAgICAgaWYgKFB6LlV0aWwuaXNJblJhbmdlKHZvbHVtZSwgMCwgMSkgJiYgdGhpcy5tYXN0ZXJWb2x1bWUpIHsgdGhpcy5tYXN0ZXJWb2x1bWUuZ2Fpbi52YWx1ZSA9IHZvbHVtZSB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGZyZXF1ZW5jeToge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZU5vZGUgJiYgUHouVXRpbC5pc09zY2lsbGF0b3IodGhpcy5zb3VyY2VOb2RlKSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnNvdXJjZU5vZGUuZnJlcXVlbmN5LnZhbHVlXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAoZnJlcXVlbmN5KSB7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZU5vZGUgJiYgUHouVXRpbC5pc09zY2lsbGF0b3IodGhpcy5zb3VyY2VOb2RlKSkge1xuICAgICAgICAgIHRoaXMuc291cmNlTm9kZS5mcmVxdWVuY3kudmFsdWUgPSBmcmVxdWVuY3lcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cblx0XHQvKipcblx0IFx0ICogQGRlcHJlY2F0ZWQgLSBVc2UgXCJyZWxlYXNlXCJcblx0XHQgKi9cbiAgICBzdXN0YWluOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdcXCdzdXN0YWluXFwnIGlzIGRlcHJlY2F0ZWQuIFVzZSBcXCdyZWxlYXNlXFwnIGluc3RlYWQuJylcbiAgICAgICAgcmV0dXJuIHRoaXMucmVsZWFzZVxuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAoc3VzdGFpbikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1xcJ3N1c3RhaW5cXCcgaXMgZGVwcmVjYXRlZC4gVXNlIFxcJ3JlbGVhc2VcXCcgaW5zdGVhZC4nKVxuXG4gICAgICAgIGlmIChQei5VdGlsLmlzSW5SYW5nZShzdXN0YWluLCAwLCAxMCkpIHsgdGhpcy5yZWxlYXNlID0gc3VzdGFpbiB9XG4gICAgICB9XG4gICAgfSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgdGhlIG5vZGUgdGhhdCBwcm9kdWNlcyB0aGUgc291bmQuIEZvciBleGFtcGxlLCBhbiBvc2NpbGxhdG9yXG5cdFx0ICogaWYgdGhlIFNvdW5kIG9iamVjdCB3YXMgaW5pdGlhbGl6ZWQgd2l0aCBhIHdhdmUgb3B0aW9uLlxuXHRcdCAqL1xuICAgIGdldFNvdXJjZU5vZGU6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZU5vZGUpIHtcblx0XHRcdFx0XHQvLyBEaXJlY3RseSBkaXNjb25uZWN0aW5nIHRoZSBwcmV2aW91cyBzb3VyY2Ugbm9kZSBjYXVzZXMgYVxuXHRcdFx0XHRcdC8vICdjbGljaycgbm9pc2UsIGVzcGVjaWFsbHkgbm90aWNlYWJsZSBpZiB0aGUgc291bmQgaXMgcGxheWVkXG5cdFx0XHRcdFx0Ly8gd2hpbGUgdGhlIHJlbGVhc2UgaXMgb25nb2luZy4gVG8gYWRkcmVzcyB0aGlzLCB3ZSBmYWRlb3V0IHRoZVxuXHRcdFx0XHRcdC8vIG9sZCBzb3VyY2Ugbm9kZSBiZWZvcmUgZGlzb25uZWN0aW5nIGl0LlxuXG4gICAgICAgICAgdmFyIHByZXZpb3VzU291cmNlTm9kZSA9IHRoaXMuc291cmNlTm9kZVxuICAgICAgICAgIHByZXZpb3VzU291cmNlTm9kZS5nYWluU3VjY2Vzc29yLmdhaW4uc2V0VmFsdWVBdFRpbWUocHJldmlvdXNTb3VyY2VOb2RlLmdhaW5TdWNjZXNzb3IuZ2Fpbi52YWx1ZSwgUHouY29udGV4dC5jdXJyZW50VGltZSlcbiAgICAgICAgICBwcmV2aW91c1NvdXJjZU5vZGUuZ2FpblN1Y2Nlc3Nvci5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAuMDAwMSwgUHouY29udGV4dC5jdXJyZW50VGltZSArIDAuMilcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHByZXZpb3VzU291cmNlTm9kZS5kaXNjb25uZWN0KClcbiAgICAgICAgICAgIHByZXZpb3VzU291cmNlTm9kZS5nYWluU3VjY2Vzc29yLmRpc2Nvbm5lY3QoKVxuICAgICAgICAgIH0sIDIwMClcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzb3VyY2VOb2RlID0gdGhpcy5nZXRSYXdTb3VyY2VOb2RlKClcblxuXHRcdFx0XHQvLyBBIGdhaW4gbm9kZSB3aWxsIGJlIHBsYWNlZCBhZnRlciB0aGUgc291cmNlIG5vZGUgdG8gYXZvaWRcblx0XHRcdFx0Ly8gY2xpY2tpbmcgbm9pc2VzIChieSBmYWRpbmcgb3V0IHRoZSBzb3VuZClcbiAgICAgICAgc291cmNlTm9kZS5nYWluU3VjY2Vzc29yID0gUHouY29udGV4dC5jcmVhdGVHYWluKClcbiAgICAgICAgc291cmNlTm9kZS5jb25uZWN0KHNvdXJjZU5vZGUuZ2FpblN1Y2Nlc3NvcilcbiAgICAgICAgc291cmNlTm9kZS5nYWluU3VjY2Vzc29yLmNvbm5lY3QodGhpcy5mYWRlTm9kZSlcbiAgICAgICAgdGhpcy5mYWRlTm9kZS5jb25uZWN0KHRoaXMuZ2V0SW5wdXROb2RlKCkpXG5cbiAgICAgICAgaWYgKFB6LlV0aWwuaXNBdWRpb0J1ZmZlclNvdXJjZU5vZGUoc291cmNlTm9kZSkpIHsgc291cmNlTm9kZS5vbmVuZGVkID0gdGhpcy5vbkVuZGVkKHNvdXJjZU5vZGUpLmJpbmQodGhpcykgfVxuXG4gICAgICAgIHJldHVybiBzb3VyY2VOb2RlXG4gICAgICB9XG4gICAgfSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgdGhlIGZpcnN0IG5vZGUgaW4gdGhlIGdyYXBoLiBXaGVuIHRoZXJlIGFyZSBlZmZlY3RzLFxuXHRcdCAqIHRoZSBmaXJzdCBub2RlIGlzIHRoZSBpbnB1dCBub2RlIG9mIHRoZSBmaXJzdCBlZmZlY3QuXG5cdFx0ICovXG4gICAgZ2V0SW5wdXROb2RlOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5lZmZlY3RzLmxlbmd0aCA+IDApIHsgcmV0dXJuIHRoaXMuZWZmZWN0c1swXS5pbnB1dE5vZGUgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLm1hc3RlclZvbHVtZVxuICAgICAgfVxuICAgIH0sXG5cblx0XHQvKipcblx0XHQgKiBXaWxsIHRha2UgdGhlIGN1cnJlbnQgc291cmNlIG5vZGUgYW5kIHdvcmsgdXAgdGhlIHZvbHVtZVxuXHRcdCAqIGdyYWR1YWxseSBpbiBhcyBtdWNoIHRpbWUgYXMgc3BlY2lmaWVkIGluIHRoZSBhdHRhY2sgcHJvcGVydHlcblx0XHQgKiBvZiB0aGUgc291bmQuXG5cdFx0ICovXG4gICAgYXBwbHlBdHRhY2s6IHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gdGhpcy5mYWRlTm9kZS5nYWluLnZhbHVlXG4gICAgICAgIHRoaXMuZmFkZU5vZGUuZ2Fpbi5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoUHouY29udGV4dC5jdXJyZW50VGltZSlcbiAgICAgICAgdGhpcy5mYWRlTm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKGN1cnJlbnRWYWx1ZSwgUHouY29udGV4dC5jdXJyZW50VGltZSlcblxuICAgICAgICBpZiAoIXRoaXMuYXR0YWNrKSB7XG4gICAgICAgICAgdGhpcy5mYWRlTm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKDEuMCwgUGl6emljYXRvLmNvbnRleHQuY3VycmVudFRpbWUpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVtYWluaW5nQXR0YWNrVGltZSA9ICgxIC0gdGhpcy5mYWRlTm9kZS5nYWluLnZhbHVlKSAqIHRoaXMuYXR0YWNrXG4gICAgICAgIHRoaXMuZmFkZU5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSh0aGlzLmZhZGVOb2RlLmdhaW4udmFsdWUsIFBpenppY2F0by5jb250ZXh0LmN1cnJlbnRUaW1lKVxuICAgICAgICB0aGlzLmZhZGVOb2RlLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMSwgUGl6emljYXRvLmNvbnRleHQuY3VycmVudFRpbWUgKyByZW1haW5pbmdBdHRhY2tUaW1lKVxuICAgICAgfVxuICAgIH0sXG5cblx0XHQvKipcblx0XHQgKiBXaWxsIHRha2UgdGhlIGN1cnJlbnQgc291cmNlIG5vZGUgYW5kIHdvcmsgZG93biB0aGUgdm9sdW1lXG5cdFx0ICogZ3JhZHVhbGx5IGluIGFzIG11Y2ggdGltZSBhcyBzcGVjaWZpZWQgaW4gdGhlIHJlbGVhc2UgcHJvcGVydHlcblx0XHQgKiBvZiB0aGUgc291bmQgYmVmb3JlIHN0b3BwaW5nIHRoZSBzb3VyY2Ugbm9kZS5cblx0XHQgKi9cbiAgICBzdG9wV2l0aFJlbGVhc2U6IHtcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBub2RlID0gdGhpcy5zb3VyY2VOb2RlXG4gICAgICAgIHZhciBzdG9wU291bmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIFB6LlV0aWwuaXNGdW5jdGlvbihub2RlLnN0b3ApID8gbm9kZS5zdG9wKDApIDogbm9kZS5kaXNjb25uZWN0KClcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSB0aGlzLmZhZGVOb2RlLmdhaW4udmFsdWVcbiAgICAgICAgdGhpcy5mYWRlTm9kZS5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhQei5jb250ZXh0LmN1cnJlbnRUaW1lKVxuICAgICAgICB0aGlzLmZhZGVOb2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUoY3VycmVudFZhbHVlLCBQei5jb250ZXh0LmN1cnJlbnRUaW1lKVxuXG4gICAgICAgIGlmICghdGhpcy5yZWxlYXNlKSB7XG4gICAgICAgICAgc3RvcFNvdW5kKClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZW1haW5pbmdSZWxlYXNlVGltZSA9IHRoaXMuZmFkZU5vZGUuZ2Fpbi52YWx1ZSAqIHRoaXMucmVsZWFzZVxuICAgICAgICB0aGlzLmZhZGVOb2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodGhpcy5mYWRlTm9kZS5nYWluLnZhbHVlLCBQaXp6aWNhdG8uY29udGV4dC5jdXJyZW50VGltZSlcbiAgICAgICAgdGhpcy5mYWRlTm9kZS5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAuMDAwMDEsIFBpenppY2F0by5jb250ZXh0LmN1cnJlbnRUaW1lICsgcmVtYWluaW5nUmVsZWFzZVRpbWUpXG5cbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHN0b3BTb3VuZCgpXG4gICAgICAgIH0sIHJlbWFpbmluZ1JlbGVhc2VUaW1lICogMTAwMClcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgUGl6emljYXRvLkdyb3VwID0gZnVuY3Rpb24gKHNvdW5kcykge1xuICAgIHNvdW5kcyA9IHNvdW5kcyB8fCBbXVxuXG4gICAgdGhpcy5tZXJnZUdhaW5Ob2RlID0gUHouY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLm1hc3RlclZvbHVtZSA9IFB6LmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgdGhpcy5zb3VuZHMgPSBbXVxuICAgIHRoaXMuZWZmZWN0cyA9IFtdXG4gICAgdGhpcy5lZmZlY3RDb25uZWN0b3JzID0gW11cblxuICAgIHRoaXMubWVyZ2VHYWluTm9kZS5jb25uZWN0KHRoaXMubWFzdGVyVm9sdW1lKVxuICAgIHRoaXMubWFzdGVyVm9sdW1lLmNvbm5lY3QoUHoubWFzdGVyR2Fpbk5vZGUpXG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNvdW5kcy5sZW5ndGg7IGkrKykgeyB0aGlzLmFkZFNvdW5kKHNvdW5kc1tpXSkgfVxuICB9XG5cbiAgUGl6emljYXRvLkdyb3VwLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUHouRXZlbnRzLCB7XG5cbiAgICBjb25uZWN0OiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKGF1ZGlvTm9kZSkge1xuICAgICAgICB0aGlzLm1hc3RlclZvbHVtZS5jb25uZWN0KGF1ZGlvTm9kZSlcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZGlzY29ubmVjdDoge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIChhdWRpb05vZGUpIHtcbiAgICAgICAgdGhpcy5tYXN0ZXJWb2x1bWUuZGlzY29ubmVjdChhdWRpb05vZGUpXG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgICB9XG4gICAgfSxcblxuICAgIGFkZFNvdW5kOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKHNvdW5kKSB7XG4gICAgICAgIGlmICghUHouVXRpbC5pc1NvdW5kKHNvdW5kKSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1lvdSBjYW4gb25seSBhZGQgUGl6emljYXRvLlNvdW5kIG9iamVjdHMnKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNvdW5kcy5pbmRleE9mKHNvdW5kKSA+IC0xKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdUaGUgUGl6emljYXRvLlNvdW5kIG9iamVjdCB3YXMgYWxyZWFkeSBhZGRlZCB0byB0aGlzIGdyb3VwJylcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBpZiAoc291bmQuZGV0YWNoZWQpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0dyb3VwcyBkbyBub3Qgc3VwcG9ydCBkZXRhY2hlZCBzb3VuZHMuIFlvdSBjYW4gbWFudWFsbHkgY3JlYXRlIGFuIGF1ZGlvIGdyYXBoIHRvIGdyb3VwIGRldGFjaGVkIHNvdW5kcyB0b2dldGhlci4nKVxuICAgICAgICB9XG5cbiAgICAgICAgc291bmQuZGlzY29ubmVjdChQei5tYXN0ZXJHYWluTm9kZSlcbiAgICAgICAgc291bmQuY29ubmVjdCh0aGlzLm1lcmdlR2Fpbk5vZGUpXG4gICAgICAgIHRoaXMuc291bmRzLnB1c2goc291bmQpXG4gICAgICB9XG4gICAgfSxcblxuICAgIHJlbW92ZVNvdW5kOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKHNvdW5kKSB7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuc291bmRzLmluZGV4T2Yoc291bmQpXG5cbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignQ2Fubm90IHJlbW92ZSBhIHNvdW5kIHRoYXQgaXMgbm90IHBhcnQgb2YgdGhpcyBncm91cC4nKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgc291bmQuZGlzY29ubmVjdCh0aGlzLm1lcmdlR2Fpbk5vZGUpXG4gICAgICAgIHNvdW5kLmNvbm5lY3QoUHoubWFzdGVyR2Fpbk5vZGUpXG4gICAgICAgIHRoaXMuc291bmRzLnNwbGljZShpbmRleCwgMSlcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdm9sdW1lOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMubWFzdGVyVm9sdW1lKSB7IHJldHVybiB0aGlzLm1hc3RlclZvbHVtZS5nYWluLnZhbHVlIH1cbiAgICAgIH0sXG5cbiAgICAgIHNldDogZnVuY3Rpb24gKHZvbHVtZSkge1xuICAgICAgICBpZiAoUHouVXRpbC5pc0luUmFuZ2Uodm9sdW1lLCAwLCAxKSkgeyB0aGlzLm1hc3RlclZvbHVtZS5nYWluLnZhbHVlID0gdm9sdW1lIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcGxheToge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNvdW5kcy5sZW5ndGg7IGkrKykgeyB0aGlzLnNvdW5kc1tpXS5wbGF5KCkgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcigncGxheScpXG4gICAgICB9XG5cbiAgICB9LFxuXG4gICAgc3RvcDoge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNvdW5kcy5sZW5ndGg7IGkrKykgeyB0aGlzLnNvdW5kc1tpXS5zdG9wKCkgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcignc3RvcCcpXG4gICAgICB9XG5cbiAgICB9LFxuXG4gICAgcGF1c2U6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zb3VuZHMubGVuZ3RoOyBpKyspIHsgdGhpcy5zb3VuZHNbaV0ucGF1c2UoKSB9XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdwYXVzZScpXG4gICAgICB9XG5cbiAgICB9LFxuXG5cdFx0LyoqXG5cdFx0ICogU2ltaWxhcmx5IHRvIFNvdW5kIG9iamVjdHMsIGFkZGluZyBlZmZlY3RzIHdpbGwgY3JlYXRlIGEgZ3JhcGggaW4gd2hpY2ggdGhlcmUgd2lsbCBiZSBhXG5cdFx0ICogZ2FpbiBub2RlIChlZmZlY3RDb25uZWN0b3IpIGluIGJldHdlZW4gZXZlcnkgZWZmZWN0IGFkZGVkLiBGb3IgZXhhbXBsZTpcblx0XHQgKiBbZmFkZU5vZGVdLS0tPltlZmZlY3QgMV0tPltjb25uZWN0b3IgMV0tLS0+W2VmZmVjdCAyXS0+W2Nvbm5lY3RvciAyXS0tLT5bbWFzdGVyR2Fpbl1cblx0XHQgKlxuXHRcdCAqIENvbm5lY3RvcnMgYXJlIHVzZWQgdG8ga25vdyB3aGF0IG5vZGVzIHRvIGRpc2Nvbm5lY3QgYW5kIG5vdCBkaXNydXB0IHRoZVxuXHRcdCAqIGNvbm5lY3Rpb25zIG9mIGFub3RoZXIgUHouR3JvdXAgb2JqZWN0IHVzaW5nIHRoZSBzYW1lIGVmZmVjdC5cblx0XHQgKi9cbiAgICBhZGRFZmZlY3Q6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZWZmZWN0KSB7XG4gICAgICAgIGlmICghUHouVXRpbC5pc0VmZmVjdChlZmZlY3QpKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignVGhlIG9iamVjdCBwcm92aWRlZCBpcyBub3QgYSBQaXp6aWNhdG8gZWZmZWN0LicpXG4gICAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZWZmZWN0cy5wdXNoKGVmZmVjdClcblxuXHRcdFx0XHQvLyBDb25uZWN0cyBlZmZlY3QgaW4gdGhlIGxhc3QgcG9zaXRpb25cbiAgICAgICAgdmFyIHByZXZpb3VzTm9kZSA9IHRoaXMuZWZmZWN0Q29ubmVjdG9ycy5sZW5ndGggPiAwID8gdGhpcy5lZmZlY3RDb25uZWN0b3JzW3RoaXMuZWZmZWN0Q29ubmVjdG9ycy5sZW5ndGggLSAxXSA6IHRoaXMubWVyZ2VHYWluTm9kZVxuICAgICAgICBwcmV2aW91c05vZGUuZGlzY29ubmVjdCgpXG4gICAgICAgIHByZXZpb3VzTm9kZS5jb25uZWN0KGVmZmVjdClcblxuXHRcdFx0XHQvLyBDcmVhdGVzIGNvbm5lY3RvciBmb3IgdGhlIG5ld2x5IGFkZGVkIGVmZmVjdFxuICAgICAgICB2YXIgZ2FpbiA9IFB6LmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgICAgIHRoaXMuZWZmZWN0Q29ubmVjdG9ycy5wdXNoKGdhaW4pXG4gICAgICAgIGVmZmVjdC5jb25uZWN0KGdhaW4pXG4gICAgICAgIGdhaW4uY29ubmVjdCh0aGlzLm1hc3RlclZvbHVtZSlcblxuICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgfVxuICAgIH0sXG5cblx0XHQvKipcblx0XHQgKiBXaGVuIHJlbW92aW5nIGVmZmVjdHMsIHRoZSBncmFwaCBpbiB3aGljaCB0aGVyZSB3aWxsIGJlIGFcblx0XHQgKiBnYWluIG5vZGUgKGVmZmVjdENvbm5lY3RvcikgaW4gYmV0d2VlbiBldmVyeSBlZmZlY3Qgc2hvdWxkIGJlXG5cdFx0ICogY29uc2VydmVkLiBGb3IgZXhhbXBsZTpcblx0XHQgKiBbZmFkZU5vZGVdLS0tPltlZmZlY3QgMV0tPltjb25uZWN0b3IgMV0tLS0+W2VmZmVjdCAyXS0+W2Nvbm5lY3RvciAyXS0tLT5bbWFzdGVyR2Fpbl1cblx0XHQgKlxuXHRcdCAqIENvbm5lY3RvcnMgYXJlIHVzZWQgdG8ga25vdyB3aGF0IG5vZGVzIHRvIGRpc2Nvbm5lY3QgYW5kIG5vdCBkaXNydXB0IHRoZVxuXHRcdCAqIGNvbm5lY3Rpb25zIG9mIGFub3RoZXIgUHouR3JvdXAgb2JqZWN0IHVzaW5nIHRoZSBzYW1lIGVmZmVjdC5cblx0XHQgKi9cbiAgICByZW1vdmVFZmZlY3Q6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZWZmZWN0KSB7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuZWZmZWN0cy5pbmRleE9mKGVmZmVjdClcblxuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdDYW5ub3QgcmVtb3ZlIGVmZmVjdCB0aGF0IGlzIG5vdCBhcHBsaWVkIHRvIHRoaXMgZ3JvdXAuJylcbiAgICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHByZXZpb3VzTm9kZSA9IChpbmRleCA9PT0gMCkgPyB0aGlzLm1lcmdlR2Fpbk5vZGUgOiB0aGlzLmVmZmVjdENvbm5lY3RvcnMoaW5kZXggLSAxKVxuICAgICAgICBwcmV2aW91c05vZGUuZGlzY29ubmVjdCgpXG5cblx0XHRcdFx0Ly8gRGlzY29ubmVjdCBjb25uZWN0b3IgYW5kIGVmZmVjdFxuICAgICAgICB2YXIgZWZmZWN0Q29ubmVjdG9yID0gdGhpcy5lZmZlY3RDb25uZWN0b3JzW2luZGV4XVxuICAgICAgICBlZmZlY3RDb25uZWN0b3IuZGlzY29ubmVjdCgpXG4gICAgICAgIGVmZmVjdC5kaXNjb25uZWN0KGVmZmVjdENvbm5lY3RvcilcblxuXHRcdFx0XHQvLyBSZW1vdmUgY29ubmVjdG9yIGFuZCBlZmZlY3QgZnJvbSBvdXIgYXJyYXlzXG4gICAgICAgIHRoaXMuZWZmZWN0Q29ubmVjdG9ycy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgIHRoaXMuZWZmZWN0cy5zcGxpY2UoaW5kZXgsIDEpXG5cbiAgICAgICAgdmFyIHRhcmdldE5vZGVcbiAgICAgICAgaWYgKGluZGV4ID4gdGhpcy5lZmZlY3RzLmxlbmd0aCAtIDEgfHwgdGhpcy5lZmZlY3RzLmxlbmd0aCA9PT0gMCkgeyB0YXJnZXROb2RlID0gdGhpcy5tYXN0ZXJWb2x1bWUgfSBlbHNlXHRcdFx0XHRcdHsgdGFyZ2V0Tm9kZSA9IHRoaXMuZWZmZWN0c1tpbmRleF0gfVxuXG4gICAgICAgIHByZXZpb3VzTm9kZS5jb25uZWN0KHRhcmdldE5vZGUpXG5cbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgIH1cbiAgICB9XG5cbiAgfSlcbiAgUGl6emljYXRvLkVmZmVjdHMgPSB7fVxuXG4gIHZhciBiYXNlRWZmZWN0ID0gT2JqZWN0LmNyZWF0ZShudWxsLCB7XG5cbiAgICBjb25uZWN0OiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKGF1ZGlvTm9kZSkge1xuICAgICAgICB0aGlzLm91dHB1dE5vZGUuY29ubmVjdChhdWRpb05vZGUpXG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgICB9XG4gICAgfSxcblxuICAgIGRpc2Nvbm5lY3Q6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiAoYXVkaW9Ob2RlKSB7XG4gICAgICAgIHRoaXMub3V0cHV0Tm9kZS5kaXNjb25uZWN0KGF1ZGlvTm9kZSlcbiAgICAgICAgcmV0dXJuIHRoaXNcbiAgICAgIH1cbiAgICB9XG4gIH0pXG4gIFBpenppY2F0by5FZmZlY3RzLkRlbGF5ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSB7fVxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHRoaXMub3B0aW9uc1xuXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgZmVlZGJhY2s6IDAuNSxcbiAgICAgIHRpbWU6IDAuMyxcbiAgICAgIG1peDogMC41XG4gICAgfVxuXG4gICAgdGhpcy5pbnB1dE5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLm91dHB1dE5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLmRyeUdhaW5Ob2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgdGhpcy53ZXRHYWluTm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgIHRoaXMuZmVlZGJhY2tHYWluTm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgIHRoaXMuZGVsYXlOb2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlRGVsYXkoKVxuXG5cdFx0Ly8gbGluZSBpbiB0byBkcnkgbWl4XG4gICAgdGhpcy5pbnB1dE5vZGUuY29ubmVjdCh0aGlzLmRyeUdhaW5Ob2RlKVxuXHRcdC8vIGRyeSBsaW5lIG91dFxuICAgIHRoaXMuZHJ5R2Fpbk5vZGUuY29ubmVjdCh0aGlzLm91dHB1dE5vZGUpXG5cblx0XHQvLyBmZWVkYmFjayBsb29wXG4gICAgdGhpcy5kZWxheU5vZGUuY29ubmVjdCh0aGlzLmZlZWRiYWNrR2Fpbk5vZGUpXG4gICAgdGhpcy5mZWVkYmFja0dhaW5Ob2RlLmNvbm5lY3QodGhpcy5kZWxheU5vZGUpXG5cblx0XHQvLyBsaW5lIGluIHRvIHdldCBtaXhcbiAgICB0aGlzLmlucHV0Tm9kZS5jb25uZWN0KHRoaXMuZGVsYXlOb2RlKVxuXHRcdC8vIHdldCBvdXRcbiAgICB0aGlzLmRlbGF5Tm9kZS5jb25uZWN0KHRoaXMud2V0R2Fpbk5vZGUpXG5cblx0XHQvLyB3ZXQgbGluZSBvdXRcbiAgICB0aGlzLndldEdhaW5Ob2RlLmNvbm5lY3QodGhpcy5vdXRwdXROb2RlKVxuXG4gICAgZm9yICh2YXIga2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICB0aGlzW2tleV0gPSBvcHRpb25zW2tleV1cbiAgICAgIHRoaXNba2V5XSA9ICh0aGlzW2tleV0gPT09IHVuZGVmaW5lZCB8fCB0aGlzW2tleV0gPT09IG51bGwpID8gZGVmYXVsdHNba2V5XSA6IHRoaXNba2V5XVxuICAgIH1cbiAgfVxuXG4gIFBpenppY2F0by5FZmZlY3RzLkRlbGF5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoYmFzZUVmZmVjdCwge1xuXG5cdFx0LyoqXG5cdFx0ICogR2V0cyBhbmQgc2V0cyB0aGUgZHJ5L3dldCBtaXguXG5cdFx0ICovXG4gICAgbWl4OiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5taXhcbiAgICAgIH0sXG5cbiAgICAgIHNldDogZnVuY3Rpb24gKG1peCkge1xuICAgICAgICBpZiAoIVB6LlV0aWwuaXNJblJhbmdlKG1peCwgMCwgMSkpIHsgcmV0dXJuIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMubWl4ID0gbWl4XG4gICAgICAgIHRoaXMuZHJ5R2Fpbk5vZGUuZ2Fpbi52YWx1ZSA9IFBpenppY2F0by5VdGlsLmdldERyeUxldmVsKHRoaXMubWl4KVxuICAgICAgICB0aGlzLndldEdhaW5Ob2RlLmdhaW4udmFsdWUgPSBQaXp6aWNhdG8uVXRpbC5nZXRXZXRMZXZlbCh0aGlzLm1peClcbiAgICAgIH1cbiAgICB9LFxuXG5cdFx0LyoqXG5cdFx0ICogVGltZSBiZXR3ZWVuIGVhY2ggZGVsYXllZCBzb3VuZFxuXHRcdCAqL1xuICAgIHRpbWU6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnRpbWVcbiAgICAgIH0sXG5cbiAgICAgIHNldDogZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgICAgaWYgKCFQei5VdGlsLmlzSW5SYW5nZSh0aW1lLCAwLCAxODApKSB7IHJldHVybiB9XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLnRpbWUgPSB0aW1lXG4gICAgICAgIHRoaXMuZGVsYXlOb2RlLmRlbGF5VGltZS52YWx1ZSA9IHRpbWVcbiAgICAgIH1cbiAgICB9LFxuXG5cdFx0LyoqXG5cdFx0ICogU3RyZW5ndGggb2YgZWFjaCBvZiB0aGUgZWNob2VkIGRlbGF5ZWQgc291bmRzLlxuXHRcdCAqL1xuICAgIGZlZWRiYWNrOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5mZWVkYmFja1xuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAoZmVlZGJhY2spIHtcbiAgICAgICAgaWYgKCFQei5VdGlsLmlzSW5SYW5nZShmZWVkYmFjaywgMCwgMSkpIHsgcmV0dXJuIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMuZmVlZGJhY2sgPSBwYXJzZUZsb2F0KGZlZWRiYWNrLCAxMClcbiAgICAgICAgdGhpcy5mZWVkYmFja0dhaW5Ob2RlLmdhaW4udmFsdWUgPSB0aGlzLmZlZWRiYWNrXG4gICAgICB9XG4gICAgfVxuXG4gIH0pXG4gIFBpenppY2F0by5FZmZlY3RzLkNvbXByZXNzb3IgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IHt9XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgdGhpcy5vcHRpb25zXG5cbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICB0aHJlc2hvbGQ6IC0yNCxcbiAgICAgIGtuZWU6IDMwLFxuICAgICAgYXR0YWNrOiAwLjAwMyxcbiAgICAgIHJlbGVhc2U6IDAuMjUwLFxuICAgICAgcmF0aW86IDEyXG4gICAgfVxuXG4gICAgdGhpcy5pbnB1dE5vZGUgPSB0aGlzLmNvbXByZXNzb3JOb2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlRHluYW1pY3NDb21wcmVzc29yKClcbiAgICB0aGlzLm91dHB1dE5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcblxuICAgIHRoaXMuY29tcHJlc3Nvck5vZGUuY29ubmVjdCh0aGlzLm91dHB1dE5vZGUpXG5cbiAgICBmb3IgKHZhciBrZXkgaW4gZGVmYXVsdHMpIHtcbiAgICAgIHRoaXNba2V5XSA9IG9wdGlvbnNba2V5XVxuICAgICAgdGhpc1trZXldID0gKHRoaXNba2V5XSA9PT0gdW5kZWZpbmVkIHx8IHRoaXNba2V5XSA9PT0gbnVsbCkgPyBkZWZhdWx0c1trZXldIDogdGhpc1trZXldXG4gICAgfVxuICB9XG5cbiAgUGl6emljYXRvLkVmZmVjdHMuQ29tcHJlc3Nvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGJhc2VFZmZlY3QsIHtcblxuXHRcdC8qKlxuXHRcdCAqIFRoZSBsZXZlbCBhYm92ZSB3aGljaCBjb21wcmVzc2lvbiBpcyBhcHBsaWVkIHRvIHRoZSBhdWRpby5cblx0XHQgKiBNSU46IC0xMDBcblx0XHQgKiBNQVg6IDBcblx0XHQgKi9cbiAgICB0aHJlc2hvbGQ6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wcmVzc29yTm9kZS50aHJlc2hvbGQudmFsdWVcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoUGl6emljYXRvLlV0aWwuaXNJblJhbmdlKHZhbHVlLCAtMTAwLCAwKSkgeyB0aGlzLmNvbXByZXNzb3JOb2RlLnRocmVzaG9sZC52YWx1ZSA9IHZhbHVlIH1cbiAgICAgIH1cbiAgICB9LFxuXG5cdFx0LyoqXG5cdFx0ICogQSB2YWx1ZSByZXByZXNlbnRpbmcgdGhlIHJhbmdlIGFib3ZlIHRoZSB0aHJlc2hvbGQgd2hlcmVcblx0XHQgKiB0aGUgY3VydmUgc21vb3RobHkgdHJhbnNpdGlvbnMgdG8gdGhlIFwicmF0aW9cIiBwb3J0aW9uLiBNb3JlIGluZm86XG5cdFx0ICogaHR0cDovL3d3dy5ob21lc3R1ZGlvY29ybmVyLmNvbS93aGF0LWlzLWtuZWUtb24tYS1jb21wcmVzc29yL1xuXHRcdCAqIE1JTiAwXG5cdFx0ICogTUFYIDQwXG5cdFx0ICovXG4gICAga25lZToge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXByZXNzb3JOb2RlLmtuZWUudmFsdWVcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoUGl6emljYXRvLlV0aWwuaXNJblJhbmdlKHZhbHVlLCAwLCA0MCkpIHsgdGhpcy5jb21wcmVzc29yTm9kZS5rbmVlLnZhbHVlID0gdmFsdWUgfVxuICAgICAgfVxuICAgIH0sXG5cblx0XHQvKipcblx0XHQgKiBIb3cgc29vbiB0aGUgY29tcHJlc3NvciBzdGFydHMgdG8gY29tcHJlc3MgdGhlIGR5bmFtaWNzIGFmdGVyXG5cdFx0ICogdGhlIHRocmVzaG9sZCBpcyBleGNlZWRlZC4gSWYgdm9sdW1lIGNoYW5nZXMgYXJlIHNsb3csIHlvdSBjYW5cblx0XHQgKiBwdXNoIHRoaXMgdG8gYSBoaWdoIHZhbHVlLiBTaG9ydCBhdHRhY2sgdGltZXMgd2lsbCByZXN1bHQgaW4gYVxuXHRcdCAqIGZhc3QgcmVzcG9uc2UgdG8gc3VkZGVuLCBsb3VkIHNvdW5kcywgYnV0IHdpbGwgbWFrZSB0aGUgY2hhbmdlc1xuXHRcdCAqIGluIHZvbHVtZSBtdWNoIG1vcmUgb2J2aW91cyB0byBsaXN0ZW5lcnMuXG5cdFx0ICogTUlOIDBcblx0XHQgKiBNQVggMVxuXHRcdCAqL1xuICAgIGF0dGFjazoge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXByZXNzb3JOb2RlLmF0dGFjay52YWx1ZVxuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmIChQaXp6aWNhdG8uVXRpbC5pc0luUmFuZ2UodmFsdWUsIDAsIDEpKSB7IHRoaXMuY29tcHJlc3Nvck5vZGUuYXR0YWNrLnZhbHVlID0gdmFsdWUgfVxuICAgICAgfVxuICAgIH0sXG5cblx0XHQvKipcblx0XHQgKiBIb3cgc29vbiB0aGUgY29tcHJlc3NvciBzdGFydHMgdG8gcmVsZWFzZSB0aGUgdm9sdW1lIGxldmVsXG5cdFx0ICogYmFjayB0byBub3JtYWwgYWZ0ZXIgdGhlIGxldmVsIGRyb3BzIGJlbG93IHRoZSB0aHJlc2hvbGQuXG5cdFx0ICogQSBsb25nIHRpbWUgdmFsdWUgd2lsbCB0ZW5kIHRvIGxvc2UgcXVpZXQgc291bmRzIHRoYXQgY29tZVxuXHRcdCAqIGFmdGVyIGxvdWQgb25lcywgYnV0IHdpbGwgYXZvaWQgdGhlIHZvbHVtZSBiZWluZyByYWlzZWQgdG9vXG5cdFx0ICogbXVjaCBkdXJpbmcgc2hvcnQgcXVpZXQgc2VjdGlvbnMgbGlrZSBwYXVzZXMgaW4gc3BlZWNoLlxuXHRcdCAqIE1JTiAwXG5cdFx0ICogTUFYIDFcblx0XHQgKi9cbiAgICByZWxlYXNlOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcHJlc3Nvck5vZGUucmVsZWFzZS52YWx1ZVxuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmIChQaXp6aWNhdG8uVXRpbC5pc0luUmFuZ2UodmFsdWUsIDAsIDEpKSB7IHRoaXMuY29tcHJlc3Nvck5vZGUucmVsZWFzZS52YWx1ZSA9IHZhbHVlIH1cbiAgICAgIH1cbiAgICB9LFxuXG5cdFx0LyoqXG5cdFx0ICogVGhlIGFtb3VudCBvZiBjb21wcmVzc2lvbiBhcHBsaWVkIHRvIHRoZSBhdWRpbyBvbmNlIGl0XG5cdFx0ICogcGFzc2VzIHRoZSB0aHJlc2hvbGQgbGV2ZWwuIFRoZSBoaWdoZXIgdGhlIFJhdGlvIHRoZSBtb3JlXG5cdFx0ICogdGhlIGxvdWQgcGFydHMgb2YgdGhlIGF1ZGlvIHdpbGwgYmUgY29tcHJlc3NlZC5cblx0XHQgKiBNSU4gMVxuXHRcdCAqIE1BWCAyMFxuXHRcdCAqL1xuICAgIHJhdGlvOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcHJlc3Nvck5vZGUucmF0aW8udmFsdWVcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoUGl6emljYXRvLlV0aWwuaXNJblJhbmdlKHZhbHVlLCAxLCAyMCkpIHsgdGhpcy5jb21wcmVzc29yTm9kZS5yYXRpby52YWx1ZSA9IHZhbHVlIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0Q3VycmVudEdhaW5SZWR1Y3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbXByZXNzb3JOb2RlLnJlZHVjdGlvblxuICAgIH1cblxuICB9KVxuXHQvKipcblx0ICogRnJlcXVlbmNpZXMgYmVsb3cgdGhlIGN1dG9mZiBmcmVxdWVuY3kgcGFzc1xuXHQgKiB0aHJvdWdoOyBmcmVxdWVuY2llcyBhYm92ZSBpdCBhcmUgYXR0ZW51YXRlZC5cblx0ICovXG4gIFBpenppY2F0by5FZmZlY3RzLkxvd1Bhc3NGaWx0ZXIgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIEZpbHRlci5jYWxsKHRoaXMsIG9wdGlvbnMsICdsb3dwYXNzJylcbiAgfVxuXG5cdC8qKlxuXHQgKiBGcmVxdWVuY2llcyBiZWxvdyB0aGUgY3V0b2ZmIGZyZXF1ZW5jeSBhcmVcblx0ICogYXR0ZW51YXRlZDsgZnJlcXVlbmNpZXMgYWJvdmUgaXQgcGFzcyB0aHJvdWdoLlxuXHQgKi9cbiAgUGl6emljYXRvLkVmZmVjdHMuSGlnaFBhc3NGaWx0ZXIgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIEZpbHRlci5jYWxsKHRoaXMsIG9wdGlvbnMsICdoaWdocGFzcycpXG4gIH1cblxuXHQvKipcblx0ICogRmlsdGVycyB1c2VkIGJ5IFBpenppY2F0byBzdGVtIGZyb20gdGhlIGJpcXVhZCBmaWx0ZXIgbm9kZS4gVGhpc1xuXHQgKiBmdW5jdGlvbiBhY3RzIGFzIGEgY29tbW9uIGNvbnN0cnVjdG9yLiBUaGUgb25seSB0aGluZyB0aGF0IGNoYW5nZXNcblx0ICogYmV0d2VlbiBmaWx0ZXJzIGlzIHRoZSAndHlwZScgb2YgdGhlIGJpcXVhZCBmaWx0ZXIgbm9kZS5cblx0ICovXG4gIGZ1bmN0aW9uIEZpbHRlciAob3B0aW9ucywgdHlwZSkge1xuICAgIHRoaXMub3B0aW9ucyA9IHt9XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgdGhpcy5vcHRpb25zXG5cbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICBmcmVxdWVuY3k6IDM1MCxcbiAgICAgIHBlYWs6IDFcbiAgICB9XG5cbiAgICB0aGlzLmlucHV0Tm9kZSA9IHRoaXMuZmlsdGVyTm9kZSA9IFB6LmNvbnRleHQuY3JlYXRlQmlxdWFkRmlsdGVyKClcbiAgICB0aGlzLmZpbHRlck5vZGUudHlwZSA9IHR5cGVcblxuICAgIHRoaXMub3V0cHV0Tm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuXG4gICAgdGhpcy5maWx0ZXJOb2RlLmNvbm5lY3QodGhpcy5vdXRwdXROb2RlKVxuXG4gICAgZm9yICh2YXIga2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICB0aGlzW2tleV0gPSBvcHRpb25zW2tleV1cbiAgICAgIHRoaXNba2V5XSA9ICh0aGlzW2tleV0gPT09IHVuZGVmaW5lZCB8fCB0aGlzW2tleV0gPT09IG51bGwpID8gZGVmYXVsdHNba2V5XSA6IHRoaXNba2V5XVxuICAgIH1cbiAgfVxuXG4gIHZhciBmaWx0ZXJQcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGJhc2VFZmZlY3QsIHtcblxuXHRcdC8qKlxuXHRcdCAqIFRoZSBjdXRvZmYgZnJlcXVlbmN5IG9mIHRoZSBmaWx0ZXIuXG5cdFx0ICogTUlOOiAxMFxuXHRcdCAqIE1BWDogMjIwNTAgKGhhbGYgdGhlIHNhbXBsaW5nIHJhdGUgb2YgdGhlIGN1cnJlbnQgY29udGV4dClcblx0XHQgKi9cbiAgICBmcmVxdWVuY3k6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJOb2RlLmZyZXF1ZW5jeS52YWx1ZVxuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmIChQaXp6aWNhdG8uVXRpbC5pc0luUmFuZ2UodmFsdWUsIDEwLCAyMjA1MCkpIHsgdGhpcy5maWx0ZXJOb2RlLmZyZXF1ZW5jeS52YWx1ZSA9IHZhbHVlIH1cbiAgICAgIH1cbiAgICB9LFxuXG5cdFx0LyoqXG5cdFx0ICogSW5kaWNhdGVzIGhvdyBwZWFrZWQgdGhlIGZyZXF1ZW5jeSBpcyBhcm91bmRcblx0XHQgKiB0aGUgY3V0b2ZmLiBUaGUgZ3JlYXRlciB0aGUgdmFsdWUgaXMsIHRoZVxuXHRcdCAqIGdyZWF0ZXIgaXMgdGhlIHBlYWsuXG5cdFx0ICogTUlOOiAwLjAwMDFcblx0XHQgKiBNQVg6IDEwMDBcblx0XHQgKi9cbiAgICBwZWFrOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyTm9kZS5RLnZhbHVlXG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKFBpenppY2F0by5VdGlsLmlzSW5SYW5nZSh2YWx1ZSwgMC4wMDAxLCAxMDAwKSkgeyB0aGlzLmZpbHRlck5vZGUuUS52YWx1ZSA9IHZhbHVlIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgUGl6emljYXRvLkVmZmVjdHMuTG93UGFzc0ZpbHRlci5wcm90b3R5cGUgPSBmaWx0ZXJQcm90b3R5cGVcbiAgUGl6emljYXRvLkVmZmVjdHMuSGlnaFBhc3NGaWx0ZXIucHJvdG90eXBlID0gZmlsdGVyUHJvdG90eXBlXG4gIFBpenppY2F0by5FZmZlY3RzLkRpc3RvcnRpb24gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IHt9XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgdGhpcy5vcHRpb25zXG5cbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICBnYWluOiAwLjVcbiAgICB9XG5cbiAgICB0aGlzLndhdmVTaGFwZXJOb2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlV2F2ZVNoYXBlcigpXG4gICAgdGhpcy5pbnB1dE5vZGUgPSB0aGlzLm91dHB1dE5vZGUgPSB0aGlzLndhdmVTaGFwZXJOb2RlXG5cbiAgICBmb3IgKHZhciBrZXkgaW4gZGVmYXVsdHMpIHtcbiAgICAgIHRoaXNba2V5XSA9IG9wdGlvbnNba2V5XVxuICAgICAgdGhpc1trZXldID0gKHRoaXNba2V5XSA9PT0gdW5kZWZpbmVkIHx8IHRoaXNba2V5XSA9PT0gbnVsbCkgPyBkZWZhdWx0c1trZXldIDogdGhpc1trZXldXG4gICAgfVxuICB9XG5cbiAgUGl6emljYXRvLkVmZmVjdHMuRGlzdG9ydGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGJhc2VFZmZlY3QsIHtcblxuXHRcdC8qKlxuXHRcdCAqIEdldHMgYW5kIHNldHMgdGhlIGdhaW4gKGFtb3VudCBvZiBkaXN0b3J0aW9uKS5cblx0XHQgKi9cbiAgICBnYWluOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5nYWluXG4gICAgICB9LFxuXG4gICAgICBzZXQ6IGZ1bmN0aW9uIChnYWluKSB7XG4gICAgICAgIGlmICghUHouVXRpbC5pc0luUmFuZ2UoZ2FpbiwgMCwgMSkpIHsgcmV0dXJuIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMuZ2FpbiA9IGdhaW5cbiAgICAgICAgdGhpcy5hZGp1c3RHYWluKClcbiAgICAgIH1cbiAgICB9LFxuXG5cdFx0LyoqXG5cdFx0ICogU2V0cyB0aGUgd2F2ZSBjdXJ2ZSB3aXRoIHRoZSBjb3JyZWN0IGdhaW4uIFRha2VuIGZyb21cblx0XHQgKiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzIyMzEyODQxL3dhdmVzaGFwZXItbm9kZS1pbi13ZWJhdWRpby1ob3ctdG8tZW11bGF0ZS1kaXN0b3J0aW9uXG5cdFx0ICovXG4gICAgYWRqdXN0R2Fpbjoge1xuICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdhaW4gPSBQei5VdGlsLmlzTnVtYmVyKHRoaXMub3B0aW9ucy5nYWluKSA/IHBhcnNlSW50KHRoaXMub3B0aW9ucy5nYWluICogMTAwLCAxMCkgOiA1MFxuICAgICAgICB2YXIgbl9zYW1wbGVzID0gNDQxMDBcbiAgICAgICAgdmFyIGN1cnZlID0gbmV3IEZsb2F0MzJBcnJheShuX3NhbXBsZXMpXG4gICAgICAgIHZhciBkZWcgPSBNYXRoLlBJIC8gMTgwXG4gICAgICAgIHZhciB4XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuX3NhbXBsZXM7ICsraSkge1xuICAgICAgICAgIHggPSBpICogMiAvIG5fc2FtcGxlcyAtIDFcbiAgICAgICAgICBjdXJ2ZVtpXSA9ICgzICsgZ2FpbikgKiB4ICogMjAgKiBkZWcgLyAoTWF0aC5QSSArIGdhaW4gKiBNYXRoLmFicyh4KSlcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMud2F2ZVNoYXBlck5vZGUuY3VydmUgPSBjdXJ2ZVxuICAgICAgfVxuICAgIH1cblxuICB9KVxuICBQaXp6aWNhdG8uRWZmZWN0cy5GbGFuZ2VyID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSB7fVxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHRoaXMub3B0aW9uc1xuXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgdGltZTogMC40NSxcbiAgICAgIHNwZWVkOiAwLjIsXG4gICAgICBkZXB0aDogMC4xLFxuICAgICAgZmVlZGJhY2s6IDAuMSxcbiAgICAgIG1peDogMC41XG4gICAgfVxuXG4gICAgdGhpcy5pbnB1dE5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLm91dHB1dE5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLmlucHV0RmVlZGJhY2tOb2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgdGhpcy53ZXRHYWluTm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgIHRoaXMuZHJ5R2Fpbk5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLmRlbGF5Tm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZURlbGF5KClcbiAgICB0aGlzLm9zY2lsbGF0b3JOb2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlT3NjaWxsYXRvcigpXG4gICAgdGhpcy5nYWluTm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgIHRoaXMuZmVlZGJhY2tOb2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgdGhpcy5vc2NpbGxhdG9yTm9kZS50eXBlID0gJ3NpbmUnXG5cbiAgICB0aGlzLmlucHV0Tm9kZS5jb25uZWN0KHRoaXMuaW5wdXRGZWVkYmFja05vZGUpXG4gICAgdGhpcy5pbnB1dE5vZGUuY29ubmVjdCh0aGlzLmRyeUdhaW5Ob2RlKVxuXG4gICAgdGhpcy5pbnB1dEZlZWRiYWNrTm9kZS5jb25uZWN0KHRoaXMuZGVsYXlOb2RlKVxuICAgIHRoaXMuaW5wdXRGZWVkYmFja05vZGUuY29ubmVjdCh0aGlzLndldEdhaW5Ob2RlKVxuXG4gICAgdGhpcy5kZWxheU5vZGUuY29ubmVjdCh0aGlzLndldEdhaW5Ob2RlKVxuICAgIHRoaXMuZGVsYXlOb2RlLmNvbm5lY3QodGhpcy5mZWVkYmFja05vZGUpXG5cbiAgICB0aGlzLmZlZWRiYWNrTm9kZS5jb25uZWN0KHRoaXMuaW5wdXRGZWVkYmFja05vZGUpXG5cbiAgICB0aGlzLm9zY2lsbGF0b3JOb2RlLmNvbm5lY3QodGhpcy5nYWluTm9kZSlcbiAgICB0aGlzLmdhaW5Ob2RlLmNvbm5lY3QodGhpcy5kZWxheU5vZGUuZGVsYXlUaW1lKVxuXG4gICAgdGhpcy5kcnlHYWluTm9kZS5jb25uZWN0KHRoaXMub3V0cHV0Tm9kZSlcbiAgICB0aGlzLndldEdhaW5Ob2RlLmNvbm5lY3QodGhpcy5vdXRwdXROb2RlKVxuXG4gICAgdGhpcy5vc2NpbGxhdG9yTm9kZS5zdGFydCgwKVxuXG4gICAgZm9yICh2YXIga2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICB0aGlzW2tleV0gPSBvcHRpb25zW2tleV1cbiAgICAgIHRoaXNba2V5XSA9ICh0aGlzW2tleV0gPT09IHVuZGVmaW5lZCB8fCB0aGlzW2tleV0gPT09IG51bGwpID8gZGVmYXVsdHNba2V5XSA6IHRoaXNba2V5XVxuICAgIH1cbiAgfVxuXG4gIFBpenppY2F0by5FZmZlY3RzLkZsYW5nZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShiYXNlRWZmZWN0LCB7XG5cbiAgICB0aW1lOiB7XG4gICAgICBlbnVtYmVyYWJsZTogdHJ1ZSxcblxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMudGltZVxuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAodGltZSkge1xuICAgICAgICBpZiAoIVB6LlV0aWwuaXNJblJhbmdlKHRpbWUsIDAsIDEpKSB7IHJldHVybiB9XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLnRpbWUgPSB0aW1lXG4gICAgICAgIHRoaXMuZGVsYXlOb2RlLmRlbGF5VGltZS52YWx1ZSA9IFB6LlV0aWwubm9ybWFsaXplKHRpbWUsIDAuMDAxLCAwLjAyKVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBzcGVlZDoge1xuICAgICAgZW51bWJlcmFibGU6IHRydWUsXG5cbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNwZWVkXG4gICAgICB9LFxuXG4gICAgICBzZXQ6IGZ1bmN0aW9uIChzcGVlZCkge1xuICAgICAgICBpZiAoIVB6LlV0aWwuaXNJblJhbmdlKHNwZWVkLCAwLCAxKSkgeyByZXR1cm4gfVxuXG4gICAgICAgIHRoaXMub3B0aW9ucy5zcGVlZCA9IHNwZWVkXG4gICAgICAgIHRoaXMub3NjaWxsYXRvck5vZGUuZnJlcXVlbmN5LnZhbHVlID0gUHouVXRpbC5ub3JtYWxpemUoc3BlZWQsIDAuNSwgNSlcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZGVwdGg6IHtcbiAgICAgIGVudW1iZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kZXB0aFxuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAoZGVwdGgpIHtcbiAgICAgICAgaWYgKCFQei5VdGlsLmlzSW5SYW5nZShkZXB0aCwgMCwgMSkpIHsgcmV0dXJuIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMuZGVwdGggPSBkZXB0aFxuICAgICAgICB0aGlzLmdhaW5Ob2RlLmdhaW4udmFsdWUgPSBQei5VdGlsLm5vcm1hbGl6ZShkZXB0aCwgMC4wMDA1LCAwLjAwNSlcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZmVlZGJhY2s6IHtcbiAgICAgIGVudW1iZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5mZWVkYmFja1xuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAoZmVlZGJhY2spIHtcbiAgICAgICAgaWYgKCFQei5VdGlsLmlzSW5SYW5nZShmZWVkYmFjaywgMCwgMSkpIHsgcmV0dXJuIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMuZmVlZGJhY2sgPSBmZWVkYmFja1xuICAgICAgICB0aGlzLmZlZWRiYWNrTm9kZS5nYWluLnZhbHVlID0gUHouVXRpbC5ub3JtYWxpemUoZmVlZGJhY2ssIDAsIDAuOClcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgbWl4OiB7XG4gICAgICBlbnVtYmVyYWJsZTogdHJ1ZSxcblxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubWl4XG4gICAgICB9LFxuXG4gICAgICBzZXQ6IGZ1bmN0aW9uIChtaXgpIHtcbiAgICAgICAgaWYgKCFQei5VdGlsLmlzSW5SYW5nZShtaXgsIDAsIDEpKSB7IHJldHVybiB9XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLm1peCA9IG1peFxuICAgICAgICB0aGlzLmRyeUdhaW5Ob2RlLmdhaW4udmFsdWUgPSBQaXp6aWNhdG8uVXRpbC5nZXREcnlMZXZlbCh0aGlzLm1peClcbiAgICAgICAgdGhpcy53ZXRHYWluTm9kZS5nYWluLnZhbHVlID0gUGl6emljYXRvLlV0aWwuZ2V0V2V0TGV2ZWwodGhpcy5taXgpXG4gICAgICB9XG4gICAgfVxuXG4gIH0pXG4gIFBpenppY2F0by5FZmZlY3RzLlN0ZXJlb1Bhbm5lciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0ge31cbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB0aGlzLm9wdGlvbnNcblxuICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgIHBhbjogMFxuICAgIH1cblxuICAgIHRoaXMuaW5wdXROb2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgdGhpcy5vdXRwdXROb2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlR2FpbigpXG5cbiAgICBpZiAoUGl6emljYXRvLmNvbnRleHQuY3JlYXRlU3RlcmVvUGFubmVyKSB7XG4gICAgICB0aGlzLnBhbm5lck5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVTdGVyZW9QYW5uZXIoKVxuICAgICAgdGhpcy5pbnB1dE5vZGUuY29ubmVjdCh0aGlzLnBhbm5lck5vZGUpXG4gICAgICB0aGlzLnBhbm5lck5vZGUuY29ubmVjdCh0aGlzLm91dHB1dE5vZGUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaW5wdXROb2RlLmNvbm5lY3QodGhpcy5vdXRwdXROb2RlKVxuICAgIH1cblxuICAgIGZvciAodmFyIGtleSBpbiBkZWZhdWx0cykge1xuICAgICAgdGhpc1trZXldID0gb3B0aW9uc1trZXldXG4gICAgICB0aGlzW2tleV0gPSAodGhpc1trZXldID09PSB1bmRlZmluZWQgfHwgdGhpc1trZXldID09PSBudWxsKSA/IGRlZmF1bHRzW2tleV0gOiB0aGlzW2tleV1cbiAgICB9XG4gIH1cblxuICBQaXp6aWNhdG8uRWZmZWN0cy5TdGVyZW9QYW5uZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShiYXNlRWZmZWN0LCB7XG5cblx0XHQvKipcblx0XHQgKiBQYW4gcG9zaXRpb25cblx0XHQgKi9cbiAgICBwYW46IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnBhblxuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAocGFuKSB7XG4gICAgICAgIGlmICghUHouVXRpbC5pc0luUmFuZ2UocGFuLCAtMSwgMSkpIHsgcmV0dXJuIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMucGFuID0gcGFuXG4gICAgICAgIGlmICh0aGlzLnBhbm5lck5vZGUpIHtcbiAgICAgICAgICB0aGlzLnBhbm5lck5vZGUucGFuLnZhbHVlID0gcGFuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgfSlcbiAgUGl6emljYXRvLkVmZmVjdHMuQ29udm9sdmVyID0gZnVuY3Rpb24gKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5vcHRpb25zID0ge31cbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB0aGlzLm9wdGlvbnNcblxuICAgIHZhciBzZWxmID0gdGhpc1xuICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICBtaXg6IDAuNVxuICAgIH1cblxuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFja1xuXG4gICAgdGhpcy5pbnB1dE5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLmNvbnZvbHZlck5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVDb252b2x2ZXIoKVxuICAgIHRoaXMub3V0cHV0Tm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuXG4gICAgdGhpcy53ZXRHYWluTm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgIHRoaXMuZHJ5R2Fpbk5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcblxuICAgIHRoaXMuaW5wdXROb2RlLmNvbm5lY3QodGhpcy5jb252b2x2ZXJOb2RlKVxuXG4gICAgdGhpcy5jb252b2x2ZXJOb2RlLmNvbm5lY3QodGhpcy53ZXRHYWluTm9kZSlcbiAgICB0aGlzLmlucHV0Tm9kZS5jb25uZWN0KHRoaXMuZHJ5R2Fpbk5vZGUpXG5cbiAgICB0aGlzLmRyeUdhaW5Ob2RlLmNvbm5lY3QodGhpcy5vdXRwdXROb2RlKVxuICAgIHRoaXMud2V0R2Fpbk5vZGUuY29ubmVjdCh0aGlzLm91dHB1dE5vZGUpXG5cbiAgICBmb3IgKHZhciBrZXkgaW4gZGVmYXVsdHMpIHtcbiAgICAgIHRoaXNba2V5XSA9IG9wdGlvbnNba2V5XVxuICAgICAgdGhpc1trZXldID0gKHRoaXNba2V5XSA9PT0gdW5kZWZpbmVkIHx8IHRoaXNba2V5XSA9PT0gbnVsbCkgPyBkZWZhdWx0c1trZXldIDogdGhpc1trZXldXG4gICAgfVxuXG4gICAgaWYgKCFvcHRpb25zLmltcHVsc2UpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIGltcHVsc2UgZmlsZSBzcGVjaWZpZWQuJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHJlcXVlc3Qub3BlbignR0VUJywgb3B0aW9ucy5pbXB1bHNlLCB0cnVlKVxuICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJ1xuICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBhdWRpb0RhdGEgPSBlLnRhcmdldC5yZXNwb25zZVxuXG4gICAgICBQaXp6aWNhdG8uY29udGV4dC5kZWNvZGVBdWRpb0RhdGEoYXVkaW9EYXRhLCBmdW5jdGlvbiAoYnVmZmVyKSB7XG4gICAgICAgIHNlbGYuY29udm9sdmVyTm9kZS5idWZmZXIgPSBidWZmZXJcblxuICAgICAgICBpZiAoc2VsZi5jYWxsYmFjayAmJiBQei5VdGlsLmlzRnVuY3Rpb24oc2VsZi5jYWxsYmFjaykpIHsgc2VsZi5jYWxsYmFjaygpIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBlcnJvciA9IGVycm9yIHx8IG5ldyBFcnJvcignRXJyb3IgZGVjb2RpbmcgaW1wdWxzZSBmaWxlJylcblxuICAgICAgICBpZiAoc2VsZi5jYWxsYmFjayAmJiBQei5VdGlsLmlzRnVuY3Rpb24oc2VsZi5jYWxsYmFjaykpIHsgc2VsZi5jYWxsYmFjayhlcnJvcikgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKHJlcXVlc3QucmVhZHlTdGF0ZSA9PT0gNCAmJiByZXF1ZXN0LnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdoaWxlIGZldGNoaW5nICcgKyBvcHRpb25zLmltcHVsc2UgKyAnLiAnICsgcmVxdWVzdC5zdGF0dXNUZXh0KVxuICAgICAgfVxuICAgIH1cblxuICAgIHJlcXVlc3Quc2VuZCgpXG4gIH1cblxuICBQaXp6aWNhdG8uRWZmZWN0cy5Db252b2x2ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShiYXNlRWZmZWN0LCB7XG5cbiAgICBtaXg6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLm1peFxuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAobWl4KSB7XG4gICAgICAgIGlmICghUHouVXRpbC5pc0luUmFuZ2UobWl4LCAwLCAxKSkgeyByZXR1cm4gfVxuXG4gICAgICAgIHRoaXMub3B0aW9ucy5taXggPSBtaXhcbiAgICAgICAgdGhpcy5kcnlHYWluTm9kZS5nYWluLnZhbHVlID0gUGl6emljYXRvLlV0aWwuZ2V0RHJ5TGV2ZWwodGhpcy5taXgpXG4gICAgICAgIHRoaXMud2V0R2Fpbk5vZGUuZ2Fpbi52YWx1ZSA9IFBpenppY2F0by5VdGlsLmdldFdldExldmVsKHRoaXMubWl4KVxuICAgICAgfVxuICAgIH1cbiAgfSlcblx0LyoqXG5cdCAqIEFkYXB0ZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vbW1ja2VnZy93ZWItYXVkaW8tc2Nob29sL2Jsb2IvbWFzdGVyL2xlc3NvbnMvMy4lMjBFZmZlY3RzLzE4LiUyMFBpbmclMjBQb25nJTIwRGVsYXkvYW5zd2VyLmpzXG5cdCAqL1xuXG4gIFBpenppY2F0by5FZmZlY3RzLlBpbmdQb25nRGVsYXkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IHt9XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgdGhpcy5vcHRpb25zXG5cbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICBmZWVkYmFjazogMC41LFxuICAgICAgdGltZTogMC4zLFxuICAgICAgbWl4OiAwLjVcbiAgICB9XG5cbiAgICB0aGlzLmlucHV0Tm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgIHRoaXMub3V0cHV0Tm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgIHRoaXMuZGVsYXlOb2RlTGVmdCA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZURlbGF5KClcbiAgICB0aGlzLmRlbGF5Tm9kZVJpZ2h0ID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlRGVsYXkoKVxuICAgIHRoaXMuZHJ5R2Fpbk5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLndldEdhaW5Ob2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgdGhpcy5mZWVkYmFja0dhaW5Ob2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgdGhpcy5jaGFubmVsTWVyZ2VyID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlQ2hhbm5lbE1lcmdlcigyKVxuXG5cdFx0Ly8gZHJ5IG1peFxuICAgIHRoaXMuaW5wdXROb2RlLmNvbm5lY3QodGhpcy5kcnlHYWluTm9kZSlcblx0XHQvLyBkcnkgbWl4IG91dFxuICAgIHRoaXMuZHJ5R2Fpbk5vZGUuY29ubmVjdCh0aGlzLm91dHB1dE5vZGUpXG5cblx0XHQvLyB0aGUgZmVlZGJhY2sgbG9vcFxuICAgIHRoaXMuZGVsYXlOb2RlTGVmdC5jb25uZWN0KHRoaXMuY2hhbm5lbE1lcmdlciwgMCwgMClcbiAgICB0aGlzLmRlbGF5Tm9kZVJpZ2h0LmNvbm5lY3QodGhpcy5jaGFubmVsTWVyZ2VyLCAwLCAxKVxuICAgIHRoaXMuZGVsYXlOb2RlTGVmdC5jb25uZWN0KHRoaXMuZGVsYXlOb2RlUmlnaHQpXG4gICAgdGhpcy5mZWVkYmFja0dhaW5Ob2RlLmNvbm5lY3QodGhpcy5kZWxheU5vZGVMZWZ0KVxuICAgIHRoaXMuZGVsYXlOb2RlUmlnaHQuY29ubmVjdCh0aGlzLmZlZWRiYWNrR2Fpbk5vZGUpXG5cblx0XHQvLyB3ZXQgbWl4XG4gICAgdGhpcy5pbnB1dE5vZGUuY29ubmVjdCh0aGlzLmZlZWRiYWNrR2Fpbk5vZGUpXG5cblx0XHQvLyB3ZXQgb3V0XG4gICAgdGhpcy5jaGFubmVsTWVyZ2VyLmNvbm5lY3QodGhpcy53ZXRHYWluTm9kZSlcbiAgICB0aGlzLndldEdhaW5Ob2RlLmNvbm5lY3QodGhpcy5vdXRwdXROb2RlKVxuXG4gICAgZm9yICh2YXIga2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICB0aGlzW2tleV0gPSBvcHRpb25zW2tleV1cbiAgICAgIHRoaXNba2V5XSA9ICh0aGlzW2tleV0gPT09IHVuZGVmaW5lZCB8fCB0aGlzW2tleV0gPT09IG51bGwpID8gZGVmYXVsdHNba2V5XSA6IHRoaXNba2V5XVxuICAgIH1cbiAgfVxuXG4gIFBpenppY2F0by5FZmZlY3RzLlBpbmdQb25nRGVsYXkucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShiYXNlRWZmZWN0LCB7XG5cblx0XHQvKipcblx0XHQgKiBHZXRzIGFuZCBzZXRzIHRoZSBkcnkvd2V0IG1peC5cblx0XHQgKi9cbiAgICBtaXg6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLm1peFxuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAobWl4KSB7XG4gICAgICAgIGlmICghUHouVXRpbC5pc0luUmFuZ2UobWl4LCAwLCAxKSkgeyByZXR1cm4gfVxuXG4gICAgICAgIHRoaXMub3B0aW9ucy5taXggPSBtaXhcbiAgICAgICAgdGhpcy5kcnlHYWluTm9kZS5nYWluLnZhbHVlID0gUGl6emljYXRvLlV0aWwuZ2V0RHJ5TGV2ZWwodGhpcy5taXgpXG4gICAgICAgIHRoaXMud2V0R2Fpbk5vZGUuZ2Fpbi52YWx1ZSA9IFBpenppY2F0by5VdGlsLmdldFdldExldmVsKHRoaXMubWl4KVxuICAgICAgfVxuICAgIH0sXG5cblx0XHQvKipcblx0XHQgKiBUaW1lIGJldHdlZW4gZWFjaCBkZWxheWVkIHNvdW5kXG5cdFx0ICovXG4gICAgdGltZToge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMudGltZVxuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAodGltZSkge1xuICAgICAgICBpZiAoIVB6LlV0aWwuaXNJblJhbmdlKHRpbWUsIDAsIDE4MCkpIHsgcmV0dXJuIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMudGltZSA9IHRpbWVcbiAgICAgICAgdGhpcy5kZWxheU5vZGVMZWZ0LmRlbGF5VGltZS52YWx1ZSA9IHRpbWVcbiAgICAgICAgdGhpcy5kZWxheU5vZGVSaWdodC5kZWxheVRpbWUudmFsdWUgPSB0aW1lXG4gICAgICB9XG4gICAgfSxcblxuXHRcdC8qKlxuXHRcdCAqIFN0cmVuZ3RoIG9mIGVhY2ggb2YgdGhlIGVjaG9lZCBkZWxheWVkIHNvdW5kcy5cblx0XHQgKi9cbiAgICBmZWVkYmFjazoge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZmVlZGJhY2tcbiAgICAgIH0sXG5cbiAgICAgIHNldDogZnVuY3Rpb24gKGZlZWRiYWNrKSB7XG4gICAgICAgIGlmICghUHouVXRpbC5pc0luUmFuZ2UoZmVlZGJhY2ssIDAsIDEpKSB7IHJldHVybiB9XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLmZlZWRiYWNrID0gcGFyc2VGbG9hdChmZWVkYmFjaywgMTApXG4gICAgICAgIHRoaXMuZmVlZGJhY2tHYWluTm9kZS5nYWluLnZhbHVlID0gdGhpcy5mZWVkYmFja1xuICAgICAgfVxuICAgIH1cblxuICB9KVxuXHQvKipcblx0ICogQWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWItYXVkaW8tY29tcG9uZW50cy9zaW1wbGUtcmV2ZXJiXG5cdCAqL1xuXG4gIFBpenppY2F0by5FZmZlY3RzLlJldmVyYiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzXG5cbiAgICB0aGlzLm9wdGlvbnMgPSB7fVxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHRoaXMub3B0aW9uc1xuXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgbWl4OiAwLjUsXG4gICAgICB0aW1lOiAwLjAxLFxuICAgICAgZGVjYXk6IDAuMDEsXG4gICAgICByZXZlcnNlOiBmYWxzZVxuICAgIH1cblxuICAgIHRoaXMuaW5wdXROb2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgdGhpcy5yZXZlcmJOb2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlQ29udm9sdmVyKClcbiAgICB0aGlzLm91dHB1dE5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLndldEdhaW5Ob2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgdGhpcy5kcnlHYWluTm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuXG4gICAgdGhpcy5pbnB1dE5vZGUuY29ubmVjdCh0aGlzLnJldmVyYk5vZGUpXG4gICAgdGhpcy5yZXZlcmJOb2RlLmNvbm5lY3QodGhpcy53ZXRHYWluTm9kZSlcbiAgICB0aGlzLmlucHV0Tm9kZS5jb25uZWN0KHRoaXMuZHJ5R2Fpbk5vZGUpXG4gICAgdGhpcy5kcnlHYWluTm9kZS5jb25uZWN0KHRoaXMub3V0cHV0Tm9kZSlcbiAgICB0aGlzLndldEdhaW5Ob2RlLmNvbm5lY3QodGhpcy5vdXRwdXROb2RlKVxuXG4gICAgZm9yICh2YXIga2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICB0aGlzW2tleV0gPSBvcHRpb25zW2tleV1cbiAgICAgIHRoaXNba2V5XSA9ICh0aGlzW2tleV0gPT09IHVuZGVmaW5lZCB8fCB0aGlzW2tleV0gPT09IG51bGwpID8gZGVmYXVsdHNba2V5XSA6IHRoaXNba2V5XVxuICAgIH1cblxuICAgIChidWlsZEltcHVsc2UuYmluZCh0aGlzKSkoKVxuICB9XG5cbiAgUGl6emljYXRvLkVmZmVjdHMuUmV2ZXJiLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoYmFzZUVmZmVjdCwge1xuXG4gICAgbWl4OiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5taXhcbiAgICAgIH0sXG5cbiAgICAgIHNldDogZnVuY3Rpb24gKG1peCkge1xuICAgICAgICBpZiAoIVB6LlV0aWwuaXNJblJhbmdlKG1peCwgMCwgMSkpIHsgcmV0dXJuIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMubWl4ID0gbWl4XG4gICAgICAgIHRoaXMuZHJ5R2Fpbk5vZGUuZ2Fpbi52YWx1ZSA9IFBpenppY2F0by5VdGlsLmdldERyeUxldmVsKHRoaXMubWl4KVxuICAgICAgICB0aGlzLndldEdhaW5Ob2RlLmdhaW4udmFsdWUgPSBQaXp6aWNhdG8uVXRpbC5nZXRXZXRMZXZlbCh0aGlzLm1peClcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdGltZToge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMudGltZVxuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAodGltZSkge1xuICAgICAgICBpZiAoIVB6LlV0aWwuaXNJblJhbmdlKHRpbWUsIDAuMDAwMSwgMTApKSB7IHJldHVybiB9XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLnRpbWUgPSB0aW1lO1xuICAgICAgICAoYnVpbGRJbXB1bHNlLmJpbmQodGhpcykpKClcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZGVjYXk6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmRlY2F5XG4gICAgICB9LFxuXG4gICAgICBzZXQ6IGZ1bmN0aW9uIChkZWNheSkge1xuICAgICAgICBpZiAoIVB6LlV0aWwuaXNJblJhbmdlKGRlY2F5LCAwLjAwMDEsIDEwKSkgeyByZXR1cm4gfVxuXG4gICAgICAgIHRoaXMub3B0aW9ucy5kZWNheSA9IGRlY2F5O1xuICAgICAgICAoYnVpbGRJbXB1bHNlLmJpbmQodGhpcykpKClcbiAgICAgIH1cblxuICAgIH0sXG5cbiAgICByZXZlcnNlOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5yZXZlcnNlXG4gICAgICB9LFxuXG4gICAgICBzZXQ6IGZ1bmN0aW9uIChyZXZlcnNlKSB7XG4gICAgICAgIGlmICghUHouVXRpbC5pc0Jvb2wocmV2ZXJzZSkpIHsgcmV0dXJuIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMucmV2ZXJzZSA9IHJldmVyc2U7XG4gICAgICAgIChidWlsZEltcHVsc2UuYmluZCh0aGlzKSkoKVxuICAgICAgfVxuICAgIH1cblxuICB9KVxuXG4gIGZ1bmN0aW9uIGJ1aWxkSW1wdWxzZSAoKSB7XG4gICAgdmFyIGxlbmd0aCA9IFB6LmNvbnRleHQuc2FtcGxlUmF0ZSAqIHRoaXMudGltZVxuICAgIHZhciBpbXB1bHNlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlQnVmZmVyKDIsIGxlbmd0aCwgUHouY29udGV4dC5zYW1wbGVSYXRlKVxuICAgIHZhciBpbXB1bHNlTCA9IGltcHVsc2UuZ2V0Q2hhbm5lbERhdGEoMClcbiAgICB2YXIgaW1wdWxzZVIgPSBpbXB1bHNlLmdldENoYW5uZWxEYXRhKDEpXG4gICAgdmFyIG4sIGlcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgbiA9IHRoaXMucmV2ZXJzZSA/IGxlbmd0aCAtIGkgOiBpXG4gICAgICBpbXB1bHNlTFtpXSA9IChNYXRoLnJhbmRvbSgpICogMiAtIDEpICogTWF0aC5wb3coMSAtIG4gLyBsZW5ndGgsIHRoaXMuZGVjYXkpXG4gICAgICBpbXB1bHNlUltpXSA9IChNYXRoLnJhbmRvbSgpICogMiAtIDEpICogTWF0aC5wb3coMSAtIG4gLyBsZW5ndGgsIHRoaXMuZGVjYXkpXG4gICAgfVxuXG4gICAgdGhpcy5yZXZlcmJOb2RlLmJ1ZmZlciA9IGltcHVsc2VcbiAgfVxuICBQaXp6aWNhdG8uRWZmZWN0cy5UcmVtb2xvID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcblx0XHQvLyBhZGFwdGVkIGZyb21cblx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vbW1ja2VnZy93ZWItYXVkaW8tc2Nob29sL2Jsb2IvbWFzdGVyL2xlc3NvbnMvMy4lMjBFZmZlY3RzLzEzLiUyMFRyZW1vbG8vYW5zd2VyLmpzXG5cbiAgICB0aGlzLm9wdGlvbnMgPSB7fVxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHRoaXMub3B0aW9uc1xuXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgc3BlZWQ6IDQsXG4gICAgICBkZXB0aDogMSxcbiAgICAgIG1peDogMC44XG4gICAgfVxuXG5cdFx0Ly8gY3JlYXRlIG5vZGVzXG4gICAgdGhpcy5pbnB1dE5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLm91dHB1dE5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLmRyeUdhaW5Ob2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgdGhpcy53ZXRHYWluTm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuXG4gICAgdGhpcy50cmVtb2xvR2Fpbk5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLnRyZW1vbG9HYWluTm9kZS5nYWluLnZhbHVlID0gMFxuICAgIHRoaXMubGZvTm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZU9zY2lsbGF0b3IoKVxuXG4gICAgdGhpcy5zaGFwZXJOb2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlV2F2ZVNoYXBlcigpXG4gICAgdGhpcy5zaGFwZXJOb2RlLmN1cnZlID0gbmV3IEZsb2F0MzJBcnJheShbMCwgMV0pXG4gICAgdGhpcy5zaGFwZXJOb2RlLmNvbm5lY3QodGhpcy50cmVtb2xvR2Fpbk5vZGUuZ2FpbilcblxuXHRcdC8vIGRyeSBtaXhcbiAgICB0aGlzLmlucHV0Tm9kZS5jb25uZWN0KHRoaXMuZHJ5R2Fpbk5vZGUpXG4gICAgdGhpcy5kcnlHYWluTm9kZS5jb25uZWN0KHRoaXMub3V0cHV0Tm9kZSlcblxuXHRcdC8vIHdldCBtaXhcbiAgICB0aGlzLmxmb05vZGUuY29ubmVjdCh0aGlzLnNoYXBlck5vZGUpXG4gICAgdGhpcy5sZm9Ob2RlLnR5cGUgPSAnc2luZSdcbiAgICB0aGlzLmxmb05vZGUuc3RhcnQoMClcblxuICAgIHRoaXMuaW5wdXROb2RlLmNvbm5lY3QodGhpcy50cmVtb2xvR2Fpbk5vZGUpXG4gICAgdGhpcy50cmVtb2xvR2Fpbk5vZGUuY29ubmVjdCh0aGlzLndldEdhaW5Ob2RlKVxuICAgIHRoaXMud2V0R2Fpbk5vZGUuY29ubmVjdCh0aGlzLm91dHB1dE5vZGUpXG5cbiAgICBmb3IgKHZhciBrZXkgaW4gZGVmYXVsdHMpIHtcbiAgICAgIHRoaXNba2V5XSA9IG9wdGlvbnNba2V5XVxuICAgICAgdGhpc1trZXldID0gKHRoaXNba2V5XSA9PT0gdW5kZWZpbmVkIHx8IHRoaXNba2V5XSA9PT0gbnVsbCkgPyBkZWZhdWx0c1trZXldIDogdGhpc1trZXldXG4gICAgfVxuICB9XG5cbiAgUGl6emljYXRvLkVmZmVjdHMuVHJlbW9sby5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGJhc2VFZmZlY3QsIHtcblxuXHRcdC8qKlxuXHRcdCAqIEdldHMgYW5kIHNldHMgdGhlIGRyeS93ZXQgbWl4LlxuXHRcdCAqL1xuICAgIG1peDoge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubWl4XG4gICAgICB9LFxuXG4gICAgICBzZXQ6IGZ1bmN0aW9uIChtaXgpIHtcbiAgICAgICAgaWYgKCFQei5VdGlsLmlzSW5SYW5nZShtaXgsIDAsIDEpKSB7IHJldHVybiB9XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLm1peCA9IG1peFxuICAgICAgICB0aGlzLmRyeUdhaW5Ob2RlLmdhaW4udmFsdWUgPSBQaXp6aWNhdG8uVXRpbC5nZXREcnlMZXZlbCh0aGlzLm1peClcbiAgICAgICAgdGhpcy53ZXRHYWluTm9kZS5nYWluLnZhbHVlID0gUGl6emljYXRvLlV0aWwuZ2V0V2V0TGV2ZWwodGhpcy5taXgpXG4gICAgICB9XG4gICAgfSxcblxuXHRcdC8qKlxuXHRcdCAqIFNwZWVkIG9mIHRoZSB0cmVtb2xvXG5cdFx0ICovXG4gICAgc3BlZWQ6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNwZWVkXG4gICAgICB9LFxuXG4gICAgICBzZXQ6IGZ1bmN0aW9uIChzcGVlZCkge1xuICAgICAgICBpZiAoIVB6LlV0aWwuaXNJblJhbmdlKHNwZWVkLCAwLCAyMCkpIHsgcmV0dXJuIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMuc3BlZWQgPSBzcGVlZFxuICAgICAgICB0aGlzLmxmb05vZGUuZnJlcXVlbmN5LnZhbHVlID0gc3BlZWRcbiAgICAgIH1cbiAgICB9LFxuXG5cdFx0LyoqXG5cdFx0ICogRGVwdGggb2YgdGhlIHRyZW1vbG9cblx0XHQgKi9cbiAgICBkZXB0aDoge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZGVwdGhcbiAgICAgIH0sXG5cbiAgICAgIHNldDogZnVuY3Rpb24gKGRlcHRoKSB7XG4gICAgICAgIGlmICghUHouVXRpbC5pc0luUmFuZ2UoZGVwdGgsIDAsIDEpKSB7IHJldHVybiB9XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLmRlcHRoID0gZGVwdGhcbiAgICAgICAgdGhpcy5zaGFwZXJOb2RlLmN1cnZlID0gbmV3IEZsb2F0MzJBcnJheShbMSAtIGRlcHRoLCAxXSlcbiAgICAgIH1cbiAgICB9XG5cbiAgfSlcbiAgUGl6emljYXRvLkVmZmVjdHMuRHViRGVsYXkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IHt9XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgdGhpcy5vcHRpb25zXG5cbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICBmZWVkYmFjazogMC42LFxuICAgICAgdGltZTogMC43LFxuICAgICAgbWl4OiAwLjUsXG4gICAgICBjdXRvZmY6IDcwMFxuICAgIH1cblxuICAgIHRoaXMuaW5wdXROb2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgdGhpcy5vdXRwdXROb2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgdGhpcy5kcnlHYWluTm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgIHRoaXMud2V0R2Fpbk5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLmZlZWRiYWNrR2Fpbk5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLmRlbGF5Tm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZURlbGF5KClcbiAgICB0aGlzLmJxRmlsdGVyTm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUJpcXVhZEZpbHRlcigpXG5cblx0XHQvLyBkcnkgbWl4XG4gICAgdGhpcy5pbnB1dE5vZGUuY29ubmVjdCh0aGlzLmRyeUdhaW5Ob2RlKVxuICAgIHRoaXMuZHJ5R2Fpbk5vZGUuY29ubmVjdCh0aGlzLm91dHB1dE5vZGUpXG5cblx0XHQvLyB3ZXQgbWl4XG4gICAgdGhpcy5pbnB1dE5vZGUuY29ubmVjdCh0aGlzLndldEdhaW5Ob2RlKVxuICAgIHRoaXMuaW5wdXROb2RlLmNvbm5lY3QodGhpcy5mZWVkYmFja0dhaW5Ob2RlKVxuXG4gICAgdGhpcy5mZWVkYmFja0dhaW5Ob2RlLmNvbm5lY3QodGhpcy5icUZpbHRlck5vZGUpXG4gICAgdGhpcy5icUZpbHRlck5vZGUuY29ubmVjdCh0aGlzLmRlbGF5Tm9kZSlcbiAgICB0aGlzLmRlbGF5Tm9kZS5jb25uZWN0KHRoaXMuZmVlZGJhY2tHYWluTm9kZSlcbiAgICB0aGlzLmRlbGF5Tm9kZS5jb25uZWN0KHRoaXMud2V0R2Fpbk5vZGUpXG5cbiAgICB0aGlzLndldEdhaW5Ob2RlLmNvbm5lY3QodGhpcy5vdXRwdXROb2RlKVxuXG4gICAgZm9yICh2YXIga2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICB0aGlzW2tleV0gPSBvcHRpb25zW2tleV1cbiAgICAgIHRoaXNba2V5XSA9ICh0aGlzW2tleV0gPT09IHVuZGVmaW5lZCB8fCB0aGlzW2tleV0gPT09IG51bGwpID8gZGVmYXVsdHNba2V5XSA6IHRoaXNba2V5XVxuICAgIH1cbiAgfVxuXG4gIFBpenppY2F0by5FZmZlY3RzLkR1YkRlbGF5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoYmFzZUVmZmVjdCwge1xuXG5cdFx0LyoqXG5cdFx0ICogR2V0cyBhbmQgc2V0cyB0aGUgZHJ5L3dldCBtaXguXG5cdFx0ICovXG4gICAgbWl4OiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5taXhcbiAgICAgIH0sXG5cbiAgICAgIHNldDogZnVuY3Rpb24gKG1peCkge1xuICAgICAgICBpZiAoIVB6LlV0aWwuaXNJblJhbmdlKG1peCwgMCwgMSkpIHsgcmV0dXJuIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMubWl4ID0gbWl4XG4gICAgICAgIHRoaXMuZHJ5R2Fpbk5vZGUuZ2Fpbi52YWx1ZSA9IFBpenppY2F0by5VdGlsLmdldERyeUxldmVsKHRoaXMubWl4KVxuICAgICAgICB0aGlzLndldEdhaW5Ob2RlLmdhaW4udmFsdWUgPSBQaXp6aWNhdG8uVXRpbC5nZXRXZXRMZXZlbCh0aGlzLm1peClcbiAgICAgIH1cbiAgICB9LFxuXG5cdFx0LyoqXG5cdFx0ICogVGltZSBiZXR3ZWVuIGVhY2ggZGVsYXllZCBzb3VuZFxuXHRcdCAqL1xuICAgIHRpbWU6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnRpbWVcbiAgICAgIH0sXG5cbiAgICAgIHNldDogZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgICAgaWYgKCFQei5VdGlsLmlzSW5SYW5nZSh0aW1lLCAwLCAxODApKSB7IHJldHVybiB9XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLnRpbWUgPSB0aW1lXG4gICAgICAgIHRoaXMuZGVsYXlOb2RlLmRlbGF5VGltZS52YWx1ZSA9IHRpbWVcbiAgICAgIH1cbiAgICB9LFxuXG5cdFx0LyoqXG5cdFx0ICogU3RyZW5ndGggb2YgZWFjaCBvZiB0aGUgZWNob2VkIGRlbGF5ZWQgc291bmRzLlxuXHRcdCAqL1xuICAgIGZlZWRiYWNrOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5mZWVkYmFja1xuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAoZmVlZGJhY2spIHtcbiAgICAgICAgaWYgKCFQei5VdGlsLmlzSW5SYW5nZShmZWVkYmFjaywgMCwgMSkpIHsgcmV0dXJuIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMuZmVlZGJhY2sgPSBwYXJzZUZsb2F0KGZlZWRiYWNrLCAxMClcbiAgICAgICAgdGhpcy5mZWVkYmFja0dhaW5Ob2RlLmdhaW4udmFsdWUgPSB0aGlzLmZlZWRiYWNrXG4gICAgICB9XG4gICAgfSxcblxuXHRcdC8qKlxuXHRcdCAqIEZyZXF1ZW5jeSBvbiBkZWxheSByZXBlYXRzXG5cdFx0ICovXG4gICAgY3V0b2ZmOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jdXRvZmZcbiAgICAgIH0sXG5cbiAgICAgIHNldDogZnVuY3Rpb24gKGN1dG9mZikge1xuICAgICAgICBpZiAoIVB6LlV0aWwuaXNJblJhbmdlKGN1dG9mZiwgMCwgNDAwMCkpIHsgcmV0dXJuIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMuY3V0b2ZmID0gY3V0b2ZmXG4gICAgICAgIHRoaXMuYnFGaWx0ZXJOb2RlLmZyZXF1ZW5jeS52YWx1ZSA9IHRoaXMuY3V0b2ZmXG4gICAgICB9XG4gICAgfVxuXG4gIH0pXG5cdC8qKlxuXHQgKiBTZWUgaHR0cDovL3dlYmF1ZGlvLnByb3RvdHlwaW5nLmJiYy5jby51ay9yaW5nLW1vZHVsYXRvci9cblx0ICovXG4gIFBpenppY2F0by5FZmZlY3RzLlJpbmdNb2R1bGF0b3IgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IHt9XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgdGhpcy5vcHRpb25zXG5cbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICBzcGVlZDogMzAsXG4gICAgICBkaXN0b3J0aW9uOiAxLFxuICAgICAgbWl4OiAwLjVcbiAgICB9XG5cbiAgICB0aGlzLmlucHV0Tm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgIHRoaXMub3V0cHV0Tm9kZSA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgIHRoaXMuZHJ5R2Fpbk5vZGUgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLndldEdhaW5Ob2RlID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlR2FpbigpXG5cblx0XHQvKipcblx0XHQgKiBgdkluYCBpcyB0aGUgbW9kdWxhdGlvbiBvc2NpbGxhdG9yIGlucHV0XG5cdFx0ICogYHZjYCBpcyB0aGUgYXVkaW8gaW5wdXQuXG5cdFx0ICovXG4gICAgdGhpcy52SW4gPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVPc2NpbGxhdG9yKClcbiAgICB0aGlzLnZJbi5zdGFydCgwKVxuICAgIHRoaXMudkluR2FpbiA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgIHRoaXMudkluR2Fpbi5nYWluLnZhbHVlID0gMC41XG4gICAgdGhpcy52SW5JbnZlcnRlcjEgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLnZJbkludmVydGVyMS5nYWluLnZhbHVlID0gLTFcbiAgICB0aGlzLnZJbkludmVydGVyMiA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgIHRoaXMudkluSW52ZXJ0ZXIyLmdhaW4udmFsdWUgPSAtMVxuICAgIHRoaXMudkluRGlvZGUxID0gbmV3IERpb2RlTm9kZShQaXp6aWNhdG8uY29udGV4dClcbiAgICB0aGlzLnZJbkRpb2RlMiA9IG5ldyBEaW9kZU5vZGUoUGl6emljYXRvLmNvbnRleHQpXG4gICAgdGhpcy52SW5JbnZlcnRlcjMgPSBQaXp6aWNhdG8uY29udGV4dC5jcmVhdGVHYWluKClcbiAgICB0aGlzLnZJbkludmVydGVyMy5nYWluLnZhbHVlID0gLTFcbiAgICB0aGlzLnZjSW52ZXJ0ZXIxID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgdGhpcy52Y0ludmVydGVyMS5nYWluLnZhbHVlID0gLTFcbiAgICB0aGlzLnZjRGlvZGUzID0gbmV3IERpb2RlTm9kZShQaXp6aWNhdG8uY29udGV4dClcbiAgICB0aGlzLnZjRGlvZGU0ID0gbmV3IERpb2RlTm9kZShQaXp6aWNhdG8uY29udGV4dClcblxuICAgIHRoaXMub3V0R2FpbiA9IFBpenppY2F0by5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgIHRoaXMub3V0R2Fpbi5nYWluLnZhbHVlID0gM1xuXG4gICAgdGhpcy5jb21wcmVzc29yID0gUGl6emljYXRvLmNvbnRleHQuY3JlYXRlRHluYW1pY3NDb21wcmVzc29yKClcbiAgICB0aGlzLmNvbXByZXNzb3IudGhyZXNob2xkLnZhbHVlID0gLTI0XG4gICAgdGhpcy5jb21wcmVzc29yLnJhdGlvLnZhbHVlID0gMTZcblxuXHRcdC8vIGRyeSBtaXhcbiAgICB0aGlzLmlucHV0Tm9kZS5jb25uZWN0KHRoaXMuZHJ5R2Fpbk5vZGUpXG4gICAgdGhpcy5kcnlHYWluTm9kZS5jb25uZWN0KHRoaXMub3V0cHV0Tm9kZSlcblxuXHRcdC8vIHdldCBtaXhcbiAgICB0aGlzLmlucHV0Tm9kZS5jb25uZWN0KHRoaXMudmNJbnZlcnRlcjEpXG4gICAgdGhpcy5pbnB1dE5vZGUuY29ubmVjdCh0aGlzLnZjRGlvZGU0Lm5vZGUpXG4gICAgdGhpcy52Y0ludmVydGVyMS5jb25uZWN0KHRoaXMudmNEaW9kZTMubm9kZSlcbiAgICB0aGlzLnZJbi5jb25uZWN0KHRoaXMudkluR2FpbilcbiAgICB0aGlzLnZJbkdhaW4uY29ubmVjdCh0aGlzLnZJbkludmVydGVyMSlcbiAgICB0aGlzLnZJbkdhaW4uY29ubmVjdCh0aGlzLnZjSW52ZXJ0ZXIxKVxuICAgIHRoaXMudkluR2Fpbi5jb25uZWN0KHRoaXMudmNEaW9kZTQubm9kZSlcbiAgICB0aGlzLnZJbkludmVydGVyMS5jb25uZWN0KHRoaXMudkluSW52ZXJ0ZXIyKVxuICAgIHRoaXMudkluSW52ZXJ0ZXIxLmNvbm5lY3QodGhpcy52SW5EaW9kZTIubm9kZSlcbiAgICB0aGlzLnZJbkludmVydGVyMi5jb25uZWN0KHRoaXMudkluRGlvZGUxLm5vZGUpXG4gICAgdGhpcy52SW5EaW9kZTEuY29ubmVjdCh0aGlzLnZJbkludmVydGVyMylcbiAgICB0aGlzLnZJbkRpb2RlMi5jb25uZWN0KHRoaXMudkluSW52ZXJ0ZXIzKVxuICAgIHRoaXMudkluSW52ZXJ0ZXIzLmNvbm5lY3QodGhpcy5jb21wcmVzc29yKVxuICAgIHRoaXMudmNEaW9kZTMuY29ubmVjdCh0aGlzLmNvbXByZXNzb3IpXG4gICAgdGhpcy52Y0Rpb2RlNC5jb25uZWN0KHRoaXMuY29tcHJlc3NvcilcbiAgICB0aGlzLmNvbXByZXNzb3IuY29ubmVjdCh0aGlzLm91dEdhaW4pXG4gICAgdGhpcy5vdXRHYWluLmNvbm5lY3QodGhpcy53ZXRHYWluTm9kZSlcblxuXHRcdC8vIGxpbmUgb3V0XG4gICAgdGhpcy53ZXRHYWluTm9kZS5jb25uZWN0KHRoaXMub3V0cHV0Tm9kZSlcblxuICAgIGZvciAodmFyIGtleSBpbiBkZWZhdWx0cykge1xuICAgICAgdGhpc1trZXldID0gb3B0aW9uc1trZXldXG4gICAgICB0aGlzW2tleV0gPSAodGhpc1trZXldID09PSB1bmRlZmluZWQgfHwgdGhpc1trZXldID09PSBudWxsKSA/IGRlZmF1bHRzW2tleV0gOiB0aGlzW2tleV1cbiAgICB9XG4gIH1cblxuICB2YXIgRGlvZGVOb2RlID0gZnVuY3Rpb24gKGNvbnRleHRfKSB7XG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dF9cbiAgICB0aGlzLm5vZGUgPSB0aGlzLmNvbnRleHQuY3JlYXRlV2F2ZVNoYXBlcigpXG4gICAgdGhpcy52YiA9IDAuMlxuICAgIHRoaXMudmwgPSAwLjRcbiAgICB0aGlzLmggPSAxXG4gICAgdGhpcy5zZXRDdXJ2ZSgpXG4gIH1cblxuICBEaW9kZU5vZGUucHJvdG90eXBlLnNldERpc3RvcnRpb24gPSBmdW5jdGlvbiAoZGlzdG9ydGlvbikge1xuICAgIHRoaXMuaCA9IGRpc3RvcnRpb25cbiAgICByZXR1cm4gdGhpcy5zZXRDdXJ2ZSgpXG4gIH1cblxuICBEaW9kZU5vZGUucHJvdG90eXBlLnNldEN1cnZlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpLFxuICAgICAgc2FtcGxlcyxcbiAgICAgIHYsXG4gICAgICB2YWx1ZSxcbiAgICAgIHdzQ3VydmUsXG4gICAgICBfaSxcbiAgICAgIF9yZWYsXG4gICAgICByZXRWYWxcblxuICAgIHNhbXBsZXMgPSAxMDI0XG4gICAgd3NDdXJ2ZSA9IG5ldyBGbG9hdDMyQXJyYXkoc2FtcGxlcylcblxuICAgIGZvciAoaSA9IF9pID0gMCwgX3JlZiA9IHdzQ3VydmUubGVuZ3RoOyBfcmVmID49IDAgPyBfaSA8IF9yZWYgOiBfaSA+IF9yZWY7IGkgPSBfcmVmID49IDAgPyArK19pIDogLS1faSkge1xuICAgICAgdiA9IChpIC0gc2FtcGxlcyAvIDIpIC8gKHNhbXBsZXMgLyAyKVxuICAgICAgdiA9IE1hdGguYWJzKHYpXG4gICAgICBpZiAodiA8PSB0aGlzLnZiKSB7XG4gICAgICAgIHZhbHVlID0gMFxuICAgICAgfSBlbHNlIGlmICgodGhpcy52YiA8IHYpICYmICh2IDw9IHRoaXMudmwpKSB7XG4gICAgICAgIHZhbHVlID0gdGhpcy5oICogKChNYXRoLnBvdyh2IC0gdGhpcy52YiwgMikpIC8gKDIgKiB0aGlzLnZsIC0gMiAqIHRoaXMudmIpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSB0aGlzLmggKiB2IC0gdGhpcy5oICogdGhpcy52bCArICh0aGlzLmggKiAoKE1hdGgucG93KHRoaXMudmwgLSB0aGlzLnZiLCAyKSkgLyAoMiAqIHRoaXMudmwgLSAyICogdGhpcy52YikpKVxuICAgICAgfVxuICAgICAgd3NDdXJ2ZVtpXSA9IHZhbHVlXG4gICAgfVxuXG4gICAgcmV0VmFsID0gdGhpcy5ub2RlLmN1cnZlID0gd3NDdXJ2ZVxuICAgIHJldHVybiByZXRWYWxcbiAgfVxuXG4gIERpb2RlTm9kZS5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uIChkZXN0aW5hdGlvbikge1xuICAgIHJldHVybiB0aGlzLm5vZGUuY29ubmVjdChkZXN0aW5hdGlvbilcbiAgfVxuXG4gIFBpenppY2F0by5FZmZlY3RzLlJpbmdNb2R1bGF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShiYXNlRWZmZWN0LCB7XG5cblx0XHQvKipcblx0XHQgKiBHZXRzIGFuZCBzZXRzIHRoZSBkcnkvd2V0IG1peC5cblx0XHQgKi9cbiAgICBtaXg6IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLm1peFxuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAobWl4KSB7XG4gICAgICAgIGlmICghUHouVXRpbC5pc0luUmFuZ2UobWl4LCAwLCAxKSkgeyByZXR1cm4gfVxuXG4gICAgICAgIHRoaXMub3B0aW9ucy5taXggPSBtaXhcbiAgICAgICAgdGhpcy5kcnlHYWluTm9kZS5nYWluLnZhbHVlID0gUGl6emljYXRvLlV0aWwuZ2V0RHJ5TGV2ZWwodGhpcy5taXgpXG4gICAgICAgIHRoaXMud2V0R2Fpbk5vZGUuZ2Fpbi52YWx1ZSA9IFBpenppY2F0by5VdGlsLmdldFdldExldmVsKHRoaXMubWl4KVxuICAgICAgfVxuICAgIH0sXG5cblx0XHQvKipcblx0XHQgKiBTcGVlZCBvbiB0aGUgaW5wdXQgb3NjaWxsYXRvclxuXHRcdCAqL1xuICAgIHNwZWVkOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5zcGVlZFxuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAoc3BlZWQpIHtcbiAgICAgICAgaWYgKCFQei5VdGlsLmlzSW5SYW5nZShzcGVlZCwgMCwgMjAwMCkpIHsgcmV0dXJuIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMuc3BlZWQgPSBzcGVlZFxuICAgICAgICB0aGlzLnZJbi5mcmVxdWVuY3kudmFsdWUgPSBzcGVlZFxuICAgICAgfVxuICAgIH0sXG5cblx0XHQvKipcblx0XHQgKiBMZXZlbCBvZiBkaXN0b3J0aW9uXG5cdFx0ICovXG4gICAgZGlzdG9ydGlvbjoge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZGlzdG9ydGlvblxuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAoZGlzdG9ydGlvbikge1xuICAgICAgICBpZiAoIVB6LlV0aWwuaXNJblJhbmdlKGRpc3RvcnRpb24sIDAuMiwgNTApKSB7IHJldHVybiB9XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLmRpc3RvcnRpb24gPSBwYXJzZUZsb2F0KGRpc3RvcnRpb24sIDEwKVxuXG4gICAgICAgIHZhciBkaW9kZU5vZGVzID0gW3RoaXMudkluRGlvZGUxLCB0aGlzLnZJbkRpb2RlMiwgdGhpcy52Y0Rpb2RlMywgdGhpcy52Y0Rpb2RlNF1cblxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGRpb2RlTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgZGlvZGVOb2Rlc1tpXS5zZXREaXN0b3J0aW9uKGRpc3RvcnRpb24pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgfSlcbiAgUGl6emljYXRvLkVmZmVjdHMuUXVhZHJhZnV6eiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0ge31cbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB0aGlzLm9wdGlvbnNcblxuICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgIGxvd0dhaW46IDAuNixcbiAgICAgIG1pZExvd0dhaW46IDAuOCxcbiAgICAgIG1pZEhpZ2hHYWluOiAwLjUsXG4gICAgICBoaWdoR2FpbjogMC42XG4gICAgfVxuXG4gICAgdGhpcy5pbnB1dE5vZGUgPSBQei5jb250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgIHRoaXMub3V0cHV0Tm9kZSA9IFB6LmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgdGhpcy5kcnlHYWluTm9kZSA9IFB6LmNvbnRleHQuY3JlYXRlR2FpbigpXG4gICAgdGhpcy53ZXRHYWluTm9kZSA9IFB6LmNvbnRleHQuY3JlYXRlR2FpbigpXG5cbiAgICB0aGlzLmxvd3Bhc3NMZWZ0ID0gUHouY29udGV4dC5jcmVhdGVCaXF1YWRGaWx0ZXIoKVxuICAgIHRoaXMubG93cGFzc0xlZnQudHlwZSA9ICdsb3dwYXNzJ1xuICAgIHRoaXMubG93cGFzc0xlZnQuZnJlcXVlbmN5LnZhbHVlID0gMTQ3XG4gICAgdGhpcy5sb3dwYXNzTGVmdC5RLnZhbHVlID0gMC43MDcxXG5cbiAgICB0aGlzLmJhbmRwYXNzMUxlZnQgPSBQei5jb250ZXh0LmNyZWF0ZUJpcXVhZEZpbHRlcigpXG4gICAgdGhpcy5iYW5kcGFzczFMZWZ0LnR5cGUgPSAnYmFuZHBhc3MnXG4gICAgdGhpcy5iYW5kcGFzczFMZWZ0LmZyZXF1ZW5jeS52YWx1ZSA9IDU4N1xuICAgIHRoaXMuYmFuZHBhc3MxTGVmdC5RLnZhbHVlID0gMC43MDcxXG5cbiAgICB0aGlzLmJhbmRwYXNzMkxlZnQgPSBQei5jb250ZXh0LmNyZWF0ZUJpcXVhZEZpbHRlcigpXG4gICAgdGhpcy5iYW5kcGFzczJMZWZ0LnR5cGUgPSAnYmFuZHBhc3MnXG4gICAgdGhpcy5iYW5kcGFzczJMZWZ0LmZyZXF1ZW5jeS52YWx1ZSA9IDI0OTBcbiAgICB0aGlzLmJhbmRwYXNzMkxlZnQuUS52YWx1ZSA9IDAuNzA3MVxuXG4gICAgdGhpcy5oaWdocGFzc0xlZnQgPSBQei5jb250ZXh0LmNyZWF0ZUJpcXVhZEZpbHRlcigpXG4gICAgdGhpcy5oaWdocGFzc0xlZnQudHlwZSA9ICdoaWdocGFzcydcbiAgICB0aGlzLmhpZ2hwYXNzTGVmdC5mcmVxdWVuY3kudmFsdWUgPSA0OTgwXG4gICAgdGhpcy5oaWdocGFzc0xlZnQuUS52YWx1ZSA9IDAuNzA3MVxuXG4gICAgdGhpcy5vdmVyZHJpdmVzID0gW11cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgdGhpcy5vdmVyZHJpdmVzW2ldID0gUHouY29udGV4dC5jcmVhdGVXYXZlU2hhcGVyKClcbiAgICAgIHRoaXMub3ZlcmRyaXZlc1tpXS5jdXJ2ZSA9IGdldERpc3RvcnRpb25DdXJ2ZSgpXG4gICAgfVxuXG4gICAgdGhpcy5pbnB1dE5vZGUuY29ubmVjdCh0aGlzLndldEdhaW5Ob2RlKVxuICAgIHRoaXMuaW5wdXROb2RlLmNvbm5lY3QodGhpcy5kcnlHYWluTm9kZSlcbiAgICB0aGlzLmRyeUdhaW5Ob2RlLmNvbm5lY3QodGhpcy5vdXRwdXROb2RlKVxuXG4gICAgdmFyIGZpbHRlcnMgPSBbdGhpcy5sb3dwYXNzTGVmdCwgdGhpcy5iYW5kcGFzczFMZWZ0LCB0aGlzLmJhbmRwYXNzMkxlZnQsIHRoaXMuaGlnaHBhc3NMZWZ0XVxuICAgIGZvciAoaSA9IDA7IGkgPCBmaWx0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLndldEdhaW5Ob2RlLmNvbm5lY3QoZmlsdGVyc1tpXSlcbiAgICAgIGZpbHRlcnNbaV0uY29ubmVjdCh0aGlzLm92ZXJkcml2ZXNbaV0pXG4gICAgICB0aGlzLm92ZXJkcml2ZXNbaV0uY29ubmVjdCh0aGlzLm91dHB1dE5vZGUpXG4gICAgfVxuXG4gICAgZm9yICh2YXIga2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICB0aGlzW2tleV0gPSBvcHRpb25zW2tleV1cbiAgICAgIHRoaXNba2V5XSA9ICh0aGlzW2tleV0gPT09IHVuZGVmaW5lZCB8fCB0aGlzW2tleV0gPT09IG51bGwpID8gZGVmYXVsdHNba2V5XSA6IHRoaXNba2V5XVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldERpc3RvcnRpb25DdXJ2ZSAoZ2Fpbikge1xuICAgIHZhciBzYW1wbGVSYXRlID0gUHouY29udGV4dC5zYW1wbGVSYXRlXG4gICAgdmFyIGN1cnZlID0gbmV3IEZsb2F0MzJBcnJheShzYW1wbGVSYXRlKVxuICAgIHZhciBkZWcgPSBNYXRoLlBJIC8gMTgwXG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNhbXBsZVJhdGU7IGkrKykge1xuICAgICAgdmFyIHggPSBpICogMiAvIHNhbXBsZVJhdGUgLSAxXG4gICAgICBjdXJ2ZVtpXSA9ICgzICsgZ2FpbikgKiB4ICogMjAgKiBkZWcgLyAoTWF0aC5QSSArIGdhaW4gKiBNYXRoLmFicyh4KSlcbiAgICB9XG4gICAgcmV0dXJuIGN1cnZlXG4gIH1cblxuICBQaXp6aWNhdG8uRWZmZWN0cy5RdWFkcmFmdXp6LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoYmFzZUVmZmVjdCwge1xuXG4gICAgbG93R2Fpbjoge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubG93R2FpblxuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAobG93R2Fpbikge1xuICAgICAgICBpZiAoIVB6LlV0aWwuaXNJblJhbmdlKGxvd0dhaW4sIDAsIDEpKSB7IHJldHVybiB9XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLmxvd0dhaW4gPSBsb3dHYWluXG4gICAgICAgIHRoaXMub3ZlcmRyaXZlc1swXS5jdXJ2ZSA9IGdldERpc3RvcnRpb25DdXJ2ZShQei5VdGlsLm5vcm1hbGl6ZSh0aGlzLmxvd0dhaW4sIDAsIDE1MCkpXG4gICAgICB9XG4gICAgfSxcblxuICAgIG1pZExvd0dhaW46IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLm1pZExvd0dhaW5cbiAgICAgIH0sXG5cbiAgICAgIHNldDogZnVuY3Rpb24gKG1pZExvd0dhaW4pIHtcbiAgICAgICAgaWYgKCFQei5VdGlsLmlzSW5SYW5nZShtaWRMb3dHYWluLCAwLCAxKSkgeyByZXR1cm4gfVxuXG4gICAgICAgIHRoaXMub3B0aW9ucy5taWRMb3dHYWluID0gbWlkTG93R2FpblxuICAgICAgICB0aGlzLm92ZXJkcml2ZXNbMV0uY3VydmUgPSBnZXREaXN0b3J0aW9uQ3VydmUoUHouVXRpbC5ub3JtYWxpemUodGhpcy5taWRMb3dHYWluLCAwLCAxNTApKVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBtaWRIaWdoR2Fpbjoge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubWlkSGlnaEdhaW5cbiAgICAgIH0sXG5cbiAgICAgIHNldDogZnVuY3Rpb24gKG1pZEhpZ2hHYWluKSB7XG4gICAgICAgIGlmICghUHouVXRpbC5pc0luUmFuZ2UobWlkSGlnaEdhaW4sIDAsIDEpKSB7IHJldHVybiB9XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLm1pZEhpZ2hHYWluID0gbWlkSGlnaEdhaW5cbiAgICAgICAgdGhpcy5vdmVyZHJpdmVzWzJdLmN1cnZlID0gZ2V0RGlzdG9ydGlvbkN1cnZlKFB6LlV0aWwubm9ybWFsaXplKHRoaXMubWlkSGlnaEdhaW4sIDAsIDE1MCkpXG4gICAgICB9XG4gICAgfSxcblxuICAgIGhpZ2hHYWluOiB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5oaWdoR2FpblxuICAgICAgfSxcblxuICAgICAgc2V0OiBmdW5jdGlvbiAoaGlnaEdhaW4pIHtcbiAgICAgICAgaWYgKCFQei5VdGlsLmlzSW5SYW5nZShoaWdoR2FpbiwgMCwgMSkpIHsgcmV0dXJuIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMuaGlnaEdhaW4gPSBoaWdoR2FpblxuICAgICAgICB0aGlzLm92ZXJkcml2ZXNbM10uY3VydmUgPSBnZXREaXN0b3J0aW9uQ3VydmUoUHouVXRpbC5ub3JtYWxpemUodGhpcy5oaWdoR2FpbiwgMCwgMTUwKSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgcmV0dXJuIFBpenppY2F0b1xufSkodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiBnbG9iYWwpXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2FwcC9zcmMvanMvUGl6emljYXRvLmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n")
  /***/ },
/* 2 */
  /***/ function (module, exports, __webpack_require__) {
    eval("/**\n * Webcomponent for creating a grid sequencer application.\n *\n * @module src/desktop.js\n * @author Lowe Marklund\n * @version 1.2\n */\n\nconst Synth = __webpack_require__(3)\nconst SequencerTemplate = __webpack_require__(4)\nconst template = SequencerTemplate.template\n\n/**\n * A grid sequencer.\n *\n * @class Sequencer\n * @extends {window.HTMLElement}\n */\n\nclass Sequencer extends window.HTMLElement {\n  /**\n   * Creates an instance of Memory .\n   * @memberof Sequencer\n   */\n  constructor () {\n    super()\n    this.attachShadow({mode: 'open'})\n    this.shadowRoot.appendChild(template.content.cloneNode(true))\n    this._sequencer = this.shadowRoot.querySelector('.sequencer')\n    this._instrumentLog = this.shadowRoot.querySelector('.instrumentLog')\n    this._inputs = this.shadowRoot.querySelector('.inputs')\n    this._grid = this.shadowRoot.querySelector('.grid')\n    this._pausePlayButton = this.shadowRoot.querySelector('.pausePlayButton')\n    this._bpmLog = this.shadowRoot.querySelector('.bpmLog')\n    this._bpmInput = this.shadowRoot.querySelector('.bpmInput')\n    this._loopLengthLog = this.shadowRoot.querySelector('.loopLengthLog')\n    this._loopLengthInput = this.shadowRoot.querySelector('.loopLengthInput')\n    this._cells = this._grid.querySelectorAll('.cell')\n    this._cellColumns = null\n    this._storedGrid = null\n    this._click = null\n    this._tempo = 150\n    this._trackSamples = {\n      '1': document.createElement('audio'),\n      '2': document.createElement('audio'),\n      '3': document.createElement('audio'),\n      '4': document.createElement('audio'),\n      '5': document.createElement('audio'),\n      '6': document.createElement('audio'),\n      '7': document.createElement('audio'),\n      '8': document.createElement('audio')\n    }\n    this._drumImages = {\n      'kicks': '/image/kicks.png',\n      'snares': '/image/snares.png',\n      'hihats': '/image/hi-hats.png',\n      'toms': '/image/toms.png',\n      'cymbals': '/image/cymbals.png',\n      'percussion': '/image/percussion.png',\n      'claps': '/image/claps.png',\n      'cowbells': '/image/cowbells.png',\n      'synths': '/image/synths.png'\n    }\n    this._trackInstrument = {\n      1: 'kicks',\n      2: 'snares',\n      3: 'hihats',\n      4: 'toms',\n      5: 'cymbals',\n      6: 'percussion',\n      7: 'claps',\n      8: 'synths'\n    }\n    this._hasFocus = false\n    this._synth = new Synth()\n    this._isPlaying = false\n  }\n  /**\n   * Watches attributes for changes on the element.\n   *\n   * @readonly\n   * @static\n   * @memberof Sequencer\n   */\n  static get observedAttributes () {\n    return ['looplength', 'currentbeat']\n  }\n\n  /**\n   * Called by the browser engine when an attribute changes.\n   *\n   * @param {string} attributeName\n   * @param {string} oldValue\n   * @param {string} newValue\n   * @memberof Sequencer\n   */\n  attributeChangedCallback (attributeName, oldValue, newValue) {\n    // re-renders grid when loop length is changed\n    if (attributeName === 'looplength' && oldValue !== null) {\n      this.storeGrid()\n      this.removeGrid()\n      this.renderGrid(this.getAttribute('instrument'))\n      this.loadStoredGrid()\n      clearInterval(this._click)\n      if (this._sequencer.getElementsByClassName('pausePlayButton')[0].getAttribute('type') === 'pause') {\n        if (Number(newValue) < Number(this.getAttribute('currentbeat'))) {\n          this.setAttribute('currentbeat', '0')\n        }\n        // syncs with other sequencers\n        this.timeSync()\n      }\n    }\n  }\n    /**\n   * Called when the element is connected to the DOM.\n   *\n   * @memberof Sequencer\n   */\n  connectedCallback () {\n    this.setAttribute('looplength', '16')\n    this.renderGrid()\n    this.inputListen()\n    this._trackSamples['1'].src = '/audio/drums/kicks/1.wav'\n    this._trackSamples['2'].src = '/audio/drums/snares/1.wav'\n    this._trackSamples['3'].src = '/audio/drums/hihats/1.wav'\n    this._trackSamples['4'].src = '/audio/drums/toms/1.wav'\n    this._trackSamples['5'].src = '/audio/drums/cymbals/1.wav'\n    this._trackSamples['6'].src = '/audio/drums/percussion/1.wav'\n    this._trackSamples['7'].src = '/audio/drums/claps/1.wav'\n  }\n\n     /**\n   * Listens after input from the user.\n   *\n   * @memberof Sequencer\n   */\n  inputListen () {\n    this._sequencer.addEventListener('mousedown', event => {\n      // activates/deactivates cell\n      if (event.target.getAttribute('class') === 'cell' && event.shiftKey === false) {\n        if (event.target.getAttribute('active') === 'false') {\n          this.cellActivate(event.target, true)\n        } else {\n          this.cellDeactivate(event.target)\n        }\n      }\n      if (event.target.getAttribute('class') === 'cell' && event.target.getAttribute('active') === 'true' && event.shiftKey === true) {\n        this.cellActivate(event.target, true, true)\n      }\n\n      // pauses and plays the sequencer(s)\n      if (event.target.getAttribute('class') === 'pausePlayButton') {\n        if (event.target.getAttribute('type') === 'play') {\n          // syncs with other sequencers\n          this.timeSync()\n          this._isPlaying = true\n        } else {\n          for (let i = 0; i < this.parentNode.parentNode.querySelectorAll('grid-sequencer').length; i++) {\n            clearInterval(this.parentNode.parentNode.querySelectorAll('grid-sequencer')[i]._click)\n            this.parentNode.parentNode.querySelectorAll('grid-sequencer')[i]._pausePlayButton.setAttribute('type', 'play')\n            this.parentNode.parentNode.querySelectorAll('grid-sequencer')[i]._pausePlayButton.setAttribute('src', '/image/icons8-play-button-50.png')\n            this.parentNode.parentNode.querySelectorAll('grid-sequencer')[i]._isPlaying = false\n          }\n        }\n      }\n        // changes sample of the track\n      if (event.target.getAttribute('class') === 'instrumentIcon') {\n        // changes drumtype\n        let currentInstrument = Number(event.target.getAttribute('type'))\n        let drumTypes = ['kicks', 'snares', 'hihats', 'toms', 'cymbals', 'percussion', 'claps', 'cowbells', 'synths']\n        let nextIcon\n\n        if (Number(event.target.getAttribute('type')) + 1 > 8) {\n          nextIcon = 0\n          event.target.setAttribute('src', this._drumImages[drumTypes[nextIcon]])\n          event.target.setAttribute('type', [`${nextIcon}`])\n          event.target.nextSibling.innerText = '1'\n          this._trackSamples[event.target.nextSibling.nextSibling.getAttribute('row')].src = `/audio/drums/${drumTypes[0]}/1.wav`\n          this._trackInstrument[event.target.nextSibling.nextSibling.getAttribute('row')] = drumTypes[nextIcon]\n        } else {\n          nextIcon = Number(event.target.getAttribute('type')) + 1\n          event.target.setAttribute('src', this._drumImages[drumTypes[nextIcon]])\n          event.target.setAttribute('type', [`${nextIcon}`])\n          event.target.nextSibling.innerText = '1'\n          this._trackSamples[event.target.nextSibling.nextSibling.getAttribute('row')].src = `/audio/drums/${drumTypes[currentInstrument + 1]}/1.wav`\n          this._trackInstrument[event.target.nextSibling.nextSibling.getAttribute('row')] = drumTypes[nextIcon]\n        }\n      }\n      if (event.target.getAttribute('class') === 'instrumentNumber') {\n        // changes sample number\n        let currentInstrument = Number(event.target.previousSibling.getAttribute('type'))\n        let instrumentTypeSampleAmount = {kicks: 26, snares: 23, hihats: 15, toms: 9, cymbals: 4, percussion: 13, claps: 6, cowbells: 1}\n        let nextSample = Number(event.target.innerText) + 1\n\n        if (nextSample > instrumentTypeSampleAmount[Object.keys(instrumentTypeSampleAmount)[currentInstrument]]) {\n          event.target.innerText = '1'\n        } else {\n          event.target.innerText = nextSample\n          this._trackSamples[event.target.nextSibling.getAttribute('row')].src = `/audio/drums/${Object.keys(instrumentTypeSampleAmount)[currentInstrument]}/${nextSample}.wav`\n        }\n      }\n\n      // clears the grid\n      if (event.target.getAttribute('class') === 'clearButton') {\n        this.clearGrid()\n      }\n    })\n\n    this._inputs.addEventListener('keydown', event => {\n      if (event.key === 'Enter') {\n            // Changes the loop length to what the user has entered\n        if (event.target.getAttribute('class') === 'loopLengthInput') {\n               // Error handling\n          if (Number(event.target.value) <= 32 && Number(event.target.value) > 0) {\n            this.setAttribute('looplength', event.target.value)\n\n            this._loopLengthLog.innerText = 'Length: ' + event.target.value\n            event.target.setAttribute('placeholder', 'Enter loop length (max = 32 min = 1)')\n            event.target.value = null\n            event.target.blur()\n          } if (Number(event.target.value) > 32 || Number(event.target.value) < 0 || isNaN(Number(event.target.value)) === true) {\n            event.target.setAttribute('placeholder', 'Value must be an integer between 1 and 32')\n            event.target.value = null\n            event.target.blur()\n          }\n        }\n            // Changes the tempo to what the user has entered\n        if (event.target.getAttribute('class') === 'bmpInput') {\n          let input = Number(event.target.value)\n            // Error handling\n          if (input <= 300 && input >= 30) {\n            for (let i = 0; i < this.parentNode.parentNode.querySelectorAll('grid-sequencer').length; i++) {\n              this.parentNode.parentNode.querySelectorAll('grid-sequencer')[i]._bpmLog.innerText = 'BPM: ' + event.target.value\n            }\n            this._tempo = input\n            event.target.setAttribute('placeholder', 'Enter tempo (BPM) max = 300 min = 30')\n            event.target.value = null\n            event.target.blur()\n          }\n\n          // syncs with other sequencers\n          if (this._sequencer.getElementsByClassName('pausePlayButton')[0].getAttribute('type') === 'pause' && isNaN(input) === false) {\n            this.timeSync()\n          }\n\n          if (isNaN(input) === true || input < 30 || input >= 300) {\n            event.target.setAttribute('placeholder', 'Value must be an integer between 30 and 3')\n            event.target.value = null\n            event.target.blur()\n          }\n        }\n      }\n    })\n  }\n    /**\n   * Renders grid of the sequencer\n   *\n   * @memberof Sequencer\n   */\n  renderGrid () {\n    let column = 0\n    let row = 1\n    let loopLength = Number(this.getAttribute('looplength'))\n    let maxRows = 8\n\n    for (let i = 0; i < loopLength * 9; i++) {\n      if (i === 0) {\n        let instrumentType = document.createElement('img')\n        let instrumentNumber = document.createElement('h6')\n        instrumentType.setAttribute('src', this._drumImages[this._trackInstrument[row]])\n        instrumentType.setAttribute('type', `${row - 1}`)\n        instrumentType.setAttribute('class', 'instrumentIcon')\n        instrumentNumber.setAttribute('class', 'instrumentNumber')\n        instrumentNumber.innerText = '1'\n        this._grid.appendChild(instrumentType)\n        this._grid.appendChild(instrumentNumber)\n      }\n\n      let cell = document.createElement('img')\n      column += 1\n      cell.setAttribute('active', `false`)\n      cell.setAttribute('id', `${i}`)\n      cell.setAttribute('class', `cell`)\n      cell.setAttribute('column', `${column}`)\n      cell.setAttribute('row', `${row}`)\n      cell.setAttribute('note', 'C')\n      cell.setAttribute('octave', '3')\n      cell.setAttribute('noteLength', '100')\n      cell.setAttribute('notemenuopen', 'false')\n      cell.setAttribute('chosen', 'false')\n      this._grid.appendChild(cell)\n\n      if (column === loopLength) {\n        let rowBreak = document.createElement('br')\n        let instrumentType = document.createElement('img')\n        let instrumentNumber = document.createElement('h6')\n        instrumentType.setAttribute('src', this._drumImages[this._trackInstrument[row + 1]])\n        instrumentType.setAttribute('type', `${row}`)\n        instrumentType.setAttribute('class', 'instrumentIcon')\n        instrumentNumber.setAttribute('class', 'instrumentNumber')\n        instrumentNumber.innerText = '1'\n        this._grid.appendChild(rowBreak)\n        this._grid.appendChild(instrumentType)\n        this._grid.appendChild(instrumentNumber)\n\n        column = 0\n        row += 1\n      }\n\n      if (row > maxRows) {\n        this._cells = this._grid.querySelectorAll('.cell')\n        this._grid.removeChild(this._grid.querySelectorAll('.instrumentIcon')[(this._grid.querySelectorAll('.instrumentIcon').length) - 1])\n        this._grid.removeChild(this._grid.querySelectorAll('.instrumentNumber')[(this._grid.querySelectorAll('.instrumentNumber').length) - 1])\n        this._cellColumns = column\n        if (loopLength > 16) {\n          this._sequencer.style.width = `${loopLength * 31}px`\n        } else {\n          this._sequencer.style.width = '500px'\n        }\n        return this._grid\n      }\n    }\n  }\n     /**\n   * Removes grid of the sequencer\n   *\n   * @memberof Sequencer\n   */\n  removeGrid () {\n    let gridLength = this._grid.children.length\n    for (let i = 0; i < gridLength; i++) {\n      this._grid.removeChild(this._grid.firstElementChild)\n    }\n  }\n   /**\n   * Deactivates all cells of the sequencer\n   *\n   * @memberof Sequencer\n   */\n  clearGrid () {\n    let gridLength = this._cells.length\n\n    for (let i = 0; i < gridLength; i++) {\n      this.cellDeactivate(this._cells[i])\n      if (this._pausePlayButton.getAttribute('type') === 'pause') {\n        for (let i = 0; i < this.parentNode.parentNode.querySelectorAll('grid-sequencer').length; i++) {\n          clearInterval(this.parentNode.parentNode.querySelectorAll('grid-sequencer')[i]._click)\n          this.parentNode.parentNode.querySelectorAll('grid-sequencer')[i].playGrid()\n        }\n      }\n    }\n  }\n    /**\n   * Stores a map of the sequencers activated cells\n   *\n   * @memberof Sequencer\n   */\n  storeGrid () {\n    let grid = {}\n\n    for (let i = 1; i <= 8; i++) {\n      grid[i] = []\n    }\n\n    for (let i = 0; i < this._cells.length; i++) {\n      if (this._cells[i].getAttribute('active') === 'true') {\n        grid[Number(this._cells[i].getAttribute('row'))].push(this._cells[i].getAttribute('column'))\n      }\n    }\n    this._storedGrid = grid\n  }\n   /**\n   * Loads a map of activated cells into the sequencer\n   *\n   * @memberof Sequencer\n   */\n  loadStoredGrid () {\n    for (let i = 0; i < this._cells.length; i++) {\n      if (this._cells[i].getAttribute('column') === this.getAttribute('currentbeat') && this._cells[i].getAttribute('chosen') === 'false') {\n        this._cells[i].style.backgroundColor = 'red'\n      }\n\n      for (let i2 = 0; i2 < this._storedGrid[Number(this._cells[i].getAttribute('row'))].length; i2++) {\n        if (this._storedGrid[Number(this._cells[i].getAttribute('row'))][i2] === this._cells[i].getAttribute('column')) {\n          this.cellActivate(this._cells[i])\n        }\n      }\n    }\n  }\n   /**\n   * Plays the sequencer\n   *\n   * @param {string} beat - The grid column to start playing at\n   * @param {number} tempo - The tempo to play at\n   * @return {function} - An interval creating each beat of the sequencer\n   * @memberof Sequencer\n   */\n  playGrid (beat = this.getAttribute('currentbeat'), tempo = this._tempo) {\n    let column = Number(beat)\n    let cells = this._grid.querySelectorAll('.cell')\n\n    let click = setInterval(() => {\n      for (let i = 0; i < cells.length; i += 1) {\n        if (Number(cells[i].getAttribute('column')) === column) {\n          if (this._cells[i].getAttribute('chosen') === 'false') {\n            cells[i].style.backgroundColor = 'red'\n          }\n\n          this.setAttribute('currentbeat', column)\n\n          if (i > 0 && cells[i - 1].getAttribute('active') === 'false') {\n            this.cellDeactivate(cells[i - 1])\n          }\n          if (cells[i].getAttribute('active') === 'true') {\n            if (this._trackInstrument[cells[i].getAttribute('row')] === 'synths') {\n              let note = cells[i].getAttribute('note')\n              let octave = Number(cells[i].getAttribute('octave'))\n              let frequency = this._synth._noteFreq[octave][note]\n              let key = this._synth.createKey(note, octave, frequency, note + `${octave}`)\n              this._synth.notePressed(key, note + `${octave}`, cells[i])\n            }\n\n            this._trackSamples[cells[i].getAttribute('row')].pause()\n            this._trackSamples[cells[i].getAttribute('row')].currentTime = 0\n            let playPromise = this._trackSamples[cells[i].getAttribute('row')].play()\n            playPromise.then(_ => {\n\n            }).catch(error => {\n\n            })\n          } else {\n            this.cellDeactivate(cells[(cells.length) - 1])\n          }\n        }\n        if (cells[i].getAttribute('active') === 'true' && cells[i].getAttribute('chosen') === 'false') {\n          this.cellActivate(cells[i], false)\n        }\n      }\n\n      if (column >= Number(this.getAttribute('looplength'))) {\n        column = 1\n      } else {\n        column += 1\n      }\n    }, (60000 / tempo) / 4)\n\n    this._click = click\n  }\n  /**\n   * Syncs all the sequencers open on the desktop to start/stop at the same time\n   *\n   * @memberof Sequencer\n   */\n  timeSync () {\n    for (let i = 0; i < this.parentNode.parentNode.querySelectorAll('grid-sequencer').length; i++) {\n      clearInterval(this.parentNode.parentNode.querySelectorAll('grid-sequencer')[i]._click)\n      let currentBeat = this.parentNode.parentNode.querySelectorAll('grid-sequencer')[i].getAttribute('currentbeat')\n      this.parentNode.parentNode.querySelectorAll('grid-sequencer')[i].playGrid(currentBeat, this._tempo)\n      this.parentNode.parentNode.querySelectorAll('grid-sequencer')[i]._bpmLog.innerText = `BPM: ${this._tempo}`\n      if (this._pausePlayButton.getAttribute('type') === 'play') {\n        this.parentNode.parentNode.querySelectorAll('grid-sequencer')[i]._pausePlayButton.setAttribute('type', 'pause')\n        this.parentNode.parentNode.querySelectorAll('grid-sequencer')[i]._pausePlayButton.setAttribute('src', '/image/icons8-pause-button-50.png')\n      } else {\n        this.parentNode.parentNode.querySelectorAll('grid-sequencer')[i]._pausePlayButton.setAttribute('type', 'pause')\n        this.parentNode.parentNode.querySelectorAll('grid-sequencer')[i]._pausePlayButton.setAttribute('src', '/image/icons8-pause-button-50.png')\n      }\n    }\n  }\n  /**\n   * Activates a cell in the grid\n   *\n   * @memberof Sequencer\n   */\n  cellDeactivate (cell) {\n    cell.setAttribute('active', 'false')\n    cell.style.backgroundColor = 'white'\n  }\n  /**\n   * Deactivates a cell in the grid\n   *\n   * @memberof Sequencer\n   */\n  cellActivate (cell, cellClicked, shiftClick) {\n    cell.setAttribute('active', 'true')\n    cell.style.backgroundColor = 'yellow'\n\n    if (cellClicked === true) {\n      cell.style.backgroundColor = 'green'\n      cell.setAttribute('chosen', 'true')\n      this._grid.querySelectorAll('.cell').forEach(c => {\n        if (c.getAttribute('active') === 'true' && c !== cell) {\n          this.cellActivate(c, false)\n        }\n      })\n    }\n\n    if (this._trackInstrument[cell.getAttribute('row')] === 'synths' && cellClicked === true) {\n      if (this.shadowRoot.querySelectorAll('.changeNoteMenu')[0]) {\n        this.shadowRoot.querySelectorAll('.changeNoteMenu')[0].setAttribute('assignedCell', cell.id)\n        this.shadowRoot.querySelectorAll('.noteSelectionMenu')[0].children[1].value = cell.getAttribute('note')\n        this.shadowRoot.querySelectorAll('.octaveSelectionMenu')[0].children[1].value = cell.getAttribute('octave')\n        this.shadowRoot.querySelectorAll('.noteLengthInput')[0].children[1].value = cell.getAttribute('noteLength')\n        cell.style.border = 'green'\n      } else {\n        this.changeCellNote(cell)\n      }\n    } if (this.shadowRoot.querySelectorAll('.changeNoteMenu')[0] && this._trackInstrument[cell.getAttribute('row')] !== 'synths' && cellClicked === true) {\n      this._grid.removeChild(this.shadowRoot.querySelectorAll('.changeNoteMenu')[0])\n    }\n  }\n\n  changeCellNote (cell) {\n    let changeNoteMenu = document.createElement('div')\n    let noteSelectionMenu = document.createElement('div')\n    let octaveSelectionMenu = document.createElement('div')\n    let noteLengthInput = document.createElement('div')\n    let closeButton = document.createElement('div')\n\n    changeNoteMenu.setAttribute('class', 'changeNoteMenu')\n    noteSelectionMenu.setAttribute('class', 'noteSelectionMenu')\n    octaveSelectionMenu.setAttribute('class', 'octaveSelectionMenu')\n    noteLengthInput.setAttribute('class', 'noteLengthInput')\n\n    noteSelectionMenu.innerHTML =\n    `<span>Note: </span>\n    <select name=\"note\">\n      <option value=\"C\" selected>C</option>\n      <option value=\"C#\">C#</option>\n      <option value=\"D\">D</option>\n      <option value=\"D#\">D#</option>\n      <option value=\"E\">E</option>\n      <option value=\"F\">F</option>\n      <option value=\"F#\">F#</option>\n      <option value=\"G\">G</option>\n      <option value=\"G#\">G#</option>\n      <option value=\"A\">A</option>\n      <option value=\"A#\">A#</option>\n      <option value=\"B\">B</option>\n    </select>`\n    octaveSelectionMenu.innerHTML =\n    `<span>Octave: </span>\n    <select name=\"octave\">\n      <option value=\"1\">1</option>\n      <option value=\"2\">2</option>\n      <option value=\"3\" selected>3</option>\n      <option value=\"4\">4</option>\n      <option value=\"5\">5</option>\n      <option value=\"6\">6</option>\n      <option value=\"7\">7</option>\n    </select>`\n\n    noteLengthInput.innerHTML =\n    `<span>NoteLength: </span>\n    <input type=\"range\" min=\"0\" max=\"1000\" step=\"10\"\n        value=\"200\" list=\"noteLengths\" name=\"noteLength\">\n    <datalist id=\"noteLength\">\n      <option value=\"0.0\" label=\"Mute\">\n      <option value=\"1.0\" label=\"100%\">\n    </datalist>`\n\n    changeNoteMenu.setAttribute('assignedcell', cell.id)\n\n    closeButton.innerText = 'x'\n\n    if (cell.getAttribute('notemenuopen') === 'false') {\n      changeNoteMenu.appendChild(noteSelectionMenu)\n      changeNoteMenu.appendChild(octaveSelectionMenu)\n      changeNoteMenu.appendChild(noteLengthInput)\n      changeNoteMenu.appendChild(closeButton)\n\n      cell.parentNode.appendChild(changeNoteMenu)\n      cell.setAttribute('notemenuopen', 'true')\n    }\n\n    let changeNoteElement = this.shadowRoot.querySelector(\"select[name='note']\")\n    let changeOctaveElement = this.shadowRoot.querySelector(\"select[name='octave']\")\n    let changeNoteLengthElement = this.shadowRoot.querySelector(\"input[name='noteLength']\")\n\n    if (cell.getAttribute('note') && cell.getAttribute('octave') && cell.getAttribute('noteLength') && this._grid.querySelectorAll('.changeNoteMenu')[0]) {\n      changeNoteElement.value = cell.getAttribute('note')\n      changeOctaveElement.value = cell.getAttribute('octave')\n      changeNoteLengthElement.value = cell.getAttribute('noteLength')\n    }\n\n    changeNoteMenu.onchange = () => {\n      let cells = this._grid.querySelectorAll('.cell')\n      cells.forEach(c => {\n        if (c.id === changeNoteMenu.getAttribute('assignedcell')) {\n          c.setAttribute('note', `${changeNoteElement.value}`)\n          c.setAttribute('octave', `${changeOctaveElement.value}`)\n          c.setAttribute('noteLength', `${changeNoteLengthElement.value}`)\n        }\n      })\n    }\n\n    closeButton.onclick = (event) => {\n      for (let i = 0; i < event.target.parentNode.children.length;) {\n        event.target.parentNode.removeChild(event.target.parentNode.children[i])\n      }\n    }\n  }\n}\n\nwindow.customElements.define('grid-sequencer', Sequencer)\n\nmodule.exports = Sequencer\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc3JjL2pzL3NlcXVlbmNlci5qcz9mMDk3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixhQUFhO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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YmNvbXBvbmVudCBmb3IgY3JlYXRpbmcgYSBncmlkIHNlcXVlbmNlciBhcHBsaWNhdGlvbi5cbiAqXG4gKiBAbW9kdWxlIHNyYy9kZXNrdG9wLmpzXG4gKiBAYXV0aG9yIExvd2UgTWFya2x1bmRcbiAqIEB2ZXJzaW9uIDEuMlxuICovXG5cbmNvbnN0IFN5bnRoID0gcmVxdWlyZSgnLi9zeW50aCcpXG5jb25zdCBTZXF1ZW5jZXJUZW1wbGF0ZSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL3NlcXVlbmNlclRlbXBsYXRlJylcbmNvbnN0IHRlbXBsYXRlID0gU2VxdWVuY2VyVGVtcGxhdGUudGVtcGxhdGVcblxuLyoqXG4gKiBBIGdyaWQgc2VxdWVuY2VyLlxuICpcbiAqIEBjbGFzcyBTZXF1ZW5jZXJcbiAqIEBleHRlbmRzIHt3aW5kb3cuSFRNTEVsZW1lbnR9XG4gKi9cblxuY2xhc3MgU2VxdWVuY2VyIGV4dGVuZHMgd2luZG93LkhUTUxFbGVtZW50IHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgTWVtb3J5IC5cbiAgICogQG1lbWJlcm9mIFNlcXVlbmNlclxuICAgKi9cbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLmF0dGFjaFNoYWRvdyh7bW9kZTogJ29wZW4nfSlcbiAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkpXG4gICAgdGhpcy5fc2VxdWVuY2VyID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJy5zZXF1ZW5jZXInKVxuICAgIHRoaXMuX2luc3RydW1lbnRMb2cgPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignLmluc3RydW1lbnRMb2cnKVxuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCcuaW5wdXRzJylcbiAgICB0aGlzLl9ncmlkID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJy5ncmlkJylcbiAgICB0aGlzLl9wYXVzZVBsYXlCdXR0b24gPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignLnBhdXNlUGxheUJ1dHRvbicpXG4gICAgdGhpcy5fYnBtTG9nID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJy5icG1Mb2cnKVxuICAgIHRoaXMuX2JwbUlucHV0ID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJy5icG1JbnB1dCcpXG4gICAgdGhpcy5fbG9vcExlbmd0aExvZyA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCcubG9vcExlbmd0aExvZycpXG4gICAgdGhpcy5fbG9vcExlbmd0aElucHV0ID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJy5sb29wTGVuZ3RoSW5wdXQnKVxuICAgIHRoaXMuX2NlbGxzID0gdGhpcy5fZ3JpZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpXG4gICAgdGhpcy5fY2VsbENvbHVtbnMgPSBudWxsXG4gICAgdGhpcy5fc3RvcmVkR3JpZCA9IG51bGxcbiAgICB0aGlzLl9jbGljayA9IG51bGxcbiAgICB0aGlzLl90ZW1wbyA9IDE1MFxuICAgIHRoaXMuX3RyYWNrU2FtcGxlcyA9IHtcbiAgICAgICcxJzogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKSxcbiAgICAgICcyJzogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKSxcbiAgICAgICczJzogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKSxcbiAgICAgICc0JzogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKSxcbiAgICAgICc1JzogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKSxcbiAgICAgICc2JzogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKSxcbiAgICAgICc3JzogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKSxcbiAgICAgICc4JzogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKVxuICAgIH1cbiAgICB0aGlzLl9kcnVtSW1hZ2VzID0ge1xuICAgICAgJ2tpY2tzJzogJy9pbWFnZS9raWNrcy5wbmcnLFxuICAgICAgJ3NuYXJlcyc6ICcvaW1hZ2Uvc25hcmVzLnBuZycsXG4gICAgICAnaGloYXRzJzogJy9pbWFnZS9oaS1oYXRzLnBuZycsXG4gICAgICAndG9tcyc6ICcvaW1hZ2UvdG9tcy5wbmcnLFxuICAgICAgJ2N5bWJhbHMnOiAnL2ltYWdlL2N5bWJhbHMucG5nJyxcbiAgICAgICdwZXJjdXNzaW9uJzogJy9pbWFnZS9wZXJjdXNzaW9uLnBuZycsXG4gICAgICAnY2xhcHMnOiAnL2ltYWdlL2NsYXBzLnBuZycsXG4gICAgICAnY293YmVsbHMnOiAnL2ltYWdlL2Nvd2JlbGxzLnBuZycsXG4gICAgICAnc3ludGhzJzogJy9pbWFnZS9zeW50aHMucG5nJ1xuICAgIH1cbiAgICB0aGlzLl90cmFja0luc3RydW1lbnQgPSB7XG4gICAgICAxOiAna2lja3MnLFxuICAgICAgMjogJ3NuYXJlcycsXG4gICAgICAzOiAnaGloYXRzJyxcbiAgICAgIDQ6ICd0b21zJyxcbiAgICAgIDU6ICdjeW1iYWxzJyxcbiAgICAgIDY6ICdwZXJjdXNzaW9uJyxcbiAgICAgIDc6ICdjbGFwcycsXG4gICAgICA4OiAnc3ludGhzJ1xuICAgIH1cbiAgICB0aGlzLl9oYXNGb2N1cyA9IGZhbHNlXG4gICAgdGhpcy5fc3ludGggPSBuZXcgU3ludGgoKVxuICAgIHRoaXMuX2lzUGxheWluZyA9IGZhbHNlXG4gIH1cbiAgLyoqXG4gICAqIFdhdGNoZXMgYXR0cmlidXRlcyBmb3IgY2hhbmdlcyBvbiB0aGUgZWxlbWVudC5cbiAgICpcbiAgICogQHJlYWRvbmx5XG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlcm9mIFNlcXVlbmNlclxuICAgKi9cbiAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMgKCkge1xuICAgIHJldHVybiBbJ2xvb3BsZW5ndGgnLCAnY3VycmVudGJlYXQnXVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCBieSB0aGUgYnJvd3NlciBlbmdpbmUgd2hlbiBhbiBhdHRyaWJ1dGUgY2hhbmdlcy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZU5hbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9sZFZhbHVlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZXdWYWx1ZVxuICAgKiBAbWVtYmVyb2YgU2VxdWVuY2VyXG4gICAqL1xuICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sgKGF0dHJpYnV0ZU5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgIC8vIHJlLXJlbmRlcnMgZ3JpZCB3aGVuIGxvb3AgbGVuZ3RoIGlzIGNoYW5nZWRcbiAgICBpZiAoYXR0cmlidXRlTmFtZSA9PT0gJ2xvb3BsZW5ndGgnICYmIG9sZFZhbHVlICE9PSBudWxsKSB7XG4gICAgICB0aGlzLnN0b3JlR3JpZCgpXG4gICAgICB0aGlzLnJlbW92ZUdyaWQoKVxuICAgICAgdGhpcy5yZW5kZXJHcmlkKHRoaXMuZ2V0QXR0cmlidXRlKCdpbnN0cnVtZW50JykpXG4gICAgICB0aGlzLmxvYWRTdG9yZWRHcmlkKClcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fY2xpY2spXG4gICAgICBpZiAodGhpcy5fc2VxdWVuY2VyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3BhdXNlUGxheUJ1dHRvbicpWzBdLmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAncGF1c2UnKSB7XG4gICAgICAgIGlmIChOdW1iZXIobmV3VmFsdWUpIDwgTnVtYmVyKHRoaXMuZ2V0QXR0cmlidXRlKCdjdXJyZW50YmVhdCcpKSkge1xuICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdjdXJyZW50YmVhdCcsICcwJylcbiAgICAgICAgfVxuICAgICAgICAvLyBzeW5jcyB3aXRoIG90aGVyIHNlcXVlbmNlcnNcbiAgICAgICAgdGhpcy50aW1lU3luYygpXG4gICAgICB9XG4gICAgfVxuICB9XG4gICAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRoZSBlbGVtZW50IGlzIGNvbm5lY3RlZCB0byB0aGUgRE9NLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgU2VxdWVuY2VyXG4gICAqL1xuICBjb25uZWN0ZWRDYWxsYmFjayAoKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2xvb3BsZW5ndGgnLCAnMTYnKVxuICAgIHRoaXMucmVuZGVyR3JpZCgpXG4gICAgdGhpcy5pbnB1dExpc3RlbigpXG4gICAgdGhpcy5fdHJhY2tTYW1wbGVzWycxJ10uc3JjID0gJy9hdWRpby9kcnVtcy9raWNrcy8xLndhdidcbiAgICB0aGlzLl90cmFja1NhbXBsZXNbJzInXS5zcmMgPSAnL2F1ZGlvL2RydW1zL3NuYXJlcy8xLndhdidcbiAgICB0aGlzLl90cmFja1NhbXBsZXNbJzMnXS5zcmMgPSAnL2F1ZGlvL2RydW1zL2hpaGF0cy8xLndhdidcbiAgICB0aGlzLl90cmFja1NhbXBsZXNbJzQnXS5zcmMgPSAnL2F1ZGlvL2RydW1zL3RvbXMvMS53YXYnXG4gICAgdGhpcy5fdHJhY2tTYW1wbGVzWyc1J10uc3JjID0gJy9hdWRpby9kcnVtcy9jeW1iYWxzLzEud2F2J1xuICAgIHRoaXMuX3RyYWNrU2FtcGxlc1snNiddLnNyYyA9ICcvYXVkaW8vZHJ1bXMvcGVyY3Vzc2lvbi8xLndhdidcbiAgICB0aGlzLl90cmFja1NhbXBsZXNbJzcnXS5zcmMgPSAnL2F1ZGlvL2RydW1zL2NsYXBzLzEud2F2J1xuICB9XG5cbiAgICAgLyoqXG4gICAqIExpc3RlbnMgYWZ0ZXIgaW5wdXQgZnJvbSB0aGUgdXNlci5cbiAgICpcbiAgICogQG1lbWJlcm9mIFNlcXVlbmNlclxuICAgKi9cbiAgaW5wdXRMaXN0ZW4gKCkge1xuICAgIHRoaXMuX3NlcXVlbmNlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBldmVudCA9PiB7XG4gICAgICAvLyBhY3RpdmF0ZXMvZGVhY3RpdmF0ZXMgY2VsbFxuICAgICAgaWYgKGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgPT09ICdjZWxsJyAmJiBldmVudC5zaGlmdEtleSA9PT0gZmFsc2UpIHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2FjdGl2ZScpID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgdGhpcy5jZWxsQWN0aXZhdGUoZXZlbnQudGFyZ2V0LCB0cnVlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuY2VsbERlYWN0aXZhdGUoZXZlbnQudGFyZ2V0KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSA9PT0gJ2NlbGwnICYmIGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2FjdGl2ZScpID09PSAndHJ1ZScgJiYgZXZlbnQuc2hpZnRLZXkgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5jZWxsQWN0aXZhdGUoZXZlbnQudGFyZ2V0LCB0cnVlLCB0cnVlKVxuICAgICAgfVxuXG4gICAgICAvLyBwYXVzZXMgYW5kIHBsYXlzIHRoZSBzZXF1ZW5jZXIocylcbiAgICAgIGlmIChldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdjbGFzcycpID09PSAncGF1c2VQbGF5QnV0dG9uJykge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAncGxheScpIHtcbiAgICAgICAgICAvLyBzeW5jcyB3aXRoIG90aGVyIHNlcXVlbmNlcnNcbiAgICAgICAgICB0aGlzLnRpbWVTeW5jKClcbiAgICAgICAgICB0aGlzLl9pc1BsYXlpbmcgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKCdncmlkLXNlcXVlbmNlcicpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2dyaWQtc2VxdWVuY2VyJylbaV0uX2NsaWNrKVxuICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbCgnZ3JpZC1zZXF1ZW5jZXInKVtpXS5fcGF1c2VQbGF5QnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdwbGF5JylcbiAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2dyaWQtc2VxdWVuY2VyJylbaV0uX3BhdXNlUGxheUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3NyYycsICcvaW1hZ2UvaWNvbnM4LXBsYXktYnV0dG9uLTUwLnBuZycpXG4gICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKCdncmlkLXNlcXVlbmNlcicpW2ldLl9pc1BsYXlpbmcgPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgICAvLyBjaGFuZ2VzIHNhbXBsZSBvZiB0aGUgdHJhY2tcbiAgICAgIGlmIChldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdjbGFzcycpID09PSAnaW5zdHJ1bWVudEljb24nKSB7XG4gICAgICAgIC8vIGNoYW5nZXMgZHJ1bXR5cGVcbiAgICAgICAgbGV0IGN1cnJlbnRJbnN0cnVtZW50ID0gTnVtYmVyKGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSlcbiAgICAgICAgbGV0IGRydW1UeXBlcyA9IFsna2lja3MnLCAnc25hcmVzJywgJ2hpaGF0cycsICd0b21zJywgJ2N5bWJhbHMnLCAncGVyY3Vzc2lvbicsICdjbGFwcycsICdjb3diZWxscycsICdzeW50aHMnXVxuICAgICAgICBsZXQgbmV4dEljb25cblxuICAgICAgICBpZiAoTnVtYmVyKGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSkgKyAxID4gOCkge1xuICAgICAgICAgIG5leHRJY29uID0gMFxuICAgICAgICAgIGV2ZW50LnRhcmdldC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHRoaXMuX2RydW1JbWFnZXNbZHJ1bVR5cGVzW25leHRJY29uXV0pXG4gICAgICAgICAgZXZlbnQudGFyZ2V0LnNldEF0dHJpYnV0ZSgndHlwZScsIFtgJHtuZXh0SWNvbn1gXSlcbiAgICAgICAgICBldmVudC50YXJnZXQubmV4dFNpYmxpbmcuaW5uZXJUZXh0ID0gJzEnXG4gICAgICAgICAgdGhpcy5fdHJhY2tTYW1wbGVzW2V2ZW50LnRhcmdldC5uZXh0U2libGluZy5uZXh0U2libGluZy5nZXRBdHRyaWJ1dGUoJ3JvdycpXS5zcmMgPSBgL2F1ZGlvL2RydW1zLyR7ZHJ1bVR5cGVzWzBdfS8xLndhdmBcbiAgICAgICAgICB0aGlzLl90cmFja0luc3RydW1lbnRbZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nLm5leHRTaWJsaW5nLmdldEF0dHJpYnV0ZSgncm93JyldID0gZHJ1bVR5cGVzW25leHRJY29uXVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5leHRJY29uID0gTnVtYmVyKGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSkgKyAxXG4gICAgICAgICAgZXZlbnQudGFyZ2V0LnNldEF0dHJpYnV0ZSgnc3JjJywgdGhpcy5fZHJ1bUltYWdlc1tkcnVtVHlwZXNbbmV4dEljb25dXSlcbiAgICAgICAgICBldmVudC50YXJnZXQuc2V0QXR0cmlidXRlKCd0eXBlJywgW2Ake25leHRJY29ufWBdKVxuICAgICAgICAgIGV2ZW50LnRhcmdldC5uZXh0U2libGluZy5pbm5lclRleHQgPSAnMSdcbiAgICAgICAgICB0aGlzLl90cmFja1NhbXBsZXNbZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nLm5leHRTaWJsaW5nLmdldEF0dHJpYnV0ZSgncm93JyldLnNyYyA9IGAvYXVkaW8vZHJ1bXMvJHtkcnVtVHlwZXNbY3VycmVudEluc3RydW1lbnQgKyAxXX0vMS53YXZgXG4gICAgICAgICAgdGhpcy5fdHJhY2tJbnN0cnVtZW50W2V2ZW50LnRhcmdldC5uZXh0U2libGluZy5uZXh0U2libGluZy5nZXRBdHRyaWJ1dGUoJ3JvdycpXSA9IGRydW1UeXBlc1tuZXh0SWNvbl1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykgPT09ICdpbnN0cnVtZW50TnVtYmVyJykge1xuICAgICAgICAvLyBjaGFuZ2VzIHNhbXBsZSBudW1iZXJcbiAgICAgICAgbGV0IGN1cnJlbnRJbnN0cnVtZW50ID0gTnVtYmVyKGV2ZW50LnRhcmdldC5wcmV2aW91c1NpYmxpbmcuZ2V0QXR0cmlidXRlKCd0eXBlJykpXG4gICAgICAgIGxldCBpbnN0cnVtZW50VHlwZVNhbXBsZUFtb3VudCA9IHtraWNrczogMjYsIHNuYXJlczogMjMsIGhpaGF0czogMTUsIHRvbXM6IDksIGN5bWJhbHM6IDQsIHBlcmN1c3Npb246IDEzLCBjbGFwczogNiwgY293YmVsbHM6IDF9XG4gICAgICAgIGxldCBuZXh0U2FtcGxlID0gTnVtYmVyKGV2ZW50LnRhcmdldC5pbm5lclRleHQpICsgMVxuXG4gICAgICAgIGlmIChuZXh0U2FtcGxlID4gaW5zdHJ1bWVudFR5cGVTYW1wbGVBbW91bnRbT2JqZWN0LmtleXMoaW5zdHJ1bWVudFR5cGVTYW1wbGVBbW91bnQpW2N1cnJlbnRJbnN0cnVtZW50XV0pIHtcbiAgICAgICAgICBldmVudC50YXJnZXQuaW5uZXJUZXh0ID0gJzEnXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXZlbnQudGFyZ2V0LmlubmVyVGV4dCA9IG5leHRTYW1wbGVcbiAgICAgICAgICB0aGlzLl90cmFja1NhbXBsZXNbZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nLmdldEF0dHJpYnV0ZSgncm93JyldLnNyYyA9IGAvYXVkaW8vZHJ1bXMvJHtPYmplY3Qua2V5cyhpbnN0cnVtZW50VHlwZVNhbXBsZUFtb3VudClbY3VycmVudEluc3RydW1lbnRdfS8ke25leHRTYW1wbGV9LndhdmBcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBjbGVhcnMgdGhlIGdyaWRcbiAgICAgIGlmIChldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdjbGFzcycpID09PSAnY2xlYXJCdXR0b24nKSB7XG4gICAgICAgIHRoaXMuY2xlYXJHcmlkKClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgdGhpcy5faW5wdXRzLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBldmVudCA9PiB7XG4gICAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAvLyBDaGFuZ2VzIHRoZSBsb29wIGxlbmd0aCB0byB3aGF0IHRoZSB1c2VyIGhhcyBlbnRlcmVkXG4gICAgICAgIGlmIChldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdjbGFzcycpID09PSAnbG9vcExlbmd0aElucHV0Jykge1xuICAgICAgICAgICAgICAgLy8gRXJyb3IgaGFuZGxpbmdcbiAgICAgICAgICBpZiAoTnVtYmVyKGV2ZW50LnRhcmdldC52YWx1ZSkgPD0gMzIgJiYgTnVtYmVyKGV2ZW50LnRhcmdldC52YWx1ZSkgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnbG9vcGxlbmd0aCcsIGV2ZW50LnRhcmdldC52YWx1ZSlcblxuICAgICAgICAgICAgdGhpcy5fbG9vcExlbmd0aExvZy5pbm5lclRleHQgPSAnTGVuZ3RoOiAnICsgZXZlbnQudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICBldmVudC50YXJnZXQuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsICdFbnRlciBsb29wIGxlbmd0aCAobWF4ID0gMzIgbWluID0gMSknKVxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gbnVsbFxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmJsdXIoKVxuICAgICAgICAgIH0gaWYgKE51bWJlcihldmVudC50YXJnZXQudmFsdWUpID4gMzIgfHwgTnVtYmVyKGV2ZW50LnRhcmdldC52YWx1ZSkgPCAwIHx8IGlzTmFOKE51bWJlcihldmVudC50YXJnZXQudmFsdWUpKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAnVmFsdWUgbXVzdCBiZSBhbiBpbnRlZ2VyIGJldHdlZW4gMSBhbmQgMzInKVxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gbnVsbFxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmJsdXIoKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2hhbmdlcyB0aGUgdGVtcG8gdG8gd2hhdCB0aGUgdXNlciBoYXMgZW50ZXJlZFxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnY2xhc3MnKSA9PT0gJ2JtcElucHV0Jykge1xuICAgICAgICAgIGxldCBpbnB1dCA9IE51bWJlcihldmVudC50YXJnZXQudmFsdWUpXG4gICAgICAgICAgICAvLyBFcnJvciBoYW5kbGluZ1xuICAgICAgICAgIGlmIChpbnB1dCA8PSAzMDAgJiYgaW5wdXQgPj0gMzApIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbCgnZ3JpZC1zZXF1ZW5jZXInKS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKCdncmlkLXNlcXVlbmNlcicpW2ldLl9icG1Mb2cuaW5uZXJUZXh0ID0gJ0JQTTogJyArIGV2ZW50LnRhcmdldC52YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fdGVtcG8gPSBpbnB1dFxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAnRW50ZXIgdGVtcG8gKEJQTSkgbWF4ID0gMzAwIG1pbiA9IDMwJylcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IG51bGxcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5ibHVyKClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBzeW5jcyB3aXRoIG90aGVyIHNlcXVlbmNlcnNcbiAgICAgICAgICBpZiAodGhpcy5fc2VxdWVuY2VyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3BhdXNlUGxheUJ1dHRvbicpWzBdLmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAncGF1c2UnICYmIGlzTmFOKGlucHV0KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMudGltZVN5bmMoKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpc05hTihpbnB1dCkgPT09IHRydWUgfHwgaW5wdXQgPCAzMCB8fCBpbnB1dCA+PSAzMDApIHtcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJ1ZhbHVlIG11c3QgYmUgYW4gaW50ZWdlciBiZXR3ZWVuIDMwIGFuZCAzJylcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IG51bGxcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5ibHVyKClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9XG4gICAgLyoqXG4gICAqIFJlbmRlcnMgZ3JpZCBvZiB0aGUgc2VxdWVuY2VyXG4gICAqXG4gICAqIEBtZW1iZXJvZiBTZXF1ZW5jZXJcbiAgICovXG4gIHJlbmRlckdyaWQgKCkge1xuICAgIGxldCBjb2x1bW4gPSAwXG4gICAgbGV0IHJvdyA9IDFcbiAgICBsZXQgbG9vcExlbmd0aCA9IE51bWJlcih0aGlzLmdldEF0dHJpYnV0ZSgnbG9vcGxlbmd0aCcpKVxuICAgIGxldCBtYXhSb3dzID0gOFxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb29wTGVuZ3RoICogOTsgaSsrKSB7XG4gICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICBsZXQgaW5zdHJ1bWVudFR5cGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxuICAgICAgICBsZXQgaW5zdHJ1bWVudE51bWJlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2g2JylcbiAgICAgICAgaW5zdHJ1bWVudFR5cGUuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLl9kcnVtSW1hZ2VzW3RoaXMuX3RyYWNrSW5zdHJ1bWVudFtyb3ddXSlcbiAgICAgICAgaW5zdHJ1bWVudFR5cGUuc2V0QXR0cmlidXRlKCd0eXBlJywgYCR7cm93IC0gMX1gKVxuICAgICAgICBpbnN0cnVtZW50VHlwZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2luc3RydW1lbnRJY29uJylcbiAgICAgICAgaW5zdHJ1bWVudE51bWJlci5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2luc3RydW1lbnROdW1iZXInKVxuICAgICAgICBpbnN0cnVtZW50TnVtYmVyLmlubmVyVGV4dCA9ICcxJ1xuICAgICAgICB0aGlzLl9ncmlkLmFwcGVuZENoaWxkKGluc3RydW1lbnRUeXBlKVxuICAgICAgICB0aGlzLl9ncmlkLmFwcGVuZENoaWxkKGluc3RydW1lbnROdW1iZXIpXG4gICAgICB9XG5cbiAgICAgIGxldCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcbiAgICAgIGNvbHVtbiArPSAxXG4gICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnYWN0aXZlJywgYGZhbHNlYClcbiAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdpZCcsIGAke2l9YClcbiAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGBjZWxsYClcbiAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdjb2x1bW4nLCBgJHtjb2x1bW59YClcbiAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdyb3cnLCBgJHtyb3d9YClcbiAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdub3RlJywgJ0MnKVxuICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ29jdGF2ZScsICczJylcbiAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdub3RlTGVuZ3RoJywgJzEwMCcpXG4gICAgICBjZWxsLnNldEF0dHJpYnV0ZSgnbm90ZW1lbnVvcGVuJywgJ2ZhbHNlJylcbiAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdjaG9zZW4nLCAnZmFsc2UnKVxuICAgICAgdGhpcy5fZ3JpZC5hcHBlbmRDaGlsZChjZWxsKVxuXG4gICAgICBpZiAoY29sdW1uID09PSBsb29wTGVuZ3RoKSB7XG4gICAgICAgIGxldCByb3dCcmVhayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JyJylcbiAgICAgICAgbGV0IGluc3RydW1lbnRUeXBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcbiAgICAgICAgbGV0IGluc3RydW1lbnROdW1iZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoNicpXG4gICAgICAgIGluc3RydW1lbnRUeXBlLnNldEF0dHJpYnV0ZSgnc3JjJywgdGhpcy5fZHJ1bUltYWdlc1t0aGlzLl90cmFja0luc3RydW1lbnRbcm93ICsgMV1dKVxuICAgICAgICBpbnN0cnVtZW50VHlwZS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCBgJHtyb3d9YClcbiAgICAgICAgaW5zdHJ1bWVudFR5cGUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdpbnN0cnVtZW50SWNvbicpXG4gICAgICAgIGluc3RydW1lbnROdW1iZXIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdpbnN0cnVtZW50TnVtYmVyJylcbiAgICAgICAgaW5zdHJ1bWVudE51bWJlci5pbm5lclRleHQgPSAnMSdcbiAgICAgICAgdGhpcy5fZ3JpZC5hcHBlbmRDaGlsZChyb3dCcmVhaylcbiAgICAgICAgdGhpcy5fZ3JpZC5hcHBlbmRDaGlsZChpbnN0cnVtZW50VHlwZSlcbiAgICAgICAgdGhpcy5fZ3JpZC5hcHBlbmRDaGlsZChpbnN0cnVtZW50TnVtYmVyKVxuXG4gICAgICAgIGNvbHVtbiA9IDBcbiAgICAgICAgcm93ICs9IDFcbiAgICAgIH1cblxuICAgICAgaWYgKHJvdyA+IG1heFJvd3MpIHtcbiAgICAgICAgdGhpcy5fY2VsbHMgPSB0aGlzLl9ncmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJylcbiAgICAgICAgdGhpcy5fZ3JpZC5yZW1vdmVDaGlsZCh0aGlzLl9ncmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnN0cnVtZW50SWNvbicpWyh0aGlzLl9ncmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnN0cnVtZW50SWNvbicpLmxlbmd0aCkgLSAxXSlcbiAgICAgICAgdGhpcy5fZ3JpZC5yZW1vdmVDaGlsZCh0aGlzLl9ncmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnN0cnVtZW50TnVtYmVyJylbKHRoaXMuX2dyaWQucXVlcnlTZWxlY3RvckFsbCgnLmluc3RydW1lbnROdW1iZXInKS5sZW5ndGgpIC0gMV0pXG4gICAgICAgIHRoaXMuX2NlbGxDb2x1bW5zID0gY29sdW1uXG4gICAgICAgIGlmIChsb29wTGVuZ3RoID4gMTYpIHtcbiAgICAgICAgICB0aGlzLl9zZXF1ZW5jZXIuc3R5bGUud2lkdGggPSBgJHtsb29wTGVuZ3RoICogMzF9cHhgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fc2VxdWVuY2VyLnN0eWxlLndpZHRoID0gJzUwMHB4J1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9ncmlkXG4gICAgICB9XG4gICAgfVxuICB9XG4gICAgIC8qKlxuICAgKiBSZW1vdmVzIGdyaWQgb2YgdGhlIHNlcXVlbmNlclxuICAgKlxuICAgKiBAbWVtYmVyb2YgU2VxdWVuY2VyXG4gICAqL1xuICByZW1vdmVHcmlkICgpIHtcbiAgICBsZXQgZ3JpZExlbmd0aCA9IHRoaXMuX2dyaWQuY2hpbGRyZW4ubGVuZ3RoXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncmlkTGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuX2dyaWQucmVtb3ZlQ2hpbGQodGhpcy5fZ3JpZC5maXJzdEVsZW1lbnRDaGlsZClcbiAgICB9XG4gIH1cbiAgIC8qKlxuICAgKiBEZWFjdGl2YXRlcyBhbGwgY2VsbHMgb2YgdGhlIHNlcXVlbmNlclxuICAgKlxuICAgKiBAbWVtYmVyb2YgU2VxdWVuY2VyXG4gICAqL1xuICBjbGVhckdyaWQgKCkge1xuICAgIGxldCBncmlkTGVuZ3RoID0gdGhpcy5fY2VsbHMubGVuZ3RoXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyaWRMZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5jZWxsRGVhY3RpdmF0ZSh0aGlzLl9jZWxsc1tpXSlcbiAgICAgIGlmICh0aGlzLl9wYXVzZVBsYXlCdXR0b24uZ2V0QXR0cmlidXRlKCd0eXBlJykgPT09ICdwYXVzZScpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKCdncmlkLXNlcXVlbmNlcicpLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKCdncmlkLXNlcXVlbmNlcicpW2ldLl9jbGljaylcbiAgICAgICAgICB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKCdncmlkLXNlcXVlbmNlcicpW2ldLnBsYXlHcmlkKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAgIC8qKlxuICAgKiBTdG9yZXMgYSBtYXAgb2YgdGhlIHNlcXVlbmNlcnMgYWN0aXZhdGVkIGNlbGxzXG4gICAqXG4gICAqIEBtZW1iZXJvZiBTZXF1ZW5jZXJcbiAgICovXG4gIHN0b3JlR3JpZCAoKSB7XG4gICAgbGV0IGdyaWQgPSB7fVxuXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gODsgaSsrKSB7XG4gICAgICBncmlkW2ldID0gW11cbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2NlbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5fY2VsbHNbaV0uZ2V0QXR0cmlidXRlKCdhY3RpdmUnKSA9PT0gJ3RydWUnKSB7XG4gICAgICAgIGdyaWRbTnVtYmVyKHRoaXMuX2NlbGxzW2ldLmdldEF0dHJpYnV0ZSgncm93JykpXS5wdXNoKHRoaXMuX2NlbGxzW2ldLmdldEF0dHJpYnV0ZSgnY29sdW1uJykpXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3N0b3JlZEdyaWQgPSBncmlkXG4gIH1cbiAgIC8qKlxuICAgKiBMb2FkcyBhIG1hcCBvZiBhY3RpdmF0ZWQgY2VsbHMgaW50byB0aGUgc2VxdWVuY2VyXG4gICAqXG4gICAqIEBtZW1iZXJvZiBTZXF1ZW5jZXJcbiAgICovXG4gIGxvYWRTdG9yZWRHcmlkICgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2NlbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5fY2VsbHNbaV0uZ2V0QXR0cmlidXRlKCdjb2x1bW4nKSA9PT0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2N1cnJlbnRiZWF0JykgJiYgdGhpcy5fY2VsbHNbaV0uZ2V0QXR0cmlidXRlKCdjaG9zZW4nKSA9PT0gJ2ZhbHNlJykge1xuICAgICAgICB0aGlzLl9jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmVkJ1xuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBpMiA9IDA7IGkyIDwgdGhpcy5fc3RvcmVkR3JpZFtOdW1iZXIodGhpcy5fY2VsbHNbaV0uZ2V0QXR0cmlidXRlKCdyb3cnKSldLmxlbmd0aDsgaTIrKykge1xuICAgICAgICBpZiAodGhpcy5fc3RvcmVkR3JpZFtOdW1iZXIodGhpcy5fY2VsbHNbaV0uZ2V0QXR0cmlidXRlKCdyb3cnKSldW2kyXSA9PT0gdGhpcy5fY2VsbHNbaV0uZ2V0QXR0cmlidXRlKCdjb2x1bW4nKSkge1xuICAgICAgICAgIHRoaXMuY2VsbEFjdGl2YXRlKHRoaXMuX2NlbGxzW2ldKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gICAvKipcbiAgICogUGxheXMgdGhlIHNlcXVlbmNlclxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYmVhdCAtIFRoZSBncmlkIGNvbHVtbiB0byBzdGFydCBwbGF5aW5nIGF0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0ZW1wbyAtIFRoZSB0ZW1wbyB0byBwbGF5IGF0XG4gICAqIEByZXR1cm4ge2Z1bmN0aW9ufSAtIEFuIGludGVydmFsIGNyZWF0aW5nIGVhY2ggYmVhdCBvZiB0aGUgc2VxdWVuY2VyXG4gICAqIEBtZW1iZXJvZiBTZXF1ZW5jZXJcbiAgICovXG4gIHBsYXlHcmlkIChiZWF0ID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2N1cnJlbnRiZWF0JyksIHRlbXBvID0gdGhpcy5fdGVtcG8pIHtcbiAgICBsZXQgY29sdW1uID0gTnVtYmVyKGJlYXQpXG4gICAgbGV0IGNlbGxzID0gdGhpcy5fZ3JpZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbCcpXG5cbiAgICBsZXQgY2xpY2sgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNlbGxzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChOdW1iZXIoY2VsbHNbaV0uZ2V0QXR0cmlidXRlKCdjb2x1bW4nKSkgPT09IGNvbHVtbikge1xuICAgICAgICAgIGlmICh0aGlzLl9jZWxsc1tpXS5nZXRBdHRyaWJ1dGUoJ2Nob3NlbicpID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICBjZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmVkJ1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdjdXJyZW50YmVhdCcsIGNvbHVtbilcblxuICAgICAgICAgIGlmIChpID4gMCAmJiBjZWxsc1tpIC0gMV0uZ2V0QXR0cmlidXRlKCdhY3RpdmUnKSA9PT0gJ2ZhbHNlJykge1xuICAgICAgICAgICAgdGhpcy5jZWxsRGVhY3RpdmF0ZShjZWxsc1tpIC0gMV0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjZWxsc1tpXS5nZXRBdHRyaWJ1dGUoJ2FjdGl2ZScpID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl90cmFja0luc3RydW1lbnRbY2VsbHNbaV0uZ2V0QXR0cmlidXRlKCdyb3cnKV0gPT09ICdzeW50aHMnKSB7XG4gICAgICAgICAgICAgIGxldCBub3RlID0gY2VsbHNbaV0uZ2V0QXR0cmlidXRlKCdub3RlJylcbiAgICAgICAgICAgICAgbGV0IG9jdGF2ZSA9IE51bWJlcihjZWxsc1tpXS5nZXRBdHRyaWJ1dGUoJ29jdGF2ZScpKVxuICAgICAgICAgICAgICBsZXQgZnJlcXVlbmN5ID0gdGhpcy5fc3ludGguX25vdGVGcmVxW29jdGF2ZV1bbm90ZV1cbiAgICAgICAgICAgICAgbGV0IGtleSA9IHRoaXMuX3N5bnRoLmNyZWF0ZUtleShub3RlLCBvY3RhdmUsIGZyZXF1ZW5jeSwgbm90ZSArIGAke29jdGF2ZX1gKVxuICAgICAgICAgICAgICB0aGlzLl9zeW50aC5ub3RlUHJlc3NlZChrZXksIG5vdGUgKyBgJHtvY3RhdmV9YCwgY2VsbHNbaV0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3RyYWNrU2FtcGxlc1tjZWxsc1tpXS5nZXRBdHRyaWJ1dGUoJ3JvdycpXS5wYXVzZSgpXG4gICAgICAgICAgICB0aGlzLl90cmFja1NhbXBsZXNbY2VsbHNbaV0uZ2V0QXR0cmlidXRlKCdyb3cnKV0uY3VycmVudFRpbWUgPSAwXG4gICAgICAgICAgICBsZXQgcGxheVByb21pc2UgPSB0aGlzLl90cmFja1NhbXBsZXNbY2VsbHNbaV0uZ2V0QXR0cmlidXRlKCdyb3cnKV0ucGxheSgpXG4gICAgICAgICAgICBwbGF5UHJvbWlzZS50aGVuKF8gPT4ge1xuXG4gICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG5cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2VsbERlYWN0aXZhdGUoY2VsbHNbKGNlbGxzLmxlbmd0aCkgLSAxXSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNlbGxzW2ldLmdldEF0dHJpYnV0ZSgnYWN0aXZlJykgPT09ICd0cnVlJyAmJiBjZWxsc1tpXS5nZXRBdHRyaWJ1dGUoJ2Nob3NlbicpID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgdGhpcy5jZWxsQWN0aXZhdGUoY2VsbHNbaV0sIGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjb2x1bW4gPj0gTnVtYmVyKHRoaXMuZ2V0QXR0cmlidXRlKCdsb29wbGVuZ3RoJykpKSB7XG4gICAgICAgIGNvbHVtbiA9IDFcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbHVtbiArPSAxXG4gICAgICB9XG4gICAgfSwgKDYwMDAwIC8gdGVtcG8pIC8gNClcblxuICAgIHRoaXMuX2NsaWNrID0gY2xpY2tcbiAgfVxuICAvKipcbiAgICogU3luY3MgYWxsIHRoZSBzZXF1ZW5jZXJzIG9wZW4gb24gdGhlIGRlc2t0b3AgdG8gc3RhcnQvc3RvcCBhdCB0aGUgc2FtZSB0aW1lXG4gICAqXG4gICAqIEBtZW1iZXJvZiBTZXF1ZW5jZXJcbiAgICovXG4gIHRpbWVTeW5jICgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2dyaWQtc2VxdWVuY2VyJykubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbCgnZ3JpZC1zZXF1ZW5jZXInKVtpXS5fY2xpY2spXG4gICAgICBsZXQgY3VycmVudEJlYXQgPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKCdncmlkLXNlcXVlbmNlcicpW2ldLmdldEF0dHJpYnV0ZSgnY3VycmVudGJlYXQnKVxuICAgICAgdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbCgnZ3JpZC1zZXF1ZW5jZXInKVtpXS5wbGF5R3JpZChjdXJyZW50QmVhdCwgdGhpcy5fdGVtcG8pXG4gICAgICB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKCdncmlkLXNlcXVlbmNlcicpW2ldLl9icG1Mb2cuaW5uZXJUZXh0ID0gYEJQTTogJHt0aGlzLl90ZW1wb31gXG4gICAgICBpZiAodGhpcy5fcGF1c2VQbGF5QnV0dG9uLmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAncGxheScpIHtcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbCgnZ3JpZC1zZXF1ZW5jZXInKVtpXS5fcGF1c2VQbGF5QnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdwYXVzZScpXG4gICAgICAgIHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2dyaWQtc2VxdWVuY2VyJylbaV0uX3BhdXNlUGxheUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3NyYycsICcvaW1hZ2UvaWNvbnM4LXBhdXNlLWJ1dHRvbi01MC5wbmcnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbCgnZ3JpZC1zZXF1ZW5jZXInKVtpXS5fcGF1c2VQbGF5QnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdwYXVzZScpXG4gICAgICAgIHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2dyaWQtc2VxdWVuY2VyJylbaV0uX3BhdXNlUGxheUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3NyYycsICcvaW1hZ2UvaWNvbnM4LXBhdXNlLWJ1dHRvbi01MC5wbmcnKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogQWN0aXZhdGVzIGEgY2VsbCBpbiB0aGUgZ3JpZFxuICAgKlxuICAgKiBAbWVtYmVyb2YgU2VxdWVuY2VyXG4gICAqL1xuICBjZWxsRGVhY3RpdmF0ZSAoY2VsbCkge1xuICAgIGNlbGwuc2V0QXR0cmlidXRlKCdhY3RpdmUnLCAnZmFsc2UnKVxuICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3doaXRlJ1xuICB9XG4gIC8qKlxuICAgKiBEZWFjdGl2YXRlcyBhIGNlbGwgaW4gdGhlIGdyaWRcbiAgICpcbiAgICogQG1lbWJlcm9mIFNlcXVlbmNlclxuICAgKi9cbiAgY2VsbEFjdGl2YXRlIChjZWxsLCBjZWxsQ2xpY2tlZCwgc2hpZnRDbGljaykge1xuICAgIGNlbGwuc2V0QXR0cmlidXRlKCdhY3RpdmUnLCAndHJ1ZScpXG4gICAgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAneWVsbG93J1xuXG4gICAgaWYgKGNlbGxDbGlja2VkID09PSB0cnVlKSB7XG4gICAgICBjZWxsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbidcbiAgICAgIGNlbGwuc2V0QXR0cmlidXRlKCdjaG9zZW4nLCAndHJ1ZScpXG4gICAgICB0aGlzLl9ncmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJykuZm9yRWFjaChjID0+IHtcbiAgICAgICAgaWYgKGMuZ2V0QXR0cmlidXRlKCdhY3RpdmUnKSA9PT0gJ3RydWUnICYmIGMgIT09IGNlbGwpIHtcbiAgICAgICAgICB0aGlzLmNlbGxBY3RpdmF0ZShjLCBmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fdHJhY2tJbnN0cnVtZW50W2NlbGwuZ2V0QXR0cmlidXRlKCdyb3cnKV0gPT09ICdzeW50aHMnICYmIGNlbGxDbGlja2VkID09PSB0cnVlKSB7XG4gICAgICBpZiAodGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGFuZ2VOb3RlTWVudScpWzBdKSB7XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhbmdlTm90ZU1lbnUnKVswXS5zZXRBdHRyaWJ1dGUoJ2Fzc2lnbmVkQ2VsbCcsIGNlbGwuaWQpXG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yQWxsKCcubm90ZVNlbGVjdGlvbk1lbnUnKVswXS5jaGlsZHJlblsxXS52YWx1ZSA9IGNlbGwuZ2V0QXR0cmlidXRlKCdub3RlJylcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5vY3RhdmVTZWxlY3Rpb25NZW51JylbMF0uY2hpbGRyZW5bMV0udmFsdWUgPSBjZWxsLmdldEF0dHJpYnV0ZSgnb2N0YXZlJylcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub3RlTGVuZ3RoSW5wdXQnKVswXS5jaGlsZHJlblsxXS52YWx1ZSA9IGNlbGwuZ2V0QXR0cmlidXRlKCdub3RlTGVuZ3RoJylcbiAgICAgICAgY2VsbC5zdHlsZS5ib3JkZXIgPSAnZ3JlZW4nXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNoYW5nZUNlbGxOb3RlKGNlbGwpXG4gICAgICB9XG4gICAgfSBpZiAodGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGFuZ2VOb3RlTWVudScpWzBdICYmIHRoaXMuX3RyYWNrSW5zdHJ1bWVudFtjZWxsLmdldEF0dHJpYnV0ZSgncm93JyldICE9PSAnc3ludGhzJyAmJiBjZWxsQ2xpY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5fZ3JpZC5yZW1vdmVDaGlsZCh0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvckFsbCgnLmNoYW5nZU5vdGVNZW51JylbMF0pXG4gICAgfVxuICB9XG5cbiAgY2hhbmdlQ2VsbE5vdGUgKGNlbGwpIHtcbiAgICBsZXQgY2hhbmdlTm90ZU1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGxldCBub3RlU2VsZWN0aW9uTWVudSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgbGV0IG9jdGF2ZVNlbGVjdGlvbk1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGxldCBub3RlTGVuZ3RoSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGxldCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICBjaGFuZ2VOb3RlTWVudS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2NoYW5nZU5vdGVNZW51JylcbiAgICBub3RlU2VsZWN0aW9uTWVudS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ25vdGVTZWxlY3Rpb25NZW51JylcbiAgICBvY3RhdmVTZWxlY3Rpb25NZW51LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnb2N0YXZlU2VsZWN0aW9uTWVudScpXG4gICAgbm90ZUxlbmd0aElucHV0LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbm90ZUxlbmd0aElucHV0JylcblxuICAgIG5vdGVTZWxlY3Rpb25NZW51LmlubmVySFRNTCA9XG4gICAgYDxzcGFuPk5vdGU6IDwvc3Bhbj5cbiAgICA8c2VsZWN0IG5hbWU9XCJub3RlXCI+XG4gICAgICA8b3B0aW9uIHZhbHVlPVwiQ1wiIHNlbGVjdGVkPkM8L29wdGlvbj5cbiAgICAgIDxvcHRpb24gdmFsdWU9XCJDI1wiPkMjPC9vcHRpb24+XG4gICAgICA8b3B0aW9uIHZhbHVlPVwiRFwiPkQ8L29wdGlvbj5cbiAgICAgIDxvcHRpb24gdmFsdWU9XCJEI1wiPkQjPC9vcHRpb24+XG4gICAgICA8b3B0aW9uIHZhbHVlPVwiRVwiPkU8L29wdGlvbj5cbiAgICAgIDxvcHRpb24gdmFsdWU9XCJGXCI+Rjwvb3B0aW9uPlxuICAgICAgPG9wdGlvbiB2YWx1ZT1cIkYjXCI+RiM8L29wdGlvbj5cbiAgICAgIDxvcHRpb24gdmFsdWU9XCJHXCI+Rzwvb3B0aW9uPlxuICAgICAgPG9wdGlvbiB2YWx1ZT1cIkcjXCI+RyM8L29wdGlvbj5cbiAgICAgIDxvcHRpb24gdmFsdWU9XCJBXCI+QTwvb3B0aW9uPlxuICAgICAgPG9wdGlvbiB2YWx1ZT1cIkEjXCI+QSM8L29wdGlvbj5cbiAgICAgIDxvcHRpb24gdmFsdWU9XCJCXCI+Qjwvb3B0aW9uPlxuICAgIDwvc2VsZWN0PmBcbiAgICBvY3RhdmVTZWxlY3Rpb25NZW51LmlubmVySFRNTCA9XG4gICAgYDxzcGFuPk9jdGF2ZTogPC9zcGFuPlxuICAgIDxzZWxlY3QgbmFtZT1cIm9jdGF2ZVwiPlxuICAgICAgPG9wdGlvbiB2YWx1ZT1cIjFcIj4xPC9vcHRpb24+XG4gICAgICA8b3B0aW9uIHZhbHVlPVwiMlwiPjI8L29wdGlvbj5cbiAgICAgIDxvcHRpb24gdmFsdWU9XCIzXCIgc2VsZWN0ZWQ+Mzwvb3B0aW9uPlxuICAgICAgPG9wdGlvbiB2YWx1ZT1cIjRcIj40PC9vcHRpb24+XG4gICAgICA8b3B0aW9uIHZhbHVlPVwiNVwiPjU8L29wdGlvbj5cbiAgICAgIDxvcHRpb24gdmFsdWU9XCI2XCI+Njwvb3B0aW9uPlxuICAgICAgPG9wdGlvbiB2YWx1ZT1cIjdcIj43PC9vcHRpb24+XG4gICAgPC9zZWxlY3Q+YFxuXG4gICAgbm90ZUxlbmd0aElucHV0LmlubmVySFRNTCA9XG4gICAgYDxzcGFuPk5vdGVMZW5ndGg6IDwvc3Bhbj5cbiAgICA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbWluPVwiMFwiIG1heD1cIjEwMDBcIiBzdGVwPVwiMTBcIlxuICAgICAgICB2YWx1ZT1cIjIwMFwiIGxpc3Q9XCJub3RlTGVuZ3Roc1wiIG5hbWU9XCJub3RlTGVuZ3RoXCI+XG4gICAgPGRhdGFsaXN0IGlkPVwibm90ZUxlbmd0aFwiPlxuICAgICAgPG9wdGlvbiB2YWx1ZT1cIjAuMFwiIGxhYmVsPVwiTXV0ZVwiPlxuICAgICAgPG9wdGlvbiB2YWx1ZT1cIjEuMFwiIGxhYmVsPVwiMTAwJVwiPlxuICAgIDwvZGF0YWxpc3Q+YFxuXG4gICAgY2hhbmdlTm90ZU1lbnUuc2V0QXR0cmlidXRlKCdhc3NpZ25lZGNlbGwnLCBjZWxsLmlkKVxuXG4gICAgY2xvc2VCdXR0b24uaW5uZXJUZXh0ID0gJ3gnXG5cbiAgICBpZiAoY2VsbC5nZXRBdHRyaWJ1dGUoJ25vdGVtZW51b3BlbicpID09PSAnZmFsc2UnKSB7XG4gICAgICBjaGFuZ2VOb3RlTWVudS5hcHBlbmRDaGlsZChub3RlU2VsZWN0aW9uTWVudSlcbiAgICAgIGNoYW5nZU5vdGVNZW51LmFwcGVuZENoaWxkKG9jdGF2ZVNlbGVjdGlvbk1lbnUpXG4gICAgICBjaGFuZ2VOb3RlTWVudS5hcHBlbmRDaGlsZChub3RlTGVuZ3RoSW5wdXQpXG4gICAgICBjaGFuZ2VOb3RlTWVudS5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbilcblxuICAgICAgY2VsbC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGNoYW5nZU5vdGVNZW51KVxuICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ25vdGVtZW51b3BlbicsICd0cnVlJylcbiAgICB9XG5cbiAgICBsZXQgY2hhbmdlTm90ZUVsZW1lbnQgPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcInNlbGVjdFtuYW1lPSdub3RlJ11cIilcbiAgICBsZXQgY2hhbmdlT2N0YXZlRWxlbWVudCA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwic2VsZWN0W25hbWU9J29jdGF2ZSddXCIpXG4gICAgbGV0IGNoYW5nZU5vdGVMZW5ndGhFbGVtZW50ID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFtuYW1lPSdub3RlTGVuZ3RoJ11cIilcblxuICAgIGlmIChjZWxsLmdldEF0dHJpYnV0ZSgnbm90ZScpICYmIGNlbGwuZ2V0QXR0cmlidXRlKCdvY3RhdmUnKSAmJiBjZWxsLmdldEF0dHJpYnV0ZSgnbm90ZUxlbmd0aCcpICYmIHRoaXMuX2dyaWQucXVlcnlTZWxlY3RvckFsbCgnLmNoYW5nZU5vdGVNZW51JylbMF0pIHtcbiAgICAgIGNoYW5nZU5vdGVFbGVtZW50LnZhbHVlID0gY2VsbC5nZXRBdHRyaWJ1dGUoJ25vdGUnKVxuICAgICAgY2hhbmdlT2N0YXZlRWxlbWVudC52YWx1ZSA9IGNlbGwuZ2V0QXR0cmlidXRlKCdvY3RhdmUnKVxuICAgICAgY2hhbmdlTm90ZUxlbmd0aEVsZW1lbnQudmFsdWUgPSBjZWxsLmdldEF0dHJpYnV0ZSgnbm90ZUxlbmd0aCcpXG4gICAgfVxuXG4gICAgY2hhbmdlTm90ZU1lbnUub25jaGFuZ2UgPSAoKSA9PiB7XG4gICAgICBsZXQgY2VsbHMgPSB0aGlzLl9ncmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsJylcbiAgICAgIGNlbGxzLmZvckVhY2goYyA9PiB7XG4gICAgICAgIGlmIChjLmlkID09PSBjaGFuZ2VOb3RlTWVudS5nZXRBdHRyaWJ1dGUoJ2Fzc2lnbmVkY2VsbCcpKSB7XG4gICAgICAgICAgYy5zZXRBdHRyaWJ1dGUoJ25vdGUnLCBgJHtjaGFuZ2VOb3RlRWxlbWVudC52YWx1ZX1gKVxuICAgICAgICAgIGMuc2V0QXR0cmlidXRlKCdvY3RhdmUnLCBgJHtjaGFuZ2VPY3RhdmVFbGVtZW50LnZhbHVlfWApXG4gICAgICAgICAgYy5zZXRBdHRyaWJ1dGUoJ25vdGVMZW5ndGgnLCBgJHtjaGFuZ2VOb3RlTGVuZ3RoRWxlbWVudC52YWx1ZX1gKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIGNsb3NlQnV0dG9uLm9uY2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuY2hpbGRyZW4ubGVuZ3RoOykge1xuICAgICAgICBldmVudC50YXJnZXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChldmVudC50YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlbltpXSlcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxud2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnZ3JpZC1zZXF1ZW5jZXInLCBTZXF1ZW5jZXIpXG5cbm1vZHVsZS5leHBvcnRzID0gU2VxdWVuY2VyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2FwcC9zcmMvanMvc2VxdWVuY2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n")
  /***/ },
/* 3 */
  /***/ function (module, exports, __webpack_require__) {
    'use strict'
    eval("/**\n * Webcomponent for creating a synth application.\n *\n * @module src/synth.js\n * @author Lowe Marklund\n * @version 1.0\n */\n\n \n\n const SynthTemplate = __webpack_require__(5)\n const Pizzicato = __webpack_require__(1)\n const template = SynthTemplate.template\n\n/**\n * Synth.\n *\n * @class Synth\n * @extends {window.HTMLElement}\n */\n\n class Synth extends window.HTMLElement {\n  /**\n   * Creates an instance of Memory .\n   * @memberof Synth\n   */\n   constructor () {\n     super()\n     this.attachShadow({mode: 'open'})\n     this.shadowRoot.appendChild(template.content.cloneNode(true))\n     this._synth = this.shadowRoot.querySelector('.synth')\n     this._keyboard = this.shadowRoot.querySelector('.keyboard')\n     this._newKeyboard = this.shadowRoot.querySelector('.newKeyboard')\n     this._carrierWavePicker = this.shadowRoot.querySelector(\"select[name='waveform']\")\n     this._modulatorWavePicker = this.shadowRoot.querySelector(\"select[name='waveform2']\")\n     this._modulator2WavePicker = this.shadowRoot.querySelector(\"select[name='waveform3']\")\n     this._octavePicker = this.shadowRoot.querySelector(\"select[name='octave']\")\n     this._volumeControl = this.shadowRoot.querySelector(\"input[name='volume']\")\n     this._carrierGainControl = this.shadowRoot.querySelector(\"input[name='carrierGain']\")\n     this._modulationFreqControl = this.shadowRoot.querySelector(\"input[name='modulationFreq']\")\n     this._modulationDepthControl = this.shadowRoot.querySelector(\"input[name='modulationDepth']\")\n     this._modulation2FreqControl = this.shadowRoot.querySelector(\"input[name='modulation2Freq']\")\n     this._modulation2DepthControl = this.shadowRoot.querySelector(\"input[name='modulation2Depth']\")\n     this._flangerControl = this.shadowRoot.querySelector('#flanger')\n     this._tremoloControl = this.shadowRoot.querySelector('#tremolo')\n     this._reverbControl = this.shadowRoot.querySelector('#reverb')\n     this._lfoFrequency = this.shadowRoot.querySelector(\"input[name='lfoFreq']\")\n     this._audioContext = Pizzicato.context\n     this._out = this._audioContext.destination\n     this._effectsGainNode = this._audioContext.createGain()\n     this._oscList = {}\n     this._activeNotes = {\n       1: null,\n       2: null,\n       3: null,\n       4: null,\n       5: null,\n       6: null,\n       7: null,\n       8: null\n     }\n     this._triggerKeys = ['Tab', '1', 'q', '2', 'w', 'e', '4', 'r', '5', 't', '6', 'y', 'u', '8', 'i', '9', 'o', 'p', '0', '', '', '', '\\u27f5', '\\u21b5']\n   }\n\n  /**\n   * Watches attributes for changes on the element.\n   *\n   * @readonly\n   * @static\n   * @memberof Synth\n   */\n   static get observedAttributes () {\n\n   }\n\n  /**\n   * Called by the browser engine when an attribute changes.\n   *\n   * @param {string} attributeName\n   * @param {string} oldValue\n   * @param {string} newValue\n   * @memberof Synth\n   */\n   attributeChangedCallback (attributeName, oldValue, newValue) {\n\n   }\n    /**\n   * Called when the element is connected to the DOM.\n   *\n   * @memberof Synth\n   */\n   connectedCallback () {\n     this.setup()\n     this.inputListen()\n   }\n\n     /**\n   * Listens after input from the user.\n   *\n   * @memberof Synth\n   */\n   inputListen () {\n     this._octavePicker.addEventListener('change', () => {\n       let keyboardOctaves = this._keyboard.querySelectorAll('.octave')\n\n        // removes previous keyboard octaves\n       keyboardOctaves.forEach(octave => {\n         this._keyboard.removeChild(octave)\n       })\n\n       this._noteFreq = this.createNoteTable(1)\n       this.createKeyboard(Number(this._octavePicker.value))\n     }, false)\n\n     this._volumeControl.addEventListener('change', () => {\n       this.changeVolume()\n     }, false)\n\n    //  this._lfoFrequency.addEventListener('change', () => {\n    //    this.changeLfoFreq()\n    //  })\n\n     this._flangerControl.onchange = (event) => {\n       this._flanger.options[event.target.name] = Number(event.target.value)\n       this.effectsRouting(false)\n     }\n\n     this._tremoloControl.onchange = (event) => {\n       this._tremolo.options[event.target.name] = Number(event.target.value)\n       this.effectsRouting(false)\n     }\n\n     this._reverbControl.onchange = (event) => {\n       this._reverb.options[event.target.name] = Number(event.target.value)\n       console.log(this._reverb)\n       this.effectsRouting(false)\n     }\n\n     window.addEventListener('keydown', event => {\n       if (document.activeElement !== this._sequencer) {\n         event.preventDefault()\n         let triggeredKey = event.key\n         switch (event.code) {\n           case 'BracketRight':\n             triggeredKey = ''\n             break\n           case 'Enter':\n             triggeredKey = '\\u21b5'\n             break\n           case 'Backspace':\n             triggeredKey = '\\u27f5'\n             break\n           case 'Equal':\n             triggeredKey = ''\n             break\n         }\n         if (event.repeat === false && this._triggerKeys.includes(triggeredKey)) {\n           let key = this._keyboard.querySelector(`#key${triggeredKey}`)\n           this.notePressed(key, triggeredKey)\n           key.style.backgroundColor = '#599'\n         }\n       }\n     })\n\n     window.addEventListener('keyup', event => {\n       let triggeredKey = event.key\n\n       switch (event.code) {\n         case 'BracketRight':\n           triggeredKey = ''\n           break\n         case 'Enter':\n           triggeredKey = '\\u21b5'\n           break\n         case 'Backspace':\n           triggeredKey = '\\u27f5'\n           break\n         case 'Equal':\n           triggeredKey = ''\n           break\n       }\n       if (this._triggerKeys.includes(triggeredKey)) {\n         let key = this._keyboard.querySelector(`#key${triggeredKey}`)\n         this.noteReleased(key, triggeredKey)\n         key.style.backgroundColor = 'white'\n\n         if (key.getAttribute('class') === 'sharpKey') {\n           key.style.backgroundColor = 'black'\n         }\n       }\n     }, false)\n   }\n\n      /**\n   * Creates array of pitches\n   *\n   * @memberof Synth\n   */\n   createNoteTable (octave) {\n     let noteFreq = []\n\n     for (let i = 0; i < 8; i++) {\n       noteFreq[octave + i] = []\n     }\n\n     noteFreq[octave]['C'] = 32.703195662574829\n     noteFreq[octave]['C#'] = 34.647828872109012\n     noteFreq[octave]['D'] = 36.708095989675945\n     noteFreq[octave]['D#'] = 38.890872965260113\n     noteFreq[octave]['E'] = 41.203444614108741\n     noteFreq[octave]['F'] = 43.653528929125485\n     noteFreq[octave]['F#'] = 46.249302838954299\n     noteFreq[octave]['G'] = 48.999429497718661\n     noteFreq[octave]['G#'] = 51.913087197493142\n     noteFreq[octave]['A'] = 55.000000000000000\n     noteFreq[octave]['A#'] = 58.270470189761239\n     noteFreq[octave]['B'] = 61.735412657015513\n\n     for (var pitch in noteFreq[octave]) {\n       for (let i = 2; i < 8; i++) {\n         noteFreq[i][pitch] = noteFreq[i - 1][pitch] * 2\n       }\n     }\n\n     this._noteFreq = noteFreq\n     return noteFreq\n   }\n\n   createKeyboard (octave) {\n     let keyIndex = 0\n\n     this._noteFreq.forEach((keys, i1) => {\n       if (i1 <= octave + 1 && i1 >= octave) {\n         let keyList = Object.entries(keys)\n         let whiteKeys = document.createElement('div')\n         let blackKeys = document.createElement('div')\n         let octaveElem = document.createElement('div')\n         octaveElem.className = 'octave'\n\n         keyList.forEach((key, i2) => {\n           if (key[0].length > 1) {\n             blackKeys.appendChild(this.createKey(key[0], i1, key[1], keyIndex))\n           } else {\n             whiteKeys.appendChild(this.createKey(key[0], i1, key[1], keyIndex))\n           }\n\n           keyIndex++\n         })\n\n         octaveElem.appendChild(blackKeys)\n         octaveElem.appendChild(whiteKeys)\n         this._keyboard.appendChild(octaveElem)\n       }\n     })\n   }\n\n   setup () {\n     this._noteFreq = this.createNoteTable(1)\n     this._masterGainNode = this._audioContext.createGain()\n     this._masterGainNode.connect(this._out)\n     this._masterGainNode.gain.value = this._volumeControl.value\n     this._noteLength = 500\n\n     this.createKeyboard(3)\n\n     this._sineTerms = new Float32Array([0, 0, 1, 0, 1])\n     this._cosineTerms = new Float32Array(this._sineTerms.length)\n     this._customWaveform = this._audioContext.createPeriodicWave(this._cosineTerms, this._sineTerms)\n\n     this.effectsRouting(true)\n   }\n\n   createKey (note, octave, freq, keyIndex) {\n     let keyElement = document.createElement('div')\n     let labelElement = document.createElement('div')\n\n     keyElement.className = 'key'\n     keyElement.id = `key${this._triggerKeys[keyIndex]}`\n     keyElement.dataset['octave'] = octave\n     keyElement.dataset['note'] = note\n     keyElement.dataset['frequency'] = freq\n\n     if (note.length > 1) {\n       keyElement.setAttribute('class', 'sharpKey')\n     }\n\n     labelElement.innerHTML = this._triggerKeys[keyIndex]\n\n     keyElement.appendChild(labelElement)\n\n     keyElement.addEventListener('mousedown', event => {\n       this.notePressed(keyElement)\n     }, false)\n     keyElement.addEventListener('mouseup', event => {\n       this.noteReleased(keyElement)\n     }, false)\n     keyElement.addEventListener('mouseover', event => {\n       this.noteReleased(keyElement)\n     }, false)\n     keyElement.addEventListener('mouseleave', event => {\n       this.noteReleased(keyElement)\n     }, false)\n\n     return keyElement\n   }\n\n   playTone (freq) {\n     let carrier = this._audioContext.createOscillator()\n     let modulator = this._audioContext.createOscillator()\n     let modulator2 = this._audioContext.createOscillator()\n     let carrierGain = this._audioContext.createGain()\n     let modulatorGain = this._audioContext.createGain()\n     let modulator2Gain = this._audioContext.createGain()\n\n     carrierGain.gain.value = this._carrierGainControl.value\n     modulatorGain.gain.value = this._modulationDepthControl.value\n     modulator.frequency.value = this._modulationFreqControl.value\n     modulator2Gain.gain.value = this._modulation2DepthControl.value\n     modulator2.frequency.value = this._modulation2FreqControl.value\n\n      // frequency modulation routing\n     carrier.connect(carrierGain)\n     carrier.connect(this._effectsGainNode)\n     carrierGain.connect(modulator.frequency)\n     modulator.connect(modulatorGain)\n     modulatorGain.connect(this._effectsGainNode)\n     carrierGain.connect(modulator2.frequency)\n     modulator2.connect(modulator2Gain)\n     modulator2Gain.connect(this._effectsGainNode)\n\n     let type = this._carrierWavePicker.options[this._carrierWavePicker.selectedIndex].value\n     let type2 = this._modulatorWavePicker.options[this._modulatorWavePicker.selectedIndex].value\n     let type3 = this._modulator2WavePicker.options[this._modulator2WavePicker.selectedIndex].value\n\n     if (type === 'custom') {\n       carrier.setPeriodicWave(this._customWaveform)\n     } else {\n       carrier.type = type\n       modulator.type = type2\n       modulator2.type = type3\n     }\n\n     carrier.frequency.value = freq\n\n     carrier.start()\n     modulator.start()\n     modulator2.start()\n\n     return [carrier, modulator, modulator2]\n   }\n\n   notePressed (keyElement, id, cell) {\n     let dataset = keyElement.dataset\n\n     if (!dataset['pressed']) {\n       if (cell) {\n         let cellId = cell.getAttribute('row') + cell.getAttribute('column')\n         let row = Number(cellId[0])\n\n         if (this._activeNotes[row] !== null) {\n           this.noteReleased(this._activeNotes[row].keyElement, this._activeNotes[row].id, this._activeNotes[row].cellId)\n         }\n\n         this._activeNotes[row] = {\n           keyElement: keyElement,\n           id: id,\n           cellId: cellId\n         }\n\n         this._oscList[cellId] = this.playTone(dataset['frequency'])\n\n         this._noteLength = Number(cell.getAttribute('noteLength'))\n\n         setTimeout(() => {\n           this.noteReleased(keyElement, id, cellId)\n         }, this._noteLength)\n       } else {\n         this._oscList[id] = this.playTone(dataset['frequency'])\n       }\n\n       dataset['pressed'] = 'yes'\n     }\n   }\n\n   noteReleased (keyElement, id, cellId) {\n     let dataset = keyElement.dataset\n\n     if (dataset && dataset['pressed']) {\n       if (cellId) {\n         this._oscList[cellId].forEach(osc => {\n           osc.stop()\n         })\n         delete this._oscList[cellId]\n       } else {\n         this._oscList[id].forEach(osc => {\n           osc.stop()\n         })\n         delete this._oscList[id]\n       }\n       delete dataset['pressed']\n     }\n   }\n\n   changeVolume () {\n     this._masterGainNode.gain.value = this._volumeControl.value\n   }\n\n   changeLfoFreq () {\n\n   }\n\n   effectsRouting (defaultSettings) {\n     let effectOptionObj\n     let oldReverb\n     let oldFlanger\n     let oldTremolo\n     let oldDelay\n     let oldRingModulator\n\n     if (this._analyser) {\n       oldReverb = this._reverb\n       oldFlanger = this._flanger\n       oldTremolo = this._tremolo\n       oldDelay = this._delay\n       oldRingModulator = this._delay\n     }\n\n     if (defaultSettings === false) {\n       effectOptionObj = {\n         flanger: this._flanger.options,\n         delay: this._delay.options,\n         reverb: this._reverb.options,\n         tremolo: this._tremolo.options,\n         ringmodulator: this._ringModulator.options\n       }\n     }\n     if (defaultSettings === true) {\n       effectOptionObj = {\n         delay: {\n           feedback: 0,\n           time: 0,\n           mix: 0\n         },\n         flanger: {\n           time: 0,\n           speed: 0,\n           depth: 0,\n           feedback: 0,\n           mix: 0\n         },\n         reverb: {\n           time: 0,\n           decay: 0,\n           reverse: false,\n           mix: 0\n         },\n         tremolo: {\n           speed: 0,\n           depth: 0,\n           mix: 0\n         },\n         ringmodulator:\n         {\n           speed: 0,\n           distortion: 0,\n           mix: 0\n         }\n       }\n     }\n\n     this._effectsGainNode.gain.value = 1\n\n     this._analyser = this._audioContext.createAnalyser()\n\n     this._delay = new Pizzicato.Effects.Delay(effectOptionObj.delay)\n\n     this._flanger = new Pizzicato.Effects.Flanger(effectOptionObj.flanger)\n\n     this._reverb = new Pizzicato.Effects.Reverb(effectOptionObj.reverb)\n\n     this._tremolo = new Pizzicato.Effects.Tremolo(effectOptionObj.tremolo)\n\n     this._lowPassFilter = new Pizzicato.Effects.LowPassFilter({\n       frequency: 0,\n       peak: 0\n     })\n\n     this._highPassFilter = new Pizzicato.Effects.HighPassFilter({\n       frequency: 0,\n       peak: 0\n     })\n\n     this._ringModulator = new Pizzicato.Effects.RingModulator(effectOptionObj.ringmodulator)\n\n     this._effectsGainNode.connect(this._flanger)\n     this._flanger.connect(this._tremolo)\n     this._tremolo.connect(this._ringModulator)\n     this._ringModulator.connect(this._delay)\n   // this._lowPassFilter.connect(this._highPassFilter)\n   // this._highPassFilter.connect(this._delay)\n     this._delay.connect(this._reverb)\n     this._reverb.connect(this._analyser)\n     this._analyser.connect(this._masterGainNode)\n\n     if (oldReverb !== undefined) {\n       oldReverb.disconnect()\n       oldFlanger.disconnect()\n       oldDelay.disconnect()\n       oldRingModulator.disconnect()\n       oldTremolo.disconnect()\n     }\n   }\n}\n\n window.customElements.define('synth-element', Synth)\n\n module.exports = Synth\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc3JjL2pzL3N5bnRoLmpzPzgxODYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGFBQWE7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLE9BQU87QUFDcEIsYUFBYSxPQUFPO0FBQ3BCLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFROztBQUVSO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsYUFBYTtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsYUFBYTtBQUNwRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0EsVUFBVTs7QUFFVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkJBQTJCLDRCQUE0QjtBQUN2RDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLFFBQVE7QUFDUjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEiLCJmaWxlIjoiMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogV2ViY29tcG9uZW50IGZvciBjcmVhdGluZyBhIHN5bnRoIGFwcGxpY2F0aW9uLlxuICpcbiAqIEBtb2R1bGUgc3JjL3N5bnRoLmpzXG4gKiBAYXV0aG9yIExvd2UgTWFya2x1bmRcbiAqIEB2ZXJzaW9uIDEuMFxuICovXG5cbiAndXNlIHN0cmljdCdcblxuIGNvbnN0IFN5bnRoVGVtcGxhdGUgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9zeW50aFRlbXBsYXRlJylcbiBjb25zdCBQaXp6aWNhdG8gPSByZXF1aXJlKCcuL1BpenppY2F0by5qcycpXG4gY29uc3QgdGVtcGxhdGUgPSBTeW50aFRlbXBsYXRlLnRlbXBsYXRlXG5cbi8qKlxuICogU3ludGguXG4gKlxuICogQGNsYXNzIFN5bnRoXG4gKiBAZXh0ZW5kcyB7d2luZG93LkhUTUxFbGVtZW50fVxuICovXG5cbiBjbGFzcyBTeW50aCBleHRlbmRzIHdpbmRvdy5IVE1MRWxlbWVudCB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIE1lbW9yeSAuXG4gICAqIEBtZW1iZXJvZiBTeW50aFxuICAgKi9cbiAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgc3VwZXIoKVxuICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7bW9kZTogJ29wZW4nfSlcbiAgICAgdGhpcy5zaGFkb3dSb290LmFwcGVuZENoaWxkKHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKVxuICAgICB0aGlzLl9zeW50aCA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCcuc3ludGgnKVxuICAgICB0aGlzLl9rZXlib2FyZCA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCcua2V5Ym9hcmQnKVxuICAgICB0aGlzLl9uZXdLZXlib2FyZCA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCcubmV3S2V5Ym9hcmQnKVxuICAgICB0aGlzLl9jYXJyaWVyV2F2ZVBpY2tlciA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwic2VsZWN0W25hbWU9J3dhdmVmb3JtJ11cIilcbiAgICAgdGhpcy5fbW9kdWxhdG9yV2F2ZVBpY2tlciA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwic2VsZWN0W25hbWU9J3dhdmVmb3JtMiddXCIpXG4gICAgIHRoaXMuX21vZHVsYXRvcjJXYXZlUGlja2VyID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RbbmFtZT0nd2F2ZWZvcm0zJ11cIilcbiAgICAgdGhpcy5fb2N0YXZlUGlja2VyID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RbbmFtZT0nb2N0YXZlJ11cIilcbiAgICAgdGhpcy5fdm9sdW1lQ29udHJvbCA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbbmFtZT0ndm9sdW1lJ11cIilcbiAgICAgdGhpcy5fY2FycmllckdhaW5Db250cm9sID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFtuYW1lPSdjYXJyaWVyR2FpbiddXCIpXG4gICAgIHRoaXMuX21vZHVsYXRpb25GcmVxQ29udHJvbCA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbbmFtZT0nbW9kdWxhdGlvbkZyZXEnXVwiKVxuICAgICB0aGlzLl9tb2R1bGF0aW9uRGVwdGhDb250cm9sID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFtuYW1lPSdtb2R1bGF0aW9uRGVwdGgnXVwiKVxuICAgICB0aGlzLl9tb2R1bGF0aW9uMkZyZXFDb250cm9sID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFtuYW1lPSdtb2R1bGF0aW9uMkZyZXEnXVwiKVxuICAgICB0aGlzLl9tb2R1bGF0aW9uMkRlcHRoQ29udHJvbCA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbbmFtZT0nbW9kdWxhdGlvbjJEZXB0aCddXCIpXG4gICAgIHRoaXMuX2ZsYW5nZXJDb250cm9sID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJyNmbGFuZ2VyJylcbiAgICAgdGhpcy5fdHJlbW9sb0NvbnRyb2wgPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignI3RyZW1vbG8nKVxuICAgICB0aGlzLl9yZXZlcmJDb250cm9sID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJyNyZXZlcmInKVxuICAgICB0aGlzLl9sZm9GcmVxdWVuY3kgPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcImlucHV0W25hbWU9J2xmb0ZyZXEnXVwiKVxuICAgICB0aGlzLl9hdWRpb0NvbnRleHQgPSBQaXp6aWNhdG8uY29udGV4dFxuICAgICB0aGlzLl9vdXQgPSB0aGlzLl9hdWRpb0NvbnRleHQuZGVzdGluYXRpb25cbiAgICAgdGhpcy5fZWZmZWN0c0dhaW5Ob2RlID0gdGhpcy5fYXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgICB0aGlzLl9vc2NMaXN0ID0ge31cbiAgICAgdGhpcy5fYWN0aXZlTm90ZXMgPSB7XG4gICAgICAgMTogbnVsbCxcbiAgICAgICAyOiBudWxsLFxuICAgICAgIDM6IG51bGwsXG4gICAgICAgNDogbnVsbCxcbiAgICAgICA1OiBudWxsLFxuICAgICAgIDY6IG51bGwsXG4gICAgICAgNzogbnVsbCxcbiAgICAgICA4OiBudWxsXG4gICAgIH1cbiAgICAgdGhpcy5fdHJpZ2dlcktleXMgPSBbJ1RhYicsICcxJywgJ3EnLCAnMicsICd3JywgJ2UnLCAnNCcsICdyJywgJzUnLCAndCcsICc2JywgJ3knLCAndScsICc4JywgJ2knLCAnOScsICdvJywgJ3AnLCAnMCcsICfDpScsICfCtCcsICfCqCcsICdcXHUyN2Y1JywgJ1xcdTIxYjUnXVxuICAgfVxuXG4gIC8qKlxuICAgKiBXYXRjaGVzIGF0dHJpYnV0ZXMgZm9yIGNoYW5nZXMgb24gdGhlIGVsZW1lbnQuXG4gICAqXG4gICAqIEByZWFkb25seVxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJvZiBTeW50aFxuICAgKi9cbiAgIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzICgpIHtcblxuICAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgYnkgdGhlIGJyb3dzZXIgZW5naW5lIHdoZW4gYW4gYXR0cmlidXRlIGNoYW5nZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVOYW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvbGRWYWx1ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmV3VmFsdWVcbiAgICogQG1lbWJlcm9mIFN5bnRoXG4gICAqL1xuICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrIChhdHRyaWJ1dGVOYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcblxuICAgfVxuICAgIC8qKlxuICAgKiBDYWxsZWQgd2hlbiB0aGUgZWxlbWVudCBpcyBjb25uZWN0ZWQgdG8gdGhlIERPTS5cbiAgICpcbiAgICogQG1lbWJlcm9mIFN5bnRoXG4gICAqL1xuICAgY29ubmVjdGVkQ2FsbGJhY2sgKCkge1xuICAgICB0aGlzLnNldHVwKClcbiAgICAgdGhpcy5pbnB1dExpc3RlbigpXG4gICB9XG5cbiAgICAgLyoqXG4gICAqIExpc3RlbnMgYWZ0ZXIgaW5wdXQgZnJvbSB0aGUgdXNlci5cbiAgICpcbiAgICogQG1lbWJlcm9mIFN5bnRoXG4gICAqL1xuICAgaW5wdXRMaXN0ZW4gKCkge1xuICAgICB0aGlzLl9vY3RhdmVQaWNrZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgIGxldCBrZXlib2FyZE9jdGF2ZXMgPSB0aGlzLl9rZXlib2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcub2N0YXZlJylcblxuICAgICAgICAvLyByZW1vdmVzIHByZXZpb3VzIGtleWJvYXJkIG9jdGF2ZXNcbiAgICAgICBrZXlib2FyZE9jdGF2ZXMuZm9yRWFjaChvY3RhdmUgPT4ge1xuICAgICAgICAgdGhpcy5fa2V5Ym9hcmQucmVtb3ZlQ2hpbGQob2N0YXZlKVxuICAgICAgIH0pXG5cbiAgICAgICB0aGlzLl9ub3RlRnJlcSA9IHRoaXMuY3JlYXRlTm90ZVRhYmxlKDEpXG4gICAgICAgdGhpcy5jcmVhdGVLZXlib2FyZChOdW1iZXIodGhpcy5fb2N0YXZlUGlja2VyLnZhbHVlKSlcbiAgICAgfSwgZmFsc2UpXG5cbiAgICAgdGhpcy5fdm9sdW1lQ29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgdGhpcy5jaGFuZ2VWb2x1bWUoKVxuICAgICB9LCBmYWxzZSlcblxuICAgIC8vICB0aGlzLl9sZm9GcmVxdWVuY3kuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgIC8vICAgIHRoaXMuY2hhbmdlTGZvRnJlcSgpXG4gICAgLy8gIH0pXG5cbiAgICAgdGhpcy5fZmxhbmdlckNvbnRyb2wub25jaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICB0aGlzLl9mbGFuZ2VyLm9wdGlvbnNbZXZlbnQudGFyZ2V0Lm5hbWVdID0gTnVtYmVyKGV2ZW50LnRhcmdldC52YWx1ZSlcbiAgICAgICB0aGlzLmVmZmVjdHNSb3V0aW5nKGZhbHNlKVxuICAgICB9XG5cbiAgICAgdGhpcy5fdHJlbW9sb0NvbnRyb2wub25jaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICB0aGlzLl90cmVtb2xvLm9wdGlvbnNbZXZlbnQudGFyZ2V0Lm5hbWVdID0gTnVtYmVyKGV2ZW50LnRhcmdldC52YWx1ZSlcbiAgICAgICB0aGlzLmVmZmVjdHNSb3V0aW5nKGZhbHNlKVxuICAgICB9XG5cbiAgICAgdGhpcy5fcmV2ZXJiQ29udHJvbC5vbmNoYW5nZSA9IChldmVudCkgPT4ge1xuICAgICAgIHRoaXMuX3JldmVyYi5vcHRpb25zW2V2ZW50LnRhcmdldC5uYW1lXSA9IE51bWJlcihldmVudC50YXJnZXQudmFsdWUpXG4gICAgICAgY29uc29sZS5sb2codGhpcy5fcmV2ZXJiKVxuICAgICAgIHRoaXMuZWZmZWN0c1JvdXRpbmcoZmFsc2UpXG4gICAgIH1cblxuICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGV2ZW50ID0+IHtcbiAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gdGhpcy5fc2VxdWVuY2VyKSB7XG4gICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICBsZXQgdHJpZ2dlcmVkS2V5ID0gZXZlbnQua2V5XG4gICAgICAgICBzd2l0Y2ggKGV2ZW50LmNvZGUpIHtcbiAgICAgICAgICAgY2FzZSAnQnJhY2tldFJpZ2h0JzpcbiAgICAgICAgICAgICB0cmlnZ2VyZWRLZXkgPSAnwqgnXG4gICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgY2FzZSAnRW50ZXInOlxuICAgICAgICAgICAgIHRyaWdnZXJlZEtleSA9ICdcXHUyMWI1J1xuICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgIGNhc2UgJ0JhY2tzcGFjZSc6XG4gICAgICAgICAgICAgdHJpZ2dlcmVkS2V5ID0gJ1xcdTI3ZjUnXG4gICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgY2FzZSAnRXF1YWwnOlxuICAgICAgICAgICAgIHRyaWdnZXJlZEtleSA9ICfCtCdcbiAgICAgICAgICAgICBicmVha1xuICAgICAgICAgfVxuICAgICAgICAgaWYgKGV2ZW50LnJlcGVhdCA9PT0gZmFsc2UgJiYgdGhpcy5fdHJpZ2dlcktleXMuaW5jbHVkZXModHJpZ2dlcmVkS2V5KSkge1xuICAgICAgICAgICBsZXQga2V5ID0gdGhpcy5fa2V5Ym9hcmQucXVlcnlTZWxlY3RvcihgI2tleSR7dHJpZ2dlcmVkS2V5fWApXG4gICAgICAgICAgIHRoaXMubm90ZVByZXNzZWQoa2V5LCB0cmlnZ2VyZWRLZXkpXG4gICAgICAgICAgIGtleS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzU5OSdcbiAgICAgICAgIH1cbiAgICAgICB9XG4gICAgIH0pXG5cbiAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZXZlbnQgPT4ge1xuICAgICAgIGxldCB0cmlnZ2VyZWRLZXkgPSBldmVudC5rZXlcblxuICAgICAgIHN3aXRjaCAoZXZlbnQuY29kZSkge1xuICAgICAgICAgY2FzZSAnQnJhY2tldFJpZ2h0JzpcbiAgICAgICAgICAgdHJpZ2dlcmVkS2V5ID0gJ8KoJ1xuICAgICAgICAgICBicmVha1xuICAgICAgICAgY2FzZSAnRW50ZXInOlxuICAgICAgICAgICB0cmlnZ2VyZWRLZXkgPSAnXFx1MjFiNSdcbiAgICAgICAgICAgYnJlYWtcbiAgICAgICAgIGNhc2UgJ0JhY2tzcGFjZSc6XG4gICAgICAgICAgIHRyaWdnZXJlZEtleSA9ICdcXHUyN2Y1J1xuICAgICAgICAgICBicmVha1xuICAgICAgICAgY2FzZSAnRXF1YWwnOlxuICAgICAgICAgICB0cmlnZ2VyZWRLZXkgPSAnwrQnXG4gICAgICAgICAgIGJyZWFrXG4gICAgICAgfVxuICAgICAgIGlmICh0aGlzLl90cmlnZ2VyS2V5cy5pbmNsdWRlcyh0cmlnZ2VyZWRLZXkpKSB7XG4gICAgICAgICBsZXQga2V5ID0gdGhpcy5fa2V5Ym9hcmQucXVlcnlTZWxlY3RvcihgI2tleSR7dHJpZ2dlcmVkS2V5fWApXG4gICAgICAgICB0aGlzLm5vdGVSZWxlYXNlZChrZXksIHRyaWdnZXJlZEtleSlcbiAgICAgICAgIGtleS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnd2hpdGUnXG5cbiAgICAgICAgIGlmIChrZXkuZ2V0QXR0cmlidXRlKCdjbGFzcycpID09PSAnc2hhcnBLZXknKSB7XG4gICAgICAgICAgIGtleS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnYmxhY2snXG4gICAgICAgICB9XG4gICAgICAgfVxuICAgICB9LCBmYWxzZSlcbiAgIH1cblxuICAgICAgLyoqXG4gICAqIENyZWF0ZXMgYXJyYXkgb2YgcGl0Y2hlc1xuICAgKlxuICAgKiBAbWVtYmVyb2YgU3ludGhcbiAgICovXG4gICBjcmVhdGVOb3RlVGFibGUgKG9jdGF2ZSkge1xuICAgICBsZXQgbm90ZUZyZXEgPSBbXVxuXG4gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSsrKSB7XG4gICAgICAgbm90ZUZyZXFbb2N0YXZlICsgaV0gPSBbXVxuICAgICB9XG5cbiAgICAgbm90ZUZyZXFbb2N0YXZlXVsnQyddID0gMzIuNzAzMTk1NjYyNTc0ODI5XG4gICAgIG5vdGVGcmVxW29jdGF2ZV1bJ0MjJ10gPSAzNC42NDc4Mjg4NzIxMDkwMTJcbiAgICAgbm90ZUZyZXFbb2N0YXZlXVsnRCddID0gMzYuNzA4MDk1OTg5Njc1OTQ1XG4gICAgIG5vdGVGcmVxW29jdGF2ZV1bJ0QjJ10gPSAzOC44OTA4NzI5NjUyNjAxMTNcbiAgICAgbm90ZUZyZXFbb2N0YXZlXVsnRSddID0gNDEuMjAzNDQ0NjE0MTA4NzQxXG4gICAgIG5vdGVGcmVxW29jdGF2ZV1bJ0YnXSA9IDQzLjY1MzUyODkyOTEyNTQ4NVxuICAgICBub3RlRnJlcVtvY3RhdmVdWydGIyddID0gNDYuMjQ5MzAyODM4OTU0Mjk5XG4gICAgIG5vdGVGcmVxW29jdGF2ZV1bJ0cnXSA9IDQ4Ljk5OTQyOTQ5NzcxODY2MVxuICAgICBub3RlRnJlcVtvY3RhdmVdWydHIyddID0gNTEuOTEzMDg3MTk3NDkzMTQyXG4gICAgIG5vdGVGcmVxW29jdGF2ZV1bJ0EnXSA9IDU1LjAwMDAwMDAwMDAwMDAwMFxuICAgICBub3RlRnJlcVtvY3RhdmVdWydBIyddID0gNTguMjcwNDcwMTg5NzYxMjM5XG4gICAgIG5vdGVGcmVxW29jdGF2ZV1bJ0InXSA9IDYxLjczNTQxMjY1NzAxNTUxM1xuXG4gICAgIGZvciAodmFyIHBpdGNoIGluIG5vdGVGcmVxW29jdGF2ZV0pIHtcbiAgICAgICBmb3IgKGxldCBpID0gMjsgaSA8IDg7IGkrKykge1xuICAgICAgICAgbm90ZUZyZXFbaV1bcGl0Y2hdID0gbm90ZUZyZXFbaSAtIDFdW3BpdGNoXSAqIDJcbiAgICAgICB9XG4gICAgIH1cblxuICAgICB0aGlzLl9ub3RlRnJlcSA9IG5vdGVGcmVxXG4gICAgIHJldHVybiBub3RlRnJlcVxuICAgfVxuXG4gICBjcmVhdGVLZXlib2FyZCAob2N0YXZlKSB7XG4gICAgIGxldCBrZXlJbmRleCA9IDBcblxuICAgICB0aGlzLl9ub3RlRnJlcS5mb3JFYWNoKChrZXlzLCBpMSkgPT4ge1xuICAgICAgIGlmIChpMSA8PSBvY3RhdmUgKyAxICYmIGkxID49IG9jdGF2ZSkge1xuICAgICAgICAgbGV0IGtleUxpc3QgPSBPYmplY3QuZW50cmllcyhrZXlzKVxuICAgICAgICAgbGV0IHdoaXRlS2V5cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgICBsZXQgYmxhY2tLZXlzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgIGxldCBvY3RhdmVFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgIG9jdGF2ZUVsZW0uY2xhc3NOYW1lID0gJ29jdGF2ZSdcblxuICAgICAgICAga2V5TGlzdC5mb3JFYWNoKChrZXksIGkyKSA9PiB7XG4gICAgICAgICAgIGlmIChrZXlbMF0ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgIGJsYWNrS2V5cy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUtleShrZXlbMF0sIGkxLCBrZXlbMV0sIGtleUluZGV4KSlcbiAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICB3aGl0ZUtleXMuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVLZXkoa2V5WzBdLCBpMSwga2V5WzFdLCBrZXlJbmRleCkpXG4gICAgICAgICAgIH1cblxuICAgICAgICAgICBrZXlJbmRleCsrXG4gICAgICAgICB9KVxuXG4gICAgICAgICBvY3RhdmVFbGVtLmFwcGVuZENoaWxkKGJsYWNrS2V5cylcbiAgICAgICAgIG9jdGF2ZUVsZW0uYXBwZW5kQ2hpbGQod2hpdGVLZXlzKVxuICAgICAgICAgdGhpcy5fa2V5Ym9hcmQuYXBwZW5kQ2hpbGQob2N0YXZlRWxlbSlcbiAgICAgICB9XG4gICAgIH0pXG4gICB9XG5cbiAgIHNldHVwICgpIHtcbiAgICAgdGhpcy5fbm90ZUZyZXEgPSB0aGlzLmNyZWF0ZU5vdGVUYWJsZSgxKVxuICAgICB0aGlzLl9tYXN0ZXJHYWluTm9kZSA9IHRoaXMuX2F1ZGlvQ29udGV4dC5jcmVhdGVHYWluKClcbiAgICAgdGhpcy5fbWFzdGVyR2Fpbk5vZGUuY29ubmVjdCh0aGlzLl9vdXQpXG4gICAgIHRoaXMuX21hc3RlckdhaW5Ob2RlLmdhaW4udmFsdWUgPSB0aGlzLl92b2x1bWVDb250cm9sLnZhbHVlXG4gICAgIHRoaXMuX25vdGVMZW5ndGggPSA1MDBcblxuICAgICB0aGlzLmNyZWF0ZUtleWJvYXJkKDMpXG5cbiAgICAgdGhpcy5fc2luZVRlcm1zID0gbmV3IEZsb2F0MzJBcnJheShbMCwgMCwgMSwgMCwgMV0pXG4gICAgIHRoaXMuX2Nvc2luZVRlcm1zID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLl9zaW5lVGVybXMubGVuZ3RoKVxuICAgICB0aGlzLl9jdXN0b21XYXZlZm9ybSA9IHRoaXMuX2F1ZGlvQ29udGV4dC5jcmVhdGVQZXJpb2RpY1dhdmUodGhpcy5fY29zaW5lVGVybXMsIHRoaXMuX3NpbmVUZXJtcylcblxuICAgICB0aGlzLmVmZmVjdHNSb3V0aW5nKHRydWUpXG4gICB9XG5cbiAgIGNyZWF0ZUtleSAobm90ZSwgb2N0YXZlLCBmcmVxLCBrZXlJbmRleCkge1xuICAgICBsZXQga2V5RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgIGxldCBsYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gICAgIGtleUVsZW1lbnQuY2xhc3NOYW1lID0gJ2tleSdcbiAgICAga2V5RWxlbWVudC5pZCA9IGBrZXkke3RoaXMuX3RyaWdnZXJLZXlzW2tleUluZGV4XX1gXG4gICAgIGtleUVsZW1lbnQuZGF0YXNldFsnb2N0YXZlJ10gPSBvY3RhdmVcbiAgICAga2V5RWxlbWVudC5kYXRhc2V0Wydub3RlJ10gPSBub3RlXG4gICAgIGtleUVsZW1lbnQuZGF0YXNldFsnZnJlcXVlbmN5J10gPSBmcmVxXG5cbiAgICAgaWYgKG5vdGUubGVuZ3RoID4gMSkge1xuICAgICAgIGtleUVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsICdzaGFycEtleScpXG4gICAgIH1cblxuICAgICBsYWJlbEVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5fdHJpZ2dlcktleXNba2V5SW5kZXhdXG5cbiAgICAga2V5RWxlbWVudC5hcHBlbmRDaGlsZChsYWJlbEVsZW1lbnQpXG5cbiAgICAga2V5RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBldmVudCA9PiB7XG4gICAgICAgdGhpcy5ub3RlUHJlc3NlZChrZXlFbGVtZW50KVxuICAgICB9LCBmYWxzZSlcbiAgICAga2V5RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZXZlbnQgPT4ge1xuICAgICAgIHRoaXMubm90ZVJlbGVhc2VkKGtleUVsZW1lbnQpXG4gICAgIH0sIGZhbHNlKVxuICAgICBrZXlFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGV2ZW50ID0+IHtcbiAgICAgICB0aGlzLm5vdGVSZWxlYXNlZChrZXlFbGVtZW50KVxuICAgICB9LCBmYWxzZSlcbiAgICAga2V5RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZXZlbnQgPT4ge1xuICAgICAgIHRoaXMubm90ZVJlbGVhc2VkKGtleUVsZW1lbnQpXG4gICAgIH0sIGZhbHNlKVxuXG4gICAgIHJldHVybiBrZXlFbGVtZW50XG4gICB9XG5cbiAgIHBsYXlUb25lIChmcmVxKSB7XG4gICAgIGxldCBjYXJyaWVyID0gdGhpcy5fYXVkaW9Db250ZXh0LmNyZWF0ZU9zY2lsbGF0b3IoKVxuICAgICBsZXQgbW9kdWxhdG9yID0gdGhpcy5fYXVkaW9Db250ZXh0LmNyZWF0ZU9zY2lsbGF0b3IoKVxuICAgICBsZXQgbW9kdWxhdG9yMiA9IHRoaXMuX2F1ZGlvQ29udGV4dC5jcmVhdGVPc2NpbGxhdG9yKClcbiAgICAgbGV0IGNhcnJpZXJHYWluID0gdGhpcy5fYXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKVxuICAgICBsZXQgbW9kdWxhdG9yR2FpbiA9IHRoaXMuX2F1ZGlvQ29udGV4dC5jcmVhdGVHYWluKClcbiAgICAgbGV0IG1vZHVsYXRvcjJHYWluID0gdGhpcy5fYXVkaW9Db250ZXh0LmNyZWF0ZUdhaW4oKVxuXG4gICAgIGNhcnJpZXJHYWluLmdhaW4udmFsdWUgPSB0aGlzLl9jYXJyaWVyR2FpbkNvbnRyb2wudmFsdWVcbiAgICAgbW9kdWxhdG9yR2Fpbi5nYWluLnZhbHVlID0gdGhpcy5fbW9kdWxhdGlvbkRlcHRoQ29udHJvbC52YWx1ZVxuICAgICBtb2R1bGF0b3IuZnJlcXVlbmN5LnZhbHVlID0gdGhpcy5fbW9kdWxhdGlvbkZyZXFDb250cm9sLnZhbHVlXG4gICAgIG1vZHVsYXRvcjJHYWluLmdhaW4udmFsdWUgPSB0aGlzLl9tb2R1bGF0aW9uMkRlcHRoQ29udHJvbC52YWx1ZVxuICAgICBtb2R1bGF0b3IyLmZyZXF1ZW5jeS52YWx1ZSA9IHRoaXMuX21vZHVsYXRpb24yRnJlcUNvbnRyb2wudmFsdWVcblxuICAgICAgLy8gZnJlcXVlbmN5IG1vZHVsYXRpb24gcm91dGluZ1xuICAgICBjYXJyaWVyLmNvbm5lY3QoY2FycmllckdhaW4pXG4gICAgIGNhcnJpZXIuY29ubmVjdCh0aGlzLl9lZmZlY3RzR2Fpbk5vZGUpXG4gICAgIGNhcnJpZXJHYWluLmNvbm5lY3QobW9kdWxhdG9yLmZyZXF1ZW5jeSlcbiAgICAgbW9kdWxhdG9yLmNvbm5lY3QobW9kdWxhdG9yR2FpbilcbiAgICAgbW9kdWxhdG9yR2Fpbi5jb25uZWN0KHRoaXMuX2VmZmVjdHNHYWluTm9kZSlcbiAgICAgY2FycmllckdhaW4uY29ubmVjdChtb2R1bGF0b3IyLmZyZXF1ZW5jeSlcbiAgICAgbW9kdWxhdG9yMi5jb25uZWN0KG1vZHVsYXRvcjJHYWluKVxuICAgICBtb2R1bGF0b3IyR2Fpbi5jb25uZWN0KHRoaXMuX2VmZmVjdHNHYWluTm9kZSlcblxuICAgICBsZXQgdHlwZSA9IHRoaXMuX2NhcnJpZXJXYXZlUGlja2VyLm9wdGlvbnNbdGhpcy5fY2FycmllcldhdmVQaWNrZXIuc2VsZWN0ZWRJbmRleF0udmFsdWVcbiAgICAgbGV0IHR5cGUyID0gdGhpcy5fbW9kdWxhdG9yV2F2ZVBpY2tlci5vcHRpb25zW3RoaXMuX21vZHVsYXRvcldhdmVQaWNrZXIuc2VsZWN0ZWRJbmRleF0udmFsdWVcbiAgICAgbGV0IHR5cGUzID0gdGhpcy5fbW9kdWxhdG9yMldhdmVQaWNrZXIub3B0aW9uc1t0aGlzLl9tb2R1bGF0b3IyV2F2ZVBpY2tlci5zZWxlY3RlZEluZGV4XS52YWx1ZVxuXG4gICAgIGlmICh0eXBlID09PSAnY3VzdG9tJykge1xuICAgICAgIGNhcnJpZXIuc2V0UGVyaW9kaWNXYXZlKHRoaXMuX2N1c3RvbVdhdmVmb3JtKVxuICAgICB9IGVsc2Uge1xuICAgICAgIGNhcnJpZXIudHlwZSA9IHR5cGVcbiAgICAgICBtb2R1bGF0b3IudHlwZSA9IHR5cGUyXG4gICAgICAgbW9kdWxhdG9yMi50eXBlID0gdHlwZTNcbiAgICAgfVxuXG4gICAgIGNhcnJpZXIuZnJlcXVlbmN5LnZhbHVlID0gZnJlcVxuXG4gICAgIGNhcnJpZXIuc3RhcnQoKVxuICAgICBtb2R1bGF0b3Iuc3RhcnQoKVxuICAgICBtb2R1bGF0b3IyLnN0YXJ0KClcblxuICAgICByZXR1cm4gW2NhcnJpZXIsIG1vZHVsYXRvciwgbW9kdWxhdG9yMl1cbiAgIH1cblxuICAgbm90ZVByZXNzZWQgKGtleUVsZW1lbnQsIGlkLCBjZWxsKSB7XG4gICAgIGxldCBkYXRhc2V0ID0ga2V5RWxlbWVudC5kYXRhc2V0XG5cbiAgICAgaWYgKCFkYXRhc2V0WydwcmVzc2VkJ10pIHtcbiAgICAgICBpZiAoY2VsbCkge1xuICAgICAgICAgbGV0IGNlbGxJZCA9IGNlbGwuZ2V0QXR0cmlidXRlKCdyb3cnKSArIGNlbGwuZ2V0QXR0cmlidXRlKCdjb2x1bW4nKVxuICAgICAgICAgbGV0IHJvdyA9IE51bWJlcihjZWxsSWRbMF0pXG5cbiAgICAgICAgIGlmICh0aGlzLl9hY3RpdmVOb3Rlc1tyb3ddICE9PSBudWxsKSB7XG4gICAgICAgICAgIHRoaXMubm90ZVJlbGVhc2VkKHRoaXMuX2FjdGl2ZU5vdGVzW3Jvd10ua2V5RWxlbWVudCwgdGhpcy5fYWN0aXZlTm90ZXNbcm93XS5pZCwgdGhpcy5fYWN0aXZlTm90ZXNbcm93XS5jZWxsSWQpXG4gICAgICAgICB9XG5cbiAgICAgICAgIHRoaXMuX2FjdGl2ZU5vdGVzW3Jvd10gPSB7XG4gICAgICAgICAgIGtleUVsZW1lbnQ6IGtleUVsZW1lbnQsXG4gICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgY2VsbElkOiBjZWxsSWRcbiAgICAgICAgIH1cblxuICAgICAgICAgdGhpcy5fb3NjTGlzdFtjZWxsSWRdID0gdGhpcy5wbGF5VG9uZShkYXRhc2V0WydmcmVxdWVuY3knXSlcblxuICAgICAgICAgdGhpcy5fbm90ZUxlbmd0aCA9IE51bWJlcihjZWxsLmdldEF0dHJpYnV0ZSgnbm90ZUxlbmd0aCcpKVxuXG4gICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgdGhpcy5ub3RlUmVsZWFzZWQoa2V5RWxlbWVudCwgaWQsIGNlbGxJZClcbiAgICAgICAgIH0sIHRoaXMuX25vdGVMZW5ndGgpXG4gICAgICAgfSBlbHNlIHtcbiAgICAgICAgIHRoaXMuX29zY0xpc3RbaWRdID0gdGhpcy5wbGF5VG9uZShkYXRhc2V0WydmcmVxdWVuY3knXSlcbiAgICAgICB9XG5cbiAgICAgICBkYXRhc2V0WydwcmVzc2VkJ10gPSAneWVzJ1xuICAgICB9XG4gICB9XG5cbiAgIG5vdGVSZWxlYXNlZCAoa2V5RWxlbWVudCwgaWQsIGNlbGxJZCkge1xuICAgICBsZXQgZGF0YXNldCA9IGtleUVsZW1lbnQuZGF0YXNldFxuXG4gICAgIGlmIChkYXRhc2V0ICYmIGRhdGFzZXRbJ3ByZXNzZWQnXSkge1xuICAgICAgIGlmIChjZWxsSWQpIHtcbiAgICAgICAgIHRoaXMuX29zY0xpc3RbY2VsbElkXS5mb3JFYWNoKG9zYyA9PiB7XG4gICAgICAgICAgIG9zYy5zdG9wKClcbiAgICAgICAgIH0pXG4gICAgICAgICBkZWxldGUgdGhpcy5fb3NjTGlzdFtjZWxsSWRdXG4gICAgICAgfSBlbHNlIHtcbiAgICAgICAgIHRoaXMuX29zY0xpc3RbaWRdLmZvckVhY2gob3NjID0+IHtcbiAgICAgICAgICAgb3NjLnN0b3AoKVxuICAgICAgICAgfSlcbiAgICAgICAgIGRlbGV0ZSB0aGlzLl9vc2NMaXN0W2lkXVxuICAgICAgIH1cbiAgICAgICBkZWxldGUgZGF0YXNldFsncHJlc3NlZCddXG4gICAgIH1cbiAgIH1cblxuICAgY2hhbmdlVm9sdW1lICgpIHtcbiAgICAgdGhpcy5fbWFzdGVyR2Fpbk5vZGUuZ2Fpbi52YWx1ZSA9IHRoaXMuX3ZvbHVtZUNvbnRyb2wudmFsdWVcbiAgIH1cblxuICAgY2hhbmdlTGZvRnJlcSAoKSB7XG5cbiAgIH1cblxuICAgZWZmZWN0c1JvdXRpbmcgKGRlZmF1bHRTZXR0aW5ncykge1xuICAgICBsZXQgZWZmZWN0T3B0aW9uT2JqXG4gICAgIGxldCBvbGRSZXZlcmJcbiAgICAgbGV0IG9sZEZsYW5nZXJcbiAgICAgbGV0IG9sZFRyZW1vbG9cbiAgICAgbGV0IG9sZERlbGF5XG4gICAgIGxldCBvbGRSaW5nTW9kdWxhdG9yXG5cbiAgICAgaWYgKHRoaXMuX2FuYWx5c2VyKSB7XG4gICAgICAgb2xkUmV2ZXJiID0gdGhpcy5fcmV2ZXJiXG4gICAgICAgb2xkRmxhbmdlciA9IHRoaXMuX2ZsYW5nZXJcbiAgICAgICBvbGRUcmVtb2xvID0gdGhpcy5fdHJlbW9sb1xuICAgICAgIG9sZERlbGF5ID0gdGhpcy5fZGVsYXlcbiAgICAgICBvbGRSaW5nTW9kdWxhdG9yID0gdGhpcy5fZGVsYXlcbiAgICAgfVxuXG4gICAgIGlmIChkZWZhdWx0U2V0dGluZ3MgPT09IGZhbHNlKSB7XG4gICAgICAgZWZmZWN0T3B0aW9uT2JqID0ge1xuICAgICAgICAgZmxhbmdlcjogdGhpcy5fZmxhbmdlci5vcHRpb25zLFxuICAgICAgICAgZGVsYXk6IHRoaXMuX2RlbGF5Lm9wdGlvbnMsXG4gICAgICAgICByZXZlcmI6IHRoaXMuX3JldmVyYi5vcHRpb25zLFxuICAgICAgICAgdHJlbW9sbzogdGhpcy5fdHJlbW9sby5vcHRpb25zLFxuICAgICAgICAgcmluZ21vZHVsYXRvcjogdGhpcy5fcmluZ01vZHVsYXRvci5vcHRpb25zXG4gICAgICAgfVxuICAgICB9XG4gICAgIGlmIChkZWZhdWx0U2V0dGluZ3MgPT09IHRydWUpIHtcbiAgICAgICBlZmZlY3RPcHRpb25PYmogPSB7XG4gICAgICAgICBkZWxheToge1xuICAgICAgICAgICBmZWVkYmFjazogMCxcbiAgICAgICAgICAgdGltZTogMCxcbiAgICAgICAgICAgbWl4OiAwXG4gICAgICAgICB9LFxuICAgICAgICAgZmxhbmdlcjoge1xuICAgICAgICAgICB0aW1lOiAwLFxuICAgICAgICAgICBzcGVlZDogMCxcbiAgICAgICAgICAgZGVwdGg6IDAsXG4gICAgICAgICAgIGZlZWRiYWNrOiAwLFxuICAgICAgICAgICBtaXg6IDBcbiAgICAgICAgIH0sXG4gICAgICAgICByZXZlcmI6IHtcbiAgICAgICAgICAgdGltZTogMCxcbiAgICAgICAgICAgZGVjYXk6IDAsXG4gICAgICAgICAgIHJldmVyc2U6IGZhbHNlLFxuICAgICAgICAgICBtaXg6IDBcbiAgICAgICAgIH0sXG4gICAgICAgICB0cmVtb2xvOiB7XG4gICAgICAgICAgIHNwZWVkOiAwLFxuICAgICAgICAgICBkZXB0aDogMCxcbiAgICAgICAgICAgbWl4OiAwXG4gICAgICAgICB9LFxuICAgICAgICAgcmluZ21vZHVsYXRvcjpcbiAgICAgICAgIHtcbiAgICAgICAgICAgc3BlZWQ6IDAsXG4gICAgICAgICAgIGRpc3RvcnRpb246IDAsXG4gICAgICAgICAgIG1peDogMFxuICAgICAgICAgfVxuICAgICAgIH1cbiAgICAgfVxuXG4gICAgIHRoaXMuX2VmZmVjdHNHYWluTm9kZS5nYWluLnZhbHVlID0gMVxuXG4gICAgIHRoaXMuX2FuYWx5c2VyID0gdGhpcy5fYXVkaW9Db250ZXh0LmNyZWF0ZUFuYWx5c2VyKClcblxuICAgICB0aGlzLl9kZWxheSA9IG5ldyBQaXp6aWNhdG8uRWZmZWN0cy5EZWxheShlZmZlY3RPcHRpb25PYmouZGVsYXkpXG5cbiAgICAgdGhpcy5fZmxhbmdlciA9IG5ldyBQaXp6aWNhdG8uRWZmZWN0cy5GbGFuZ2VyKGVmZmVjdE9wdGlvbk9iai5mbGFuZ2VyKVxuXG4gICAgIHRoaXMuX3JldmVyYiA9IG5ldyBQaXp6aWNhdG8uRWZmZWN0cy5SZXZlcmIoZWZmZWN0T3B0aW9uT2JqLnJldmVyYilcblxuICAgICB0aGlzLl90cmVtb2xvID0gbmV3IFBpenppY2F0by5FZmZlY3RzLlRyZW1vbG8oZWZmZWN0T3B0aW9uT2JqLnRyZW1vbG8pXG5cbiAgICAgdGhpcy5fbG93UGFzc0ZpbHRlciA9IG5ldyBQaXp6aWNhdG8uRWZmZWN0cy5Mb3dQYXNzRmlsdGVyKHtcbiAgICAgICBmcmVxdWVuY3k6IDAsXG4gICAgICAgcGVhazogMFxuICAgICB9KVxuXG4gICAgIHRoaXMuX2hpZ2hQYXNzRmlsdGVyID0gbmV3IFBpenppY2F0by5FZmZlY3RzLkhpZ2hQYXNzRmlsdGVyKHtcbiAgICAgICBmcmVxdWVuY3k6IDAsXG4gICAgICAgcGVhazogMFxuICAgICB9KVxuXG4gICAgIHRoaXMuX3JpbmdNb2R1bGF0b3IgPSBuZXcgUGl6emljYXRvLkVmZmVjdHMuUmluZ01vZHVsYXRvcihlZmZlY3RPcHRpb25PYmoucmluZ21vZHVsYXRvcilcblxuICAgICB0aGlzLl9lZmZlY3RzR2Fpbk5vZGUuY29ubmVjdCh0aGlzLl9mbGFuZ2VyKVxuICAgICB0aGlzLl9mbGFuZ2VyLmNvbm5lY3QodGhpcy5fdHJlbW9sbylcbiAgICAgdGhpcy5fdHJlbW9sby5jb25uZWN0KHRoaXMuX3JpbmdNb2R1bGF0b3IpXG4gICAgIHRoaXMuX3JpbmdNb2R1bGF0b3IuY29ubmVjdCh0aGlzLl9kZWxheSlcbiAgIC8vIHRoaXMuX2xvd1Bhc3NGaWx0ZXIuY29ubmVjdCh0aGlzLl9oaWdoUGFzc0ZpbHRlcilcbiAgIC8vIHRoaXMuX2hpZ2hQYXNzRmlsdGVyLmNvbm5lY3QodGhpcy5fZGVsYXkpXG4gICAgIHRoaXMuX2RlbGF5LmNvbm5lY3QodGhpcy5fcmV2ZXJiKVxuICAgICB0aGlzLl9yZXZlcmIuY29ubmVjdCh0aGlzLl9hbmFseXNlcilcbiAgICAgdGhpcy5fYW5hbHlzZXIuY29ubmVjdCh0aGlzLl9tYXN0ZXJHYWluTm9kZSlcblxuICAgICBpZiAob2xkUmV2ZXJiICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICBvbGRSZXZlcmIuZGlzY29ubmVjdCgpXG4gICAgICAgb2xkRmxhbmdlci5kaXNjb25uZWN0KClcbiAgICAgICBvbGREZWxheS5kaXNjb25uZWN0KClcbiAgICAgICBvbGRSaW5nTW9kdWxhdG9yLmRpc2Nvbm5lY3QoKVxuICAgICAgIG9sZFRyZW1vbG8uZGlzY29ubmVjdCgpXG4gICAgIH1cbiAgIH1cbn1cblxuIHdpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3N5bnRoLWVsZW1lbnQnLCBTeW50aClcblxuIG1vZHVsZS5leHBvcnRzID0gU3ludGhcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vYXBwL3NyYy9qcy9zeW50aC5qc1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n")
  /***/ },
/* 4 */
  /***/ function (module, exports) {
    eval("const template = document.createElement('template')\n\ntemplate.innerHTML =\n\n`<div class=\"sequencer\">\n    <div class=\"logs\">\n        <div class=\"bpmLog\">BPM: 150</div>\n        <div class=\"loopLengthLog\">Length: 16 </div>\n    </div>\n    <div class=\"inputs\">\n        <input class=\"bmpInput\" placeholder=\"Enter tempo (BPM) max = 300 min = 30\"></input>\n        <input class=\"loopLengthInput\" placeholder=\"Enter loop length (max = 32 min = 1)\"></input>\n    </div>\n    <div class=\"grid\"></div>\n    <img class=\"pausePlayButton\" type=\"play\" src=\"/image/icons8-play-button-50.png\" alt=\"pause/play icon\">\n    <div class=\"info\">Click icons and numbers to change track sound</div>\n    <button class=\"clearButton\">Clear Grid</button>\n    <style>\n        .sequencer {\n            margin-left: 30px;\n            margin-right: 20px;\n            width: 500;\n            font-family: avenir;\n            text-align: center;\n            user-drag: none; \n            user-select: none;\n            -moz-user-select: none;\n            -khtml-user-select: none;\n            -webkit-user-select: none;\n            -o-user-select: none;\n        }\n        .instrumentLog {\n            text-align: center;\n            font-size: 30px;\n            margin: 10px;\n            font-family: avenir;\n        }\n        .logs {\n            text-align: center;\n            margin-right: 5px;\n            width: auto;\n        }\n\n        .logs div {\n            display: inline-block;\n            text-align: center;\n            margin-left: 70px;\n            margin-right: 70px;\n        }\n\n        .info {\n            font-size: 10px;\n            margin: 10px;\n        }\n\n        }\n        .inputs {\n            float: center;\n        }\n\n        .inputs input{\n            text-align: center;\n            margin: 10px;\n            margin-left: 9px;\n            margin-right: 9px;\n            margin-top: 5px;\n            font-size: 8px;\n            width: 200px;\n        }\n\n        .grid {\n            text-align: center;  \n        }\n\n        .cell {\n            height: 15px;\n            width: 15px;\n            position: relative;\n            box-shadow: 1px 1px 5px rgba(0, 0, 0, .5);\n            padding: 5px;\n            margin: 1px;\n            border-radius: 3px;\n            background: white;\n        }\n\n        .instrumentIcon{\n            height: 15px;\n            width: 15px;\n            position: relative;\n            padding: 5px;\n            margin-left: -42px;\n            margin-bottom: -1px;\n            border-radius: 3px;\n            position:absolute;\n\n        }\n\n        .instrumentNumber {\n            display: inline;\n            margin-left: -18px;\n            margin-top: 5px;\n            position:absolute;\n        \n        }\n\n        .pausePlayButton {\n           margin-top: 10px;\n           margin-right: 0px;\n           width: 30px\n        }\n\n        .clearButton {\n            text-align: left;\n        }\n\n        .changeNoteMenu {\n            display: inline-block;\n        }\n    </style>\n</div>\n`\nmodule.exports.template = template\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc3JjL2pzL3RlbXBsYXRlcy9zZXF1ZW5jZXJUZW1wbGF0ZS5qcz9iMWRhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiNC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKVxuXG50ZW1wbGF0ZS5pbm5lckhUTUwgPVxuXG5gPGRpdiBjbGFzcz1cInNlcXVlbmNlclwiPlxuICAgIDxkaXYgY2xhc3M9XCJsb2dzXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJicG1Mb2dcIj5CUE06IDE1MDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwibG9vcExlbmd0aExvZ1wiPkxlbmd0aDogMTYgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImlucHV0c1wiPlxuICAgICAgICA8aW5wdXQgY2xhc3M9XCJibXBJbnB1dFwiIHBsYWNlaG9sZGVyPVwiRW50ZXIgdGVtcG8gKEJQTSkgbWF4ID0gMzAwIG1pbiA9IDMwXCI+PC9pbnB1dD5cbiAgICAgICAgPGlucHV0IGNsYXNzPVwibG9vcExlbmd0aElucHV0XCIgcGxhY2Vob2xkZXI9XCJFbnRlciBsb29wIGxlbmd0aCAobWF4ID0gMzIgbWluID0gMSlcIj48L2lucHV0PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJncmlkXCI+PC9kaXY+XG4gICAgPGltZyBjbGFzcz1cInBhdXNlUGxheUJ1dHRvblwiIHR5cGU9XCJwbGF5XCIgc3JjPVwiL2ltYWdlL2ljb25zOC1wbGF5LWJ1dHRvbi01MC5wbmdcIiBhbHQ9XCJwYXVzZS9wbGF5IGljb25cIj5cbiAgICA8ZGl2IGNsYXNzPVwiaW5mb1wiPkNsaWNrIGljb25zIGFuZCBudW1iZXJzIHRvIGNoYW5nZSB0cmFjayBzb3VuZDwvZGl2PlxuICAgIDxidXR0b24gY2xhc3M9XCJjbGVhckJ1dHRvblwiPkNsZWFyIEdyaWQ8L2J1dHRvbj5cbiAgICA8c3R5bGU+XG4gICAgICAgIC5zZXF1ZW5jZXIge1xuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDMwcHg7XG4gICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7XG4gICAgICAgICAgICB3aWR0aDogNTAwO1xuICAgICAgICAgICAgZm9udC1mYW1pbHk6IGF2ZW5pcjtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIHVzZXItZHJhZzogbm9uZTsgXG4gICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgICAgICAta2h0bWwtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgICAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAgICAgLW8tdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgLmluc3RydW1lbnRMb2cge1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgZm9udC1zaXplOiAzMHB4O1xuICAgICAgICAgICAgbWFyZ2luOiAxMHB4O1xuICAgICAgICAgICAgZm9udC1mYW1pbHk6IGF2ZW5pcjtcbiAgICAgICAgfVxuICAgICAgICAubG9ncyB7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgICAgICAgICAgIHdpZHRoOiBhdXRvO1xuICAgICAgICB9XG5cbiAgICAgICAgLmxvZ3MgZGl2IHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA3MHB4O1xuICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA3MHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmluZm8ge1xuICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4O1xuICAgICAgICAgICAgbWFyZ2luOiAxMHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgICAuaW5wdXRzIHtcbiAgICAgICAgICAgIGZsb2F0OiBjZW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICAuaW5wdXRzIGlucHV0e1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgbWFyZ2luOiAxMHB4O1xuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDlweDtcbiAgICAgICAgICAgIG1hcmdpbi1yaWdodDogOXB4O1xuICAgICAgICAgICAgbWFyZ2luLXRvcDogNXB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiA4cHg7XG4gICAgICAgICAgICB3aWR0aDogMjAwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuZ3JpZCB7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7ICBcbiAgICAgICAgfVxuXG4gICAgICAgIC5jZWxsIHtcbiAgICAgICAgICAgIGhlaWdodDogMTVweDtcbiAgICAgICAgICAgIHdpZHRoOiAxNXB4O1xuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgYm94LXNoYWRvdzogMXB4IDFweCA1cHggcmdiYSgwLCAwLCAwLCAuNSk7XG4gICAgICAgICAgICBwYWRkaW5nOiA1cHg7XG4gICAgICAgICAgICBtYXJnaW46IDFweDtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgLmluc3RydW1lbnRJY29ue1xuICAgICAgICAgICAgaGVpZ2h0OiAxNXB4O1xuICAgICAgICAgICAgd2lkdGg6IDE1cHg7XG4gICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICBwYWRkaW5nOiA1cHg7XG4gICAgICAgICAgICBtYXJnaW4tbGVmdDogLTQycHg7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAtMXB4O1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC5pbnN0cnVtZW50TnVtYmVyIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZTtcbiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAtMThweDtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDVweDtcbiAgICAgICAgICAgIHBvc2l0aW9uOmFic29sdXRlO1xuICAgICAgICBcbiAgICAgICAgfVxuXG4gICAgICAgIC5wYXVzZVBsYXlCdXR0b24ge1xuICAgICAgICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDBweDtcbiAgICAgICAgICAgd2lkdGg6IDMwcHhcbiAgICAgICAgfVxuXG4gICAgICAgIC5jbGVhckJ1dHRvbiB7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgICAgICB9XG5cbiAgICAgICAgLmNoYW5nZU5vdGVNZW51IHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgfVxuICAgIDwvc3R5bGU+XG48L2Rpdj5cbmBcbm1vZHVsZS5leHBvcnRzLnRlbXBsYXRlID0gdGVtcGxhdGVcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vYXBwL3NyYy9qcy90ZW1wbGF0ZXMvc2VxdWVuY2VyVGVtcGxhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n")
  /***/ },
/* 5 */
  /***/ function (module, exports) {
    eval("const template = document.createElement('template')\n\ntemplate.innerHTML =\n\ntemplate.innerHTML =\n\n`<div class=\"synth\">\n    <div class=\"keyboard\">\n      <div class=\"settingsBar\">\n        <div class=\"volumeInput\">\n          <span>Volume: </span>\n          <input type=\"range\" min=\"0.0\" max=\"1.0\" step=\"0.01\"\n              value=\"0.5\" list=\"volumes\" name=\"volume\">\n          <datalist id=\"volumes\">\n            <option value=\"0.0\" label=\"Mute\">\n            <option value=\"1.0\" label=\"100%\">\n          </datalist>\n        </div>\n        <span>Carrier Gain: </span>\n        <input type=\"range\" min=\"0\" max=\"3000\" step=\"1\"\n            value=\"1\" list=\"carrierGain\" name=\"carrierGain\">\n        <div class=\"modulationInput\">\n            <span>Modulation Freq: </span>\n            <input type=\"range\" min=\"1\" max=\"1500\" step=\"1\"\n                value=\"750\" list=\"modulationFreq\" name=\"modulationFreq\">\n            <span>Modulation Depth: </span>\n            <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\"\n                value=\"0\" list=\"modulationDepth\" name=\"modulationDepth\">\n        </div>\n        <div class=\"modulationInput\">\n          <span>Modulation 2 Freq: </span>\n          <input type=\"range\" min=\"1\" max=\"1500\" step=\"1\"\n              value=\"750\" list=\"modulation2Freq\" name=\"modulation2Freq\">\n          <span>Modulation 2 Depth: </span>\n          <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\"\n              value=\"0\" list=\"modulation2Depth\" name=\"modulation2Depth\">\n          \n        </div>\n        <div class=\"right\">\n          <span>Carrier waveform: </span>\n          <select name=\"waveform\">\n            <option value=\"sine\">Sine</option>\n            <option value=\"square\" selected>Square</option>\n            <option value=\"sawtooth\">Sawtooth</option>\n            <option value=\"triangle\">Triangle</option>\n          </select>\n          <span> Mod1 waveform: </span>\n          <select name=\"waveform2\">\n            <option value=\"sine\">Sine</option>\n            <option value=\"square\" selected>Square</option>\n            <option value=\"sawtooth\">Sawtooth</option>\n            <option value=\"triangle\">Triangle</option>\n          </select>\n          <span> Mod2 waveform: </span>\n          <select name=\"waveform3\">\n            <option value=\"sine\">Sine</option>\n            <option value=\"square\" selected>Square</option>\n            <option value=\"sawtooth\">Sawtooth</option>\n            <option value=\"triangle\">Triangle</option>\n          </select>\n        </div>\n        \n        <span>Keyboard octave: </span>\n        <select name=\"octave\">\n          <option value=\"1\">1</option>\n          <option value=\"2\">2</option>\n          <option value=\"3\" selected>3</option>\n          <option value=\"4\">4</option>\n          <option value=\"5\">5</option>\n          <option value=\"6\">6</option>\n          <option value=\"7\">7</option>\n        </select>\n       \n       \n        <div class=\"effectSettings\"\n          <div class=\"effect\" id=\"flanger\">\n          <span>Flanger </span>\n          <br>\n          <span>Time: </span>\n          <input type=\"range\" min=\"0.0\" max=\"1.0\" step=\"0.01\"\n              value=\"0\" list=\"flangerTime\" name=\"time\">\n          <br>\n          <span>Depth: </span>\n          <input type=\"range\" min=\"0.0\" max=\"1.0\" step=\"0.01\"\n              value=\"0\" list=\"flangerDepth\" name=\"depth\">\n          <br>\n          <span>Speed: </span>\n          <input type=\"range\" min=\"0.0\" max=\"1.0\" step=\"0.01\"\n              value=\"0\" list=\"flangerSpeed\" name=\"speed\">\n          <br>\n          <span>Feedback: </span>\n          <input type=\"range\" min=\"0.0\" max=\"1.0\" step=\"0.01\"\n              value=\"0\" list=\"flangerFeedBack\" name=\"feedback\">\n          <br>\n          <span>Mix: </span>\n          <input type=\"range\" min=\"0.0\" max=\"1.0\" step=\"0.01\"\n              value=\"0\" list=\"flangerMix\" name=\"mix\">\n          </div>\n\n          <div class=\"effect\" id=\"tremolo\">\n          <span>Tremolo </span>\n          <br>\n          <span>Depth: </span>\n          <input type=\"range\" min=\"0.0\" max=\"20\" step=\"0.01\"\n              value=\"0\" list=\"tremoloDepth\" name=\"depth\">\n          <br>\n          <span>Speed: </span>\n          <input type=\"range\" min=\"0.0\" max=\"1000\" step=\"1\"\n              value=\"0\" list=\"tremoloSpeed\" name=\"speed\">\n          <br>\n          <span>Mix: </span>\n          <input type=\"range\" min=\"0.0\" max=\"1.0\" step=\"0.01\"\n              value=\"0\" list=\"tremoloMix\" name=\"mix\">\n          </div>   \n\n          <div class=\"effect\" id=\"reverb\">\n          <span>Reverb </span>\n          <br>\n          <span>time: </span>\n          <input type=\"range\" min=\"0.0\" max=\"3\" step=\"0.01\"\n              value=\"0\" list=\"reverbTime\" name=\"time\">\n          <br>\n          <span>Decay: </span>\n          <input type=\"range\" min=\"0.0\" max=\"1\" step=\"0.01\"\n              value=\"0\" list=\"reverbDecay\" name=\"decay\">\n          <br>\n          <span>Mix: </span>\n          <input type=\"range\" min=\"0.0\" max=\"1\" step=\"0.01\"\n              value=\"0\" list=\"reverbMix\" name=\"mix\">\n          <br>\n          </div>\n          \n        </div>\n    </div>\n  </div>\n  <div>\n<div>\n    <style>\n      .synth {\n        height: 110px;\n        white-space: nowrap;\n        margin-left: 10px;\n    \n      }\n      .keyboard {\n        height: 100px;\n        padding: 10px;\n        margin: 20px;\n        position: relative;\n       \n      }\n      \n      .key {\n        cursor: pointer;\n        font: 10px \"Open Sans\", \"Lucida Grande\", \"Arial\", sans-serif;\n        border: 1px solid black;\n        border-radius: 5px;\n        width: 20px;\n        height: 80px;\n        padding: 10px;\n        text-align: center;\n        box-shadow: 2px 2px darkgray;\n        display: inline-block;\n        position: relative;\n        margin-right: 3px;\n        user-select: none;\n        -moz-user-select: none;\n        -webkit-user-select: none;\n        -ms-user-select: none;\n      }\n      \n      .key div {\n        position: flexible;\n        bottom: 0;\n        text-align: center;\n        width: 100%;\n        pointer-events: none;\n      }\n      \n      .key div sub {\n        font-size: 10px;\n        pointer-events: none;\n      }\n      \n      .key:active {\n        background-color: #599;\n        color: #fff;\n      }\n\n      .sharpKey:active {\n        background-color: #599;\n        color: #fff;\n      }\n\n      \n      .octave {\n        margin-top: 10px;\n        display: inline-block;\n\n      }\n      \n      .settingsBar {\n        float: right;\n        margin: 20px;\n        margin-top: -100px;\n        padding: 20px;\n        font: 14px \"Open Sans\", \"Lucida Grande\", \"Arial\", sans-serif;\n        position: flexible;\n        height: auto;\n        width: auto;\n      }\n      .right {\n        margin-top: 10px;\n        text-align: left;\n      }\n\n      .volumeInput{\n        text-align: left;\n      }\n\n      .sharpKey {\n        cursor: pointer;\n        font: 10px \"Open Sans\", \"Lucida Grande\", \"Arial\", sans-serif;\n        border: 1px solid black;\n        border-radius: 5px;\n        width: 10px;\n        height: 80px;\n        padding: 10px;\n        text-align: center;\n        box-shadow: 2px 2px darkgray;\n        display: inline-block;\n        position: relative;\n        margin-right: 3px;\n        user-select: none;\n        -moz-user-select: none;\n        -webkit-user-select: none;\n        -ms-user-select: none;\n        background-color: black;\n        color: white;\n        margin-left: 20px;\n      }\n\n      .modulationInput{\n        text-align: left;\n      }\n\n      .lfoFreq{\n        text-align: left;\n        margin-top: 10px;\n      }\n\n      .effectSettings {\n        margin-top: 20px;\n        \n      }\n\n      .effect {\n        margin-top: 20px;\n        display: inline-block;\n      }\n    </style>\n</div>\n`\n\n{/* */}\n\nmodule.exports.template = template\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc3JjL2pzL3RlbXBsYXRlcy9zeW50aFRlbXBsYXRlLmpzP2Y1YWEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQiLCJmaWxlIjoiNS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKVxuXG50ZW1wbGF0ZS5pbm5lckhUTUwgPVxuXG50ZW1wbGF0ZS5pbm5lckhUTUwgPVxuXG5gPGRpdiBjbGFzcz1cInN5bnRoXCI+XG4gICAgPGRpdiBjbGFzcz1cImtleWJvYXJkXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwic2V0dGluZ3NCYXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInZvbHVtZUlucHV0XCI+XG4gICAgICAgICAgPHNwYW4+Vm9sdW1lOiA8L3NwYW4+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJyYW5nZVwiIG1pbj1cIjAuMFwiIG1heD1cIjEuMFwiIHN0ZXA9XCIwLjAxXCJcbiAgICAgICAgICAgICAgdmFsdWU9XCIwLjVcIiBsaXN0PVwidm9sdW1lc1wiIG5hbWU9XCJ2b2x1bWVcIj5cbiAgICAgICAgICA8ZGF0YWxpc3QgaWQ9XCJ2b2x1bWVzXCI+XG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMC4wXCIgbGFiZWw9XCJNdXRlXCI+XG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMS4wXCIgbGFiZWw9XCIxMDAlXCI+XG4gICAgICAgICAgPC9kYXRhbGlzdD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxzcGFuPkNhcnJpZXIgR2FpbjogPC9zcGFuPlxuICAgICAgICA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbWluPVwiMFwiIG1heD1cIjMwMDBcIiBzdGVwPVwiMVwiXG4gICAgICAgICAgICB2YWx1ZT1cIjFcIiBsaXN0PVwiY2FycmllckdhaW5cIiBuYW1lPVwiY2FycmllckdhaW5cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZHVsYXRpb25JbnB1dFwiPlxuICAgICAgICAgICAgPHNwYW4+TW9kdWxhdGlvbiBGcmVxOiA8L3NwYW4+XG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbWluPVwiMVwiIG1heD1cIjE1MDBcIiBzdGVwPVwiMVwiXG4gICAgICAgICAgICAgICAgdmFsdWU9XCI3NTBcIiBsaXN0PVwibW9kdWxhdGlvbkZyZXFcIiBuYW1lPVwibW9kdWxhdGlvbkZyZXFcIj5cbiAgICAgICAgICAgIDxzcGFuPk1vZHVsYXRpb24gRGVwdGg6IDwvc3Bhbj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFuZ2VcIiBtaW49XCIwXCIgbWF4PVwiMVwiIHN0ZXA9XCIwLjAxXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT1cIjBcIiBsaXN0PVwibW9kdWxhdGlvbkRlcHRoXCIgbmFtZT1cIm1vZHVsYXRpb25EZXB0aFwiPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZHVsYXRpb25JbnB1dFwiPlxuICAgICAgICAgIDxzcGFuPk1vZHVsYXRpb24gMiBGcmVxOiA8L3NwYW4+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJyYW5nZVwiIG1pbj1cIjFcIiBtYXg9XCIxNTAwXCIgc3RlcD1cIjFcIlxuICAgICAgICAgICAgICB2YWx1ZT1cIjc1MFwiIGxpc3Q9XCJtb2R1bGF0aW9uMkZyZXFcIiBuYW1lPVwibW9kdWxhdGlvbjJGcmVxXCI+XG4gICAgICAgICAgPHNwYW4+TW9kdWxhdGlvbiAyIERlcHRoOiA8L3NwYW4+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJyYW5nZVwiIG1pbj1cIjBcIiBtYXg9XCIxXCIgc3RlcD1cIjAuMDFcIlxuICAgICAgICAgICAgICB2YWx1ZT1cIjBcIiBsaXN0PVwibW9kdWxhdGlvbjJEZXB0aFwiIG5hbWU9XCJtb2R1bGF0aW9uMkRlcHRoXCI+XG4gICAgICAgICAgXG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwicmlnaHRcIj5cbiAgICAgICAgICA8c3Bhbj5DYXJyaWVyIHdhdmVmb3JtOiA8L3NwYW4+XG4gICAgICAgICAgPHNlbGVjdCBuYW1lPVwid2F2ZWZvcm1cIj5cbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJzaW5lXCI+U2luZTwvb3B0aW9uPlxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cInNxdWFyZVwiIHNlbGVjdGVkPlNxdWFyZTwvb3B0aW9uPlxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cInNhd3Rvb3RoXCI+U2F3dG9vdGg8L29wdGlvbj5cbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJ0cmlhbmdsZVwiPlRyaWFuZ2xlPC9vcHRpb24+XG4gICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgPHNwYW4+IE1vZDEgd2F2ZWZvcm06IDwvc3Bhbj5cbiAgICAgICAgICA8c2VsZWN0IG5hbWU9XCJ3YXZlZm9ybTJcIj5cbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJzaW5lXCI+U2luZTwvb3B0aW9uPlxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cInNxdWFyZVwiIHNlbGVjdGVkPlNxdWFyZTwvb3B0aW9uPlxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cInNhd3Rvb3RoXCI+U2F3dG9vdGg8L29wdGlvbj5cbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJ0cmlhbmdsZVwiPlRyaWFuZ2xlPC9vcHRpb24+XG4gICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgPHNwYW4+IE1vZDIgd2F2ZWZvcm06IDwvc3Bhbj5cbiAgICAgICAgICA8c2VsZWN0IG5hbWU9XCJ3YXZlZm9ybTNcIj5cbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJzaW5lXCI+U2luZTwvb3B0aW9uPlxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cInNxdWFyZVwiIHNlbGVjdGVkPlNxdWFyZTwvb3B0aW9uPlxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cInNhd3Rvb3RoXCI+U2F3dG9vdGg8L29wdGlvbj5cbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJ0cmlhbmdsZVwiPlRyaWFuZ2xlPC9vcHRpb24+XG4gICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgICAgPHNwYW4+S2V5Ym9hcmQgb2N0YXZlOiA8L3NwYW4+XG4gICAgICAgIDxzZWxlY3QgbmFtZT1cIm9jdGF2ZVwiPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIxXCI+MTwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIyXCI+Mjwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIzXCIgc2VsZWN0ZWQ+Mzwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCI0XCI+NDwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCI1XCI+NTwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCI2XCI+Njwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCI3XCI+Nzwvb3B0aW9uPlxuICAgICAgICA8L3NlbGVjdD5cbiAgICAgICBcbiAgICAgICBcbiAgICAgICAgPGRpdiBjbGFzcz1cImVmZmVjdFNldHRpbmdzXCJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZWZmZWN0XCIgaWQ9XCJmbGFuZ2VyXCI+XG4gICAgICAgICAgPHNwYW4+RmxhbmdlciA8L3NwYW4+XG4gICAgICAgICAgPGJyPlxuICAgICAgICAgIDxzcGFuPlRpbWU6IDwvc3Bhbj5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbWluPVwiMC4wXCIgbWF4PVwiMS4wXCIgc3RlcD1cIjAuMDFcIlxuICAgICAgICAgICAgICB2YWx1ZT1cIjBcIiBsaXN0PVwiZmxhbmdlclRpbWVcIiBuYW1lPVwidGltZVwiPlxuICAgICAgICAgIDxicj5cbiAgICAgICAgICA8c3Bhbj5EZXB0aDogPC9zcGFuPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFuZ2VcIiBtaW49XCIwLjBcIiBtYXg9XCIxLjBcIiBzdGVwPVwiMC4wMVwiXG4gICAgICAgICAgICAgIHZhbHVlPVwiMFwiIGxpc3Q9XCJmbGFuZ2VyRGVwdGhcIiBuYW1lPVwiZGVwdGhcIj5cbiAgICAgICAgICA8YnI+XG4gICAgICAgICAgPHNwYW4+U3BlZWQ6IDwvc3Bhbj5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbWluPVwiMC4wXCIgbWF4PVwiMS4wXCIgc3RlcD1cIjAuMDFcIlxuICAgICAgICAgICAgICB2YWx1ZT1cIjBcIiBsaXN0PVwiZmxhbmdlclNwZWVkXCIgbmFtZT1cInNwZWVkXCI+XG4gICAgICAgICAgPGJyPlxuICAgICAgICAgIDxzcGFuPkZlZWRiYWNrOiA8L3NwYW4+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJyYW5nZVwiIG1pbj1cIjAuMFwiIG1heD1cIjEuMFwiIHN0ZXA9XCIwLjAxXCJcbiAgICAgICAgICAgICAgdmFsdWU9XCIwXCIgbGlzdD1cImZsYW5nZXJGZWVkQmFja1wiIG5hbWU9XCJmZWVkYmFja1wiPlxuICAgICAgICAgIDxicj5cbiAgICAgICAgICA8c3Bhbj5NaXg6IDwvc3Bhbj5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbWluPVwiMC4wXCIgbWF4PVwiMS4wXCIgc3RlcD1cIjAuMDFcIlxuICAgICAgICAgICAgICB2YWx1ZT1cIjBcIiBsaXN0PVwiZmxhbmdlck1peFwiIG5hbWU9XCJtaXhcIj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJlZmZlY3RcIiBpZD1cInRyZW1vbG9cIj5cbiAgICAgICAgICA8c3Bhbj5UcmVtb2xvIDwvc3Bhbj5cbiAgICAgICAgICA8YnI+XG4gICAgICAgICAgPHNwYW4+RGVwdGg6IDwvc3Bhbj5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbWluPVwiMC4wXCIgbWF4PVwiMjBcIiBzdGVwPVwiMC4wMVwiXG4gICAgICAgICAgICAgIHZhbHVlPVwiMFwiIGxpc3Q9XCJ0cmVtb2xvRGVwdGhcIiBuYW1lPVwiZGVwdGhcIj5cbiAgICAgICAgICA8YnI+XG4gICAgICAgICAgPHNwYW4+U3BlZWQ6IDwvc3Bhbj5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbWluPVwiMC4wXCIgbWF4PVwiMTAwMFwiIHN0ZXA9XCIxXCJcbiAgICAgICAgICAgICAgdmFsdWU9XCIwXCIgbGlzdD1cInRyZW1vbG9TcGVlZFwiIG5hbWU9XCJzcGVlZFwiPlxuICAgICAgICAgIDxicj5cbiAgICAgICAgICA8c3Bhbj5NaXg6IDwvc3Bhbj5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbWluPVwiMC4wXCIgbWF4PVwiMS4wXCIgc3RlcD1cIjAuMDFcIlxuICAgICAgICAgICAgICB2YWx1ZT1cIjBcIiBsaXN0PVwidHJlbW9sb01peFwiIG5hbWU9XCJtaXhcIj5cbiAgICAgICAgICA8L2Rpdj4gICBcblxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJlZmZlY3RcIiBpZD1cInJldmVyYlwiPlxuICAgICAgICAgIDxzcGFuPlJldmVyYiA8L3NwYW4+XG4gICAgICAgICAgPGJyPlxuICAgICAgICAgIDxzcGFuPnRpbWU6IDwvc3Bhbj5cbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhbmdlXCIgbWluPVwiMC4wXCIgbWF4PVwiM1wiIHN0ZXA9XCIwLjAxXCJcbiAgICAgICAgICAgICAgdmFsdWU9XCIwXCIgbGlzdD1cInJldmVyYlRpbWVcIiBuYW1lPVwidGltZVwiPlxuICAgICAgICAgIDxicj5cbiAgICAgICAgICA8c3Bhbj5EZWNheTogPC9zcGFuPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFuZ2VcIiBtaW49XCIwLjBcIiBtYXg9XCIxXCIgc3RlcD1cIjAuMDFcIlxuICAgICAgICAgICAgICB2YWx1ZT1cIjBcIiBsaXN0PVwicmV2ZXJiRGVjYXlcIiBuYW1lPVwiZGVjYXlcIj5cbiAgICAgICAgICA8YnI+XG4gICAgICAgICAgPHNwYW4+TWl4OiA8L3NwYW4+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJyYW5nZVwiIG1pbj1cIjAuMFwiIG1heD1cIjFcIiBzdGVwPVwiMC4wMVwiXG4gICAgICAgICAgICAgIHZhbHVlPVwiMFwiIGxpc3Q9XCJyZXZlcmJNaXhcIiBuYW1lPVwibWl4XCI+XG4gICAgICAgICAgPGJyPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxkaXY+XG48ZGl2PlxuICAgIDxzdHlsZT5cbiAgICAgIC5zeW50aCB7XG4gICAgICAgIGhlaWdodDogMTEwcHg7XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICAgIFxuICAgICAgfVxuICAgICAgLmtleWJvYXJkIHtcbiAgICAgICAgaGVpZ2h0OiAxMDBweDtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgbWFyZ2luOiAyMHB4O1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgXG4gICAgICB9XG4gICAgICBcbiAgICAgIC5rZXkge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGZvbnQ6IDEwcHggXCJPcGVuIFNhbnNcIiwgXCJMdWNpZGEgR3JhbmRlXCIsIFwiQXJpYWxcIiwgc2Fucy1zZXJpZjtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgd2lkdGg6IDIwcHg7XG4gICAgICAgIGhlaWdodDogODBweDtcbiAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBib3gtc2hhZG93OiAycHggMnB4IGRhcmtncmF5O1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAzcHg7XG4gICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5rZXkgZGl2IHtcbiAgICAgICAgcG9zaXRpb246IGZsZXhpYmxlO1xuICAgICAgICBib3R0b206IDA7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgfVxuICAgICAgXG4gICAgICAua2V5IGRpdiBzdWIge1xuICAgICAgICBmb250LXNpemU6IDEwcHg7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgfVxuICAgICAgXG4gICAgICAua2V5OmFjdGl2ZSB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM1OTk7XG4gICAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgfVxuXG4gICAgICAuc2hhcnBLZXk6YWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzU5OTtcbiAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICB9XG5cbiAgICAgIFxuICAgICAgLm9jdGF2ZSB7XG4gICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcblxuICAgICAgfVxuICAgICAgXG4gICAgICAuc2V0dGluZ3NCYXIge1xuICAgICAgICBmbG9hdDogcmlnaHQ7XG4gICAgICAgIG1hcmdpbjogMjBweDtcbiAgICAgICAgbWFyZ2luLXRvcDogLTEwMHB4O1xuICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICBmb250OiAxNHB4IFwiT3BlbiBTYW5zXCIsIFwiTHVjaWRhIEdyYW5kZVwiLCBcIkFyaWFsXCIsIHNhbnMtc2VyaWY7XG4gICAgICAgIHBvc2l0aW9uOiBmbGV4aWJsZTtcbiAgICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgICB3aWR0aDogYXV0bztcbiAgICAgIH1cbiAgICAgIC5yaWdodCB7XG4gICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICB9XG5cbiAgICAgIC52b2x1bWVJbnB1dHtcbiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgIH1cblxuICAgICAgLnNoYXJwS2V5IHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250OiAxMHB4IFwiT3BlbiBTYW5zXCIsIFwiTHVjaWRhIEdyYW5kZVwiLCBcIkFyaWFsXCIsIHNhbnMtc2VyaWY7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAgIHdpZHRoOiAxMHB4O1xuICAgICAgICBoZWlnaHQ6IDgwcHg7XG4gICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgYm94LXNoYWRvdzogMnB4IDJweCBkYXJrZ3JheTtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIG1hcmdpbi1yaWdodDogM3B4O1xuICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBtYXJnaW4tbGVmdDogMjBweDtcbiAgICAgIH1cblxuICAgICAgLm1vZHVsYXRpb25JbnB1dHtcbiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgIH1cblxuICAgICAgLmxmb0ZyZXF7XG4gICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgICB9XG5cbiAgICAgIC5lZmZlY3RTZXR0aW5ncyB7XG4gICAgICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgICAgIFxuICAgICAgfVxuXG4gICAgICAuZWZmZWN0IHtcbiAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgfVxuICAgIDwvc3R5bGU+XG48L2Rpdj5cbmBcblxuey8qICovfVxuXG5tb2R1bGUuZXhwb3J0cy50ZW1wbGF0ZSA9IHRlbXBsYXRlXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2FwcC9zcmMvanMvdGVtcGxhdGVzL3N5bnRoVGVtcGxhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5\n")
  /***/ },
/* 6 */
  /***/ function (module, exports) {
    eval('/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n/* WEBPACK VAR INJECTION */}.call(exports, {}))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vYW1kLW9wdGlvbnMuanM/NWY3MSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBIiwiZmlsZSI6IjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWxzIF9fd2VicGFja19hbWRfb3B0aW9uc19fICovXHJcbm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX2FtZF9vcHRpb25zX187XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9idWlsZGluL2FtZC1vcHRpb25zLmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///6\n')
  /***/ },
/* 7 */
  /***/ function (module, exports) {
    eval("var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzPzM2OTgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRDQUE0Qzs7QUFFNUMiLCJmaWxlIjoiNy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBnO1xyXG5cclxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcclxuZyA9IChmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcztcclxufSkoKTtcclxuXHJcbnRyeSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXHJcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLGV2YWwpKFwidGhpc1wiKTtcclxufSBjYXRjaChlKSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcclxuXHRpZih0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKVxyXG5cdFx0ZyA9IHdpbmRvdztcclxufVxyXG5cclxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxyXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xyXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGc7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7\n")
  /***/ },
/* 8 */
  /***/ function (module, exports, __webpack_require__) {
    module.exports = __webpack_require__(0)
  /***/ }
/******/ ])
